{"version":3,"sources":["recon.min.js"],"names":["f","exports","module","define","amd","g","window","global","self","this","recon","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length",1,"coerce","value","Extant","Record","Uint8Array","toString","Array","isArray","coerceArray","toRecon","coerceObject","Absent","array","builder","RecordBuilder","appendValue","state","object","prop","key","attrs","isAbsent","appendField","Attr","Slot","parse","string","input","StringIterator","result","DocumentParser","run","stringify","writer","ReconWriter","writeBlock","objectify","isExtant","undefined","objectifyArray","objectifyObject","record","items","iterator","isEmpty","head","push","step","@","hasAttrs","item","isField","isAttr","index","__proto__","prototype","size","Object","getOwnPropertyNames","RecordIterator","Field","ValueBuilder","StringIteratee","StringBuilder","DataBuilder","buffer","offset","aliased","p","q","isSpace","c","isNewline","isWhitespace","isNameStartChar","isNameChar","isBase64Char","BlockParser","AttrParser","ident","IdentParser","BlockValueParser","field","InlineValueParser","RecordParser","MarkupParser","text","StringParser","DataParser","data","NumberParser","create","Function","constructor","isMarkup","isBlank","cs","afterNonText","hasNonText","sections","writeRecord","isSlot","isDone","c1","charCodeAt","c2","Done","isCont","isError","feed","next","error","unexpectedEOF","append","String","fromCharCode","appendString","prepare","expand","base","Math","max","set","appendByte","decodeBase64Digit","decodeBase64Quantum","x","y","z","w","appendBase64Char","subarray","found","expected","Number","writeValue","inMarkup","writeText","writeNumber","writeData","writeAttr","attr","writeIdent","writeItem","writeMarkup","writeString","isIdent","writeTextMarkup","number","encodeBase64Digit"],"mappings":"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","file":"recon.min.js","sourcesContent":["(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.recon = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\n\nfunction coerce(value) {\n  if (value === null) return Extant;\n  else if (value instanceof Record ||\n           typeof value === 'string' ||\n           typeof value === 'number' ||\n           value instanceof Uint8Array) return value;\n  else if (typeof value === 'boolean') return value.toString();\n  else if (Array.isArray(value)) return coerceArray(value);\n  else if (typeof value === 'object') {\n    if (value.toRecon && typeof value.toRecon === 'function') return value.toRecon();\n    else return coerceObject(value);\n  }\n  else return Absent;\n}\nfunction coerceArray(array) {\n  var builder = new RecordBuilder();\n  var n = array.length;\n  var i = 0;\n  while (i < n) {\n    var value = coerce(array[i]);\n    builder.appendValue(value);\n    i += 1;\n  }\n  return builder.state();\n}\nfunction coerceObject(object) {\n  var builder = new RecordBuilder();\n  var prop, key, value;\n  var attrs = object['@'];\n  for (prop in attrs) {\n    key = coerce(prop);\n    if (typeof key === 'string') {\n      value = coerce(attrs[prop]);\n      if (!value.isAbsent) builder.appendField(new Attr(key, value));\n    }\n  }\n  for (prop in object) {\n    if (prop !== '@') {\n      key = coerce(prop);\n      if (!key.isAbsent) {\n        value = coerce(object[prop]);\n        if (!value.isAbsent) builder.appendField(new Slot(key, value));\n      }\n    }\n  }\n  return builder.state();\n}\n\nfunction parse(string) {\n  var input = new StringIterator(string);\n  var result = new DocumentParser().run(input);\n  return result.state();\n}\n\nfunction stringify(value) {\n  var writer = new ReconWriter();\n  writer.writeBlock(value);\n  return writer.state();\n}\n\nfunction objectify(value) {\n  if (value === null || value.isExtant) return null;\n  else if (value.isAbsent) return undefined;\n  else if (value instanceof Record) {\n    if (value.isArray()) return objectifyArray(value);\n    else return objectifyObject(value);\n  }\n  else return value;\n}\nfunction objectifyArray(record) {\n  var array = [];\n  var items = record.iterator();\n  while (!items.isEmpty()) {\n    var value = objectify(items.head());\n    array.push(value);\n    items.step();\n  }\n  return array;\n}\nfunction objectifyObject(record) {\n  var items = record.iterator();\n  var key, value;\n  var attrs = {};\n  var object = {'@': attrs};\n  var hasAttrs = false;\n  var i = 0;\n  while (!items.isEmpty()) {\n    var item = items.head();\n    if (item.isField) {\n      key = objectify(item.key);\n      value = objectify(item.value);\n      if (item.isAttr) {\n        attrs[key] = value;\n        hasAttrs = true;\n      }\n      else object[key] = value;\n    }\n    else {\n      value = objectify(item.value);\n      object[i] = value;\n    }\n    items.step();\n    i += 1;\n  }\n  if (!hasAttrs) delete object['@'];\n  return object;\n}\n\n\nfunction Record(items, index) {\n  var record = function(key) {\n    var value = index[key];\n    if (typeof value === 'undefined' && typeof key === 'number') value = items[key];\n    return value;\n  };\n  record.__proto__ = Record.prototype;\n  record.size = items.length;\n  record.isArray = function () {\n    return items.length >= 0 && Object.getOwnPropertyNames(index).length === 0;\n  };\n  record.iterator = function () {\n    return new RecordIterator(items);\n  };\n  return record;\n}\nRecord.prototype = Object.create(Function.prototype);\nRecord.prototype.constructor = Record;\nRecord.prototype.isEmpty = function () {\n  return this.size === 0;\n};\nRecord.prototype.isMarkup = function () {\n  function isBlank(string) {\n    var cs = new StringIterator(string);\n    while (!cs.isEmpty() && isSpace(cs.head())) cs.step();\n    return cs.isEmpty();\n  }\n  var items = this.iterator();\n  var afterNonText = false;\n  var hasNonText = false;\n  var sections = 0;\n  while (!items.isEmpty()) {\n    var item = items.head();\n    if (typeof item !== 'string') {\n      if (afterNonText) return false;\n      afterNonText = true;\n      hasNonText = true;\n    }\n    else if (afterNonText && !isBlank(item)) {\n      afterNonText = false;\n      sections += 1;\n    }\n    else if (sections === 0) sections = 1;\n    items.step();\n  }\n  return hasNonText && sections >= 2;\n};\nRecord.prototype.toString = function () {\n  var writer = new ReconWriter();\n  writer.writeRecord(this);\n  return writer.state();\n};\n\n\nfunction Field() {}\nField.prototype.isField = true;\nField.prototype.isAttr = false;\nField.prototype.isSlot = false;\n\nfunction Attr(key, value) {\n  Field.call(this);\n  this.key = key;\n  this.value = typeof value === 'undefined' ? Extant : value;\n}\nAttr.prototype = Object.create(Field.prototype);\nAttr.prototype.constructor = Attr;\nAttr.prototype.isAttr = true;\n\nfunction Slot(key, value) {\n  Field.call(this);\n  this.key = key;\n  this.value = typeof value === 'undefined' ? Extant : value;\n}\nSlot.prototype = Object.create(Field.prototype);\nSlot.prototype.constructor = Slot;\nSlot.prototype.isSlot = true;\n\n\nvar Extant = {\n  isExtant: true\n};\n\nvar Absent = {\n  isAbsent: true\n};\n\n\nfunction RecordIterator(items, index) {\n  this.items = items;\n  this.index = index || 0;\n}\nRecordIterator.prototype.isEmpty = function () {\n  return this.index >= this.items.length;\n};\nRecordIterator.prototype.head = function () {\n  if (this.index >= this.items.length) throw 'head of empty iterator';\n  return this.items[this.index];\n};\nRecordIterator.prototype.step = function () {\n  if (this.index >= this.items.length) throw 'empty iterator step';\n  this.index += 1;\n};\n\n\nfunction RecordBuilder() {\n  this.items = [];\n  this.index = {};\n}\nRecordBuilder.prototype.appendField = function (field) {\n  this.items.push(field);\n  this.index[field.key] = field.value;\n};\nRecordBuilder.prototype.appendValue = function (value) {\n  this.items.push(value);\n};\nRecordBuilder.prototype.state = function () {\n  return new Record(this.items, this.index);\n};\n\n\nfunction ValueBuilder() {\n  this.items = null;\n  this.index = null;\n  this.value = null;\n}\nValueBuilder.prototype.appendField = function (field) {\n  if (!this.items) {\n    this.items = [];\n    this.index = {};\n    if (this.value) {\n      this.items.push(this.value);\n      this.value = null;\n    }\n  }\n  this.items.push(field);\n  this.index[field.key] = field.value;\n};\nValueBuilder.prototype.appendValue = function (value) {\n  if (this.items) this.items.push(value);\n  else if (!this.value) this.value = value;\n  else {\n    this.items = [];\n    this.index = {};\n    this.items.push(this.value);\n    this.value = null;\n    this.items.push(value);\n  }\n};\nValueBuilder.prototype.state = function () {\n  if (this.value) return this.value;\n  else if (this.items) return new Record(this.items, this.index);\n  else return Absent;\n};\n\n\nfunction StringIterator(string, index) {\n  this.string = string || '';\n  this.index = index || 0;\n}\nStringIterator.prototype.isDone = function () {\n  return false;\n};\nStringIterator.prototype.isEmpty = function () {\n  return this.index >= this.string.length;\n};\nStringIterator.prototype.head = function () {\n  var c1 = this.string.charCodeAt(this.index);\n  if (c1 <= 0xD7FF || c1 >= 0xE000) return c1; // U+0000..U+D7FF | U+E000..U+FFFF\n  else if (c1 <= 0xDBFF && this.index + 1 < this.string.length) { // c1 >= 0xD800\n    var c2 = this.string.charCodeAt(this.index + 1);\n    if (c2 >= 0xDC00 && c2 <= 0xDFFF) // U+10000..U+10FFFF\n      return (((c1 & 0x3FF) << 10) | (c2 & 0x3FF)) + 0x10000;\n    else return 0xFFFD;\n  }\n  else return 0xFFFD;\n};\nStringIterator.prototype.step = function () {\n  var c1 = this.string.charCodeAt(this.index);\n  if (c1 <= 0xD7FF || c1 >= 0xE000) // U+0000..U+D7FF | U+E000..U+FFFF\n    this.index += 1;\n  else if (c1 <= 0xDBFF && this.index + 1 < this.string.length) { // c1 >= 0xD800\n    var c2 = this.string.charCodeAt(this.index + 1);\n    if (c2 >= 0xDC00 && c2 <= 0xDFFF) // U+10000..U+10FFFF\n      this.index += 2;\n    else this.index += 1;\n  }\n  else this.index += 1;\n};\n\nStringIterator.Done = {\n  isDone: function () {\n    return true;\n  },\n  isEmpty: function () {\n    return true;\n  },\n  head: function () {\n    throw 'head of empty iterator';\n  },\n  step: function () {\n    throw 'empty iterator step';\n  }\n};\nStringIterator.Done.prototype = Object.create(StringIterator.prototype);\n\n\nfunction StringIteratee() {}\nStringIteratee.prototype.isCont = function () {\n  return true;\n};\nStringIteratee.prototype.isDone = function () {\n  return false;\n};\nStringIteratee.prototype.isError = function () {\n  return false;\n};\nStringIteratee.prototype.feed = function (input) {\n  return this;\n};\nStringIteratee.prototype.run = function (input) {\n  var next = this;\n  while (!input.isEmpty() && next.isCont()) next = next.feed(input);\n  if (input.isEmpty() && !input.isDone() && next.isCont()) next = next.feed(StringIterator.Done);\n  return next;\n};\n\nStringIteratee.Done = function (value) {\n  StringIteratee.call(this);\n  this.value = value;\n};\nStringIteratee.Done.prototype = Object.create(StringIteratee.prototype);\nStringIteratee.Done.prototype.constructor = StringIteratee.Done;\nStringIteratee.Done.prototype.isCont = function () {\n  return false;\n};\nStringIteratee.Done.prototype.isDone = function () {\n  return true;\n};\nStringIteratee.Done.prototype.feed = function (input) {\n  return this;\n};\nStringIteratee.Done.prototype.state = function () {\n  return this.value;\n};\n\nStringIteratee.Error = function (error) {\n  StringIteratee.call(this);\n  this.error = error;\n};\nStringIteratee.Error.prototype = Object.create(StringIteratee.prototype);\nStringIteratee.Error.prototype.constructor = StringIteratee.Error;\nStringIteratee.Error.prototype.isCont = function () {\n  return false;\n};\nStringIteratee.Error.prototype.isError = function () {\n  return true;\n};\nStringIteratee.Error.prototype.feed = function (input) {\n  return this;\n};\nStringIteratee.Error.prototype.state = function () {\n  throw this.error;\n};\n\nStringIteratee.unexpectedEOF = new StringIteratee.Error('unexpected end of input');\n\n\nfunction StringBuilder() {\n  this.string = '';\n}\nStringBuilder.prototype.append = function (c) {\n  if ((c >= 0x0000 && c <= 0xD7FF) ||\n      (c >= 0xE000 && c <= 0xFFFF)) { // U+0000..U+D7FF | U+E000..U+FFFF\n    this.string += String.fromCharCode(c);\n  }\n  else if (c >= 0x10000 && c <= 0x10FFFF) { // U+10000..U+10FFFF\n    var u = c - 0x10000;\n    this.string += String.fromCharCode(0xD800 | (u >>> 10), 0xDC00 | (u & 0x3FF));\n  }\n  else { // invalid code point\n    this.string += String.fromCharCode(0xFFFD);\n  }\n};\nStringBuilder.prototype.appendString = function (s) {\n  var cs = new StringIterator(s);\n  while (!cs.isEmpty()) {\n    this.append(cs.head());\n    cs.step();\n  }\n};\nStringBuilder.prototype.state = function () {\n  return this.string;\n};\n\n\nfunction DataBuilder() {\n  this.buffer = null;\n  this.offset = 0;\n  this.aliased = true;\n  this.p = 0;\n  this.q = 0;\n  this.r = 0;\n  this.s = 0;\n}\nDataBuilder.prototype.prepare = function (size) {\n  function expand(base, size) {\n    var n = Math.max(base, size) - 1;\n    n |= n >> 1; n |= n >> 2; n |= n >> 4; n |= n >> 8;\n    return n + 1;\n  }\n  if (this.aliased || size > this.buffer.length) {\n    var array = new Uint8Array(expand(256, size));\n    if (this.buffer) array.set(this.buffer);\n    this.buffer = array;\n    this.aliased = false;\n  }\n};\nDataBuilder.prototype.appendByte = function (value) {\n  this.prepare(this.offset + 1);\n  this.buffer[this.offset] = value;\n  this.offset += 1;\n};\nDataBuilder.prototype.decodeBase64Digit = function (c) {\n  if (c >= 65/*'A'*/ && c <= 90/*'Z'*/) return c - 65/*'A'*/;\n  else if (c >= 97/*'a'*/ && c <= 122/*'z'*/) return c - 71/*'a' - 26*/;\n  else if (c >= 48/*'0'*/ && c <= 57/*'9'*/) return c + 4/*52 - '0'*/;\n  else if (c === 43/*'+'*/ || c === 45/*'-'*/) return 62;\n  else if (c === 47/*'/'*/ || c === 95/*'_'*/) return 63;\n};\nDataBuilder.prototype.decodeBase64Quantum = function () {\n  var x = this.decodeBase64Digit(this.p);\n  var y = this.decodeBase64Digit(this.q);\n  if (this.r !== 61/*'='*/) {\n    var z = this.decodeBase64Digit(this.r);\n    if (this.s !== 61/*'='*/) {\n      var w = this.decodeBase64Digit(this.s);\n      this.appendByte((x << 2) | (y >>> 4));\n      this.appendByte((y << 4) | (z >>> 2));\n      this.appendByte((z << 6) | w);\n    }\n    else {\n      this.appendByte((x << 2) | (y >>> 4));\n      this.appendByte((y << 4) | (z >>> 2));\n    }\n  }\n  else {\n    if (this.s !== 61/*'='*/) throw 'incomplete base64 quantum';\n    this.appendByte((x << 2) | (y >>> 4));\n  }\n};\nDataBuilder.prototype.appendBase64Char = function (c) {\n  if (this.p === 0) this.p = c;\n  else if (this.q === 0) this.q = c;\n  else if (this.r === 0) this.r = c;\n  else {\n    this.s = c;\n    this.decodeBase64Quantum();\n    this.s = 0;\n    this.r = 0;\n    this.q = 0;\n    this.p = 0;\n  }\n};\nDataBuilder.prototype.state = function (value) {\n  if (!this.buffer) this.buffer = new Uint8Array(0);\n  else if (this.buffer.length !== this.offset) {\n    var array = new Uint8Array(this.offset);\n    array.set(this.buffer.subarray(0, this.offset));\n    this.buffer = array;\n  }\n  this.aliased = true;\n  return this.buffer;\n};\n\n\nfunction isSpace(c) {\n  return c === 0x20 || c === 0x9;\n}\nfunction isNewline(c) {\n  return c === 0xA || c === 0xD;\n}\nfunction isWhitespace(c) {\n  return isSpace(c) || isNewline(c);\n}\nfunction isNameStartChar(c) {\n  return (\n    c >= 65/*'A'*/ && c <= 90/*'Z'*/ ||\n    c === 95/*'_'*/ ||\n    c >= 97/*'a'*/ && c <= 122/*'z'*/ ||\n    c >= 0xC0 && c <= 0xD6 ||\n    c >= 0xD8 && c <= 0xF6 ||\n    c >= 0xF8 && c <= 0x2FF ||\n    c >= 0x370 && c <= 0x37D ||\n    c >= 0x37F && c <= 0x1FFF ||\n    c >= 0x200C && c <= 0x200D ||\n    c >= 0x2070 && c <= 0x218F ||\n    c >= 0x2C00 && c <= 0x2FEF ||\n    c >= 0x3001 && c <= 0xD7FF ||\n    c >= 0xF900 && c <= 0xFDCF ||\n    c >= 0xFDF0 && c <= 0xFFFD ||\n    c >= 0x10000 && c <= 0xEFFFF);\n}\nfunction isNameChar(c) {\n  return (\n    c === 45/*'-'*/ ||\n    c >= 48/*'0'*/ && c <= 57/*'9'*/ ||\n    c >= 65/*'A'*/ && c <= 90/*'Z'*/ ||\n    c === 95/*'_'*/ ||\n    c >= 97/*'a'*/ && c <= 122/*'z'*/ ||\n    c === 0xB7 ||\n    c >= 0xC0 && c <= 0xD6 ||\n    c >= 0xD8 && c <= 0xF6 ||\n    c >= 0xF8 && c <= 0x37D ||\n    c >= 0x37F && c <= 0x1FFF ||\n    c >= 0x200C && c <= 0x200D ||\n    c >= 0x203F && c <= 0x2040 ||\n    c >= 0x2070 && c <= 0x218F ||\n    c >= 0x2C00 && c <= 0x2FEF ||\n    c >= 0x3001 && c <= 0xD7FF ||\n    c >= 0xF900 && c <= 0xFDCF ||\n    c >= 0xFDF0 && c <= 0xFFFD ||\n    c >= 0x10000 && c <= 0xEFFFF);\n}\nfunction isBase64Char(c) {\n  return (\n    c >= 48/*'0'*/ && c <= 57/*'9'*/ ||\n    c >= 65/*'A'*/ && c <= 90/*'Z'*/ ||\n    c >= 97/*'a'*/ && c <= 122/*'z'*/ ||\n    c === 43/*'+'*/ || c === 45/*'-'*/ ||\n    c === 47/*'/'*/ || c === 95/*'_'*/);\n}\n\n\nfunction DocumentParser(value) {\n  StringIteratee.call(this);\n  this.value = value || new BlockParser();\n}\nDocumentParser.prototype = Object.create(StringIteratee.prototype);\nDocumentParser.prototype.constructor = DocumentParser;\nDocumentParser.prototype.feed = function (input) {\n  var value = this.value;\n  while ((!input.isEmpty() || input.isDone()) && value.isCont()) value = value.feed(input);\n  if (value.isError()) return value;\n  if (value.isDone()) {\n    if (!input.isEmpty()) return new StringIteratee.Error({found: input.head()});\n    else if (input.isDone()) return value;\n  }\n  return new DocumentParser(value);\n};\n\n\nfunction BlockParser(builder, key, value, s) {\n  StringIteratee.call(this);\n  this.builder = builder || null;\n  this.key = key || null;\n  this.value = value || null;\n  this.s = s || 1;\n}\nBlockParser.prototype = Object.create(StringIteratee.prototype);\nBlockParser.prototype.constructor = BlockParser;\nBlockParser.prototype.feed = function (input) {\n  var c = 0;\n  var s = this.s;\n  var value = this.value;\n  var key = this.key;\n  var builder = this.builder || new ValueBuilder();\n  while (!input.isEmpty() || input.isDone()) {\n    if (s === 1) {\n      while (!input.isEmpty() && (c = input.head(), isWhitespace(c))) input.step();\n      if (!input.isEmpty()) s = 2;\n      else if (input.isDone()) return new StringIteratee.Done(builder.state());\n    }\n    if (s === 2) {\n      key = key || new BlockValueParser();\n      while ((!input.isEmpty() || input.isDone()) && key.isCont()) key = key.feed(input);\n      if (key.isDone()) s = 3;\n      else if (key.isError()) return key;\n    }\n    if (s === 3) {\n      while (!input.isEmpty() && (c = input.head(), isSpace(c))) input.step();\n      if (!input.isEmpty()) {\n        if (c === 58/*':'*/) {\n          input.step();\n          s = 4;\n        }\n        else {\n          builder.appendValue(key.state());\n          key = null;\n          s = 6;\n        }\n      }\n      else if (input.isDone()) {\n        builder.appendValue(key.state());\n        return new StringIteratee.Done(builder.state());\n      }\n    }\n    if (s === 4) {\n      while (!input.isEmpty() && isSpace(input.head())) input.step();\n      if (!input.isEmpty()) s = 5;\n      else if (input.isDone()) {\n        builder.appendField(new Slot(key.state()));\n        return new StringIteratee.Done(builder.state());\n      }\n    }\n    if (s === 5) {\n      value = value || new BlockValueParser();\n      while ((!input.isEmpty() || input.isDone()) && value.isCont()) value = value.feed(input);\n      if (value.isDone()) {\n        builder.appendField(new Slot(key.state(), value.state()));\n        key = null;\n        value = null;\n        s = 6;\n      }\n      else if (value.isError()) return value;\n    }\n    if (s === 6) {\n      while (!input.isEmpty() && (c = input.head(), isSpace(c))) input.step();\n      if (!input.isEmpty()) {\n        if (c === 44/*','*/ || c === 59/*';'*/ || isNewline(c)) {\n          input.step();\n          s = 1;\n        }\n        else return new StringIteratee.Done(builder.state());\n      }\n      else if (input.isDone()) return new StringIteratee.Done(builder.state());\n    }\n  }\n  return new BlockParser(builder, key, value, s);\n};\n\n\nfunction AttrParser(ident, value, s) {\n  StringIteratee.call(this);\n  this.ident = ident || new IdentParser();\n  this.value = value || new BlockParser();\n  this.s = s || 1;\n}\nAttrParser.prototype = Object.create(StringIteratee.prototype);\nAttrParser.prototype.constructor = AttrParser;\nAttrParser.prototype.feed = function (input) {\n  var c = 0;\n  var s = this.s;\n  var value = this.value;\n  var ident = this.ident;\n  if (s === 1) {\n    if (!input.isEmpty() && (c = input.head(), c === 64/*'@'*/)) {\n      input.step();\n      s = 2;\n    }\n    else if (!input.isEmpty()) return new StringIteratee.Error({expected: '\\'@\\'', found: c});\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  if (s === 2) {\n    ident = ident.feed(input);\n    if (ident.isDone()) s = 3;\n    else if (ident.isError()) return ident;\n  }\n  if (s === 3) {\n    if (!input.isEmpty() && input.head() === 40/*'('*/) {\n      input.step();\n      s = 4;\n    }\n    else if (!input.isEmpty() || input.isDone()) return new StringIteratee.Done(new Attr(ident.state()));\n  }\n  if (s === 4) {\n    while (!input.isEmpty() && (c = input.head(), isWhitespace(c))) input.step();\n    if (!input.isEmpty()) {\n      if (c === 41/*')'*/) {\n        input.step();\n        return new StringIteratee.Done(new Attr(ident.state()));\n      }\n      else s = 5;\n    }\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  if (s === 5) {\n    while ((!input.isEmpty() || input.isDone()) && value.isCont()) value = value.feed(input);\n    if (value.isDone()) s = 6;\n    else if (value.isError()) return value;\n  }\n  if (s === 6) {\n    while (!input.isEmpty() && (c = input.head(), isWhitespace(c))) input.step();\n    if (!input.isEmpty()) {\n      if (c === 41/*')'*/) {\n        input.step();\n        return new StringIteratee.Done(new Attr(ident.state(), value.state()));\n      }\n      else return new StringIteratee.Error({expected: '\\')\\'', found: c});\n    }\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  return new AttrParser(ident, value, s);\n};\n\n\nfunction BlockValueParser(builder, field, value, s) {\n  StringIteratee.call(this);\n  this.builder = builder || null;\n  this.field = field || null;\n  this.value = value || null;\n  this.s = s || 1;\n}\nBlockValueParser.prototype = Object.create(StringIteratee.prototype);\nBlockValueParser.prototype.constructor = BlockValueParser;\nBlockValueParser.prototype.feed = function (input) {\n  var c = 0;\n  var s = this.s;\n  var value = this.value;\n  var field = this.field;\n  var builder = this.builder;\n  while (!input.isEmpty() || input.isDone()) {\n    if (s === 1) {\n      if (!input.isEmpty()) {\n        c = input.head();\n        if (c === 64/*'@'*/) {\n          field = new AttrParser();\n          s = 2;\n        }\n        else if (c === 123/*'{'*/) {\n          if (builder) {\n            value = new RecordParser(builder);\n            s = 5;\n          }\n          else {\n            value = new RecordParser();\n            s = 4;\n          }\n        }\n        else if (c === 91/*'['*/) {\n          if (builder) {\n            value = new MarkupParser(builder);\n            s = 5;\n          }\n          else {\n            value = new MarkupParser();\n            s = 4;\n          }\n        }\n        else if (c === 34/*'\"'*/) {\n          value = new StringParser();\n          s = 4;\n        }\n        else if (c === 37/*'%'*/) {\n          value = new DataParser();\n          s = 4;\n        }\n        else if (c === 45/*'-'*/ || c >= 48/*'0'*/ && c <= 57/*'9'*/) {\n          value = new NumberParser();\n          s = 4;\n        }\n        else if (isNameStartChar(c)) {\n          value = new IdentParser();\n          s = 4;\n        }\n        else if (!builder) return new StringIteratee.Done(Absent);\n        else return new StringIteratee.Done(builder.state());\n      }\n      else if (input.isDone()) {\n        if (!builder) return new StringIteratee.Done(Absent);\n        else return new StringIteratee.Done(builder.state());\n      }\n    }\n    if (s === 2) {\n      while ((!input.isEmpty() || input.isDone()) && field.isCont()) field = field.feed(input);\n      if (field.isDone()) {\n        builder = builder || new ValueBuilder();\n        builder.appendField(field.state());\n        field = null;\n        s = 3;\n      }\n      else if (field.isError()) return field;\n    }\n    if (s === 3) {\n      while (!input.isEmpty() && isSpace(input.head())) input.step();\n      if (!input.isEmpty()) s = 1;\n      else if (input.isDone()) return new StringIteratee.Done(builder.state());\n    }\n    if (s === 4) {\n      while ((!input.isEmpty() || input.isDone()) && value.isCont()) value = value.feed(input);\n      if (value.isDone()) {\n        builder = builder || new ValueBuilder();\n        builder.appendValue(value.state());\n        return new StringIteratee.Done(builder.state());\n      }\n      else if (value.isError()) return value;\n    }\n    if (s === 5) {\n      while ((!input.isEmpty() || input.isDone()) && value.isCont()) value = value.feed(input);\n      if (value.isDone()) return new StringIteratee.Done(builder.state());\n      else if (value.isError()) return value;\n    }\n  }\n  return new BlockValueParser(builder, field, value, s);\n};\n\n\nfunction InlineValueParser(builder, field, value, s) {\n  StringIteratee.call(this);\n  this.builder = builder || null;\n  this.field = field || null;\n  this.value = value || null;\n  this.s = s || 1;\n}\nInlineValueParser.prototype = Object.create(StringIteratee.prototype);\nInlineValueParser.prototype.constructor = InlineValueParser;\nInlineValueParser.prototype.feed = function (input) {\n  var c = 0;\n  var s = this.s;\n  var value = this.value;\n  var field = this.field;\n  var builder = this.builder;\n  while (!input.isEmpty() || input.isDone()) {\n    if (s === 1) {\n      if (!input.isEmpty()) {\n        c = input.head();\n        if (c === 64/*'@'*/) {\n          field = new AttrParser();\n          s = 2;\n        }\n        else if (c === 123/*'{'*/) {\n          if (builder) {\n            value = new RecordParser(builder);\n            s = 5;\n          }\n          else {\n            value = new RecordParser();\n            s = 4;\n          }\n        }\n        else if (c === 91/*'['*/) {\n          if (builder) {\n            value = new MarkupParser(builder);\n            s = 5;\n          }\n          else {\n            value = new MarkupParser();\n            s = 4;\n          }\n        }\n        else if (!builder) return new StringIteratee.Done(Absent);\n        else return new StringIteratee.Done(builder.state());\n      }\n      else if (input.isDone()) {\n        if (!builder) return new StringIteratee.Done(Absent);\n        else return new StringIteratee.Done(builder.state());\n      }\n    }\n    if (s === 2) {\n      while ((!input.isEmpty() || input.isDone()) && field.isCont()) field = field.feed(input);\n      if (field.isDone()) {\n        builder = builder || new ValueBuilder();\n        builder.appendField(field.state());\n        field = null;\n        s = 3;\n      }\n      else if (field.isError()) return field;\n    }\n    if (s === 3) {\n      while (!input.isEmpty() && isSpace(input.head())) input.step();\n      if (!input.isEmpty()) s = 1;\n      else if (input.isDone()) return new StringIteratee.Done(builder.state());\n    }\n    if (s === 4) {\n      while ((!input.isEmpty() || input.isDone()) && value.isCont()) value = value.feed(input);\n      if (value.isDone()) {\n        builder = builder || new ValueBuilder();\n        builder.appendValue(value.state());\n        return new StringIteratee.Done(builder.state());\n      }\n      else if (value.isError()) return value;\n    }\n    if (s === 5) {\n      while ((!input.isEmpty() || input.isDone()) && value.isCont()) value = value.feed(input);\n      if (value.isDone()) return new StringIteratee.Done(builder.state());\n      else if (value.isError()) return value;\n    }\n  }\n  return new InlineValueParser(builder, field, value, s);\n};\n\n\nfunction RecordParser(builder, key, value, s) {\n  StringIteratee.call(this);\n  this.builder = builder || null;\n  this.key = key || null;\n  this.value = value || null;\n  this.s = s || 1;\n}\nRecordParser.prototype = Object.create(StringIteratee.prototype);\nRecordParser.prototype.constructor = RecordParser;\nRecordParser.prototype.feed = function (input) {\n  var c = 0;\n  var s = this.s;\n  var value = this.value;\n  var key = this.key;\n  var builder = this.builder || new RecordBuilder();\n  if (s === 1) {\n    if (!input.isEmpty()) {\n      c = input.head();\n      if (c === 123/*'{'*/) {\n        input.step();\n        s = 2;\n      }\n      else return new StringIteratee.Error({expected: '\\'{\\'', found: c});\n    }\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  while (!input.isEmpty() || input.isDone()) {\n    if (s === 2) {\n      while (!input.isEmpty() && (c = input.head(), isWhitespace(c))) input.step();\n      if (!input.isEmpty()) {\n        if (c === 125/*'}'*/) {\n          input.step();\n          return new StringIteratee.Done(builder.state());\n        }\n        else s = 3;\n      }\n      else if (input.isDone()) return StringIteratee.unexpectedEOF;\n    }\n    if (s === 3) {\n      key = key || new BlockValueParser();\n      while ((!input.isEmpty() || input.isDone()) && key.isCont()) key = key.feed(input);\n      if (key.isDone()) s = 4;\n      else if (key.isError()) return key;\n    }\n    if (s === 4) {\n      while (!input.isEmpty() && (c = input.head(), isSpace(c))) input.step();\n      if (!input.isEmpty()) {\n        if (c === 58/*':'*/) {\n          input.step();\n          s = 5;\n        }\n        else {\n          builder.appendValue(key.state());\n          key = null;\n          s = 7;\n        }\n      }\n      else if (input.isDone()) {\n        builder.appendValue(key.state());\n        return new StringIteratee.Done(builder.state());\n      }\n    }\n    if (s === 5) {\n      while (!input.isEmpty() && isSpace(input.head())) input.step();\n      if (!input.isEmpty()) s = 6;\n      else if (input.isDone()) {\n        builder.appendField(new Slot(key.state()));\n        return new StringIteratee.Done(builder.state());\n      }\n    }\n    if (s === 6) {\n      value = value || new BlockValueParser();\n      while ((!input.isEmpty() || input.isDone()) && value.isCont()) value = value.feed(input);\n      if (value.isDone()) {\n        builder.appendField(new Slot(key.state(), value.state()));\n        key = null;\n        value = null;\n        s = 7;\n      }\n      else if (value.isError()) return value;\n    }\n    if (s === 7) {\n      while (!input.isEmpty() && (c = input.head(), isSpace(c))) input.step();\n      if (!input.isEmpty()) {\n        if (c === 44/*','*/ || c === 59/*';'*/ || isNewline(c)) {\n          input.step();\n          s = 2;\n        }\n        else if (c === 125/*'}'*/) {\n          input.step();\n          return new StringIteratee.Done(builder.state());\n        }\n       else return new StringIteratee.Error({expected: '\\'}\\', \\';\\', \\',\\', or newline', found: c});\n      }\n      else if (input.isDone()) return StringIteratee.unexpectedEOF;\n    }\n  }\n  return new RecordParser(builder, key, value, s);\n};\n\n\nfunction MarkupParser(builder, text, value, s) {\n  StringIteratee.call(this);\n  this.builder = builder || null;\n  this.text = text || null;\n  this.value = value || null;\n  this.s = s || 1;\n}\nMarkupParser.prototype = Object.create(StringIteratee.prototype);\nMarkupParser.prototype.constructor = MarkupParser;\nMarkupParser.prototype.feed = function (input) {\n  var c = 0;\n  var s = this.s;\n  var value = this.value;\n  var text = this.text;\n  var builder = this.builder;\n  if (s === 1) {\n    if (!input.isEmpty()) {\n      c = input.head();\n      if (c === 91/*'['*/) {\n        input.step();\n        s = 2;\n      }\n      else return new StringIteratee.Error({expected: '\\'[\\'', found: c});\n    }\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  while (!input.isEmpty() || input.isDone()) {\n    if (s === 2) {\n      while (!input.isEmpty() && (c = input.head(),\n          c !== 64/*'@'*/ &&\n          c !== 91/*'['*/ &&\n          c !== 92/*'\\\\'*/ &&\n          c !== 93/*']'*/ &&\n          c !== 123/*'{'*/ &&\n          c !== 125/*'}'*/)) {\n        input.step();\n        text = text || new StringBuilder();\n        text.append(c);\n      }\n      if (!input.isEmpty()) {\n        if (c === 93/*']'*/) {\n          input.step();\n          if (!builder) {\n            if (!text) text = text || new StringBuilder();\n            return new StringIteratee.Done(text.state());\n          }\n          else {\n            if (text) builder.appendValue(text.state());\n            return new StringIteratee.Done(builder.state());\n          }\n        }\n        else if (c === 64/*'@'*/) {\n          builder = builder || new RecordBuilder();\n          if (text) {\n            builder.appendValue(text.state());\n            text = null;\n          }\n          value = new InlineValueParser();\n          s = 3;\n        }\n        else if (c === 123/*'{'*/) {\n          builder = builder || new RecordBuilder();\n          if (text) {\n            builder.appendValue(text.state());\n            text = null;\n          }\n          value = new RecordParser(builder);\n          s = 4;\n        }\n        else if (c === 91/*'['*/) {\n          builder = builder || new RecordBuilder();\n          if (text) {\n            builder.appendValue(text.state());\n            text = null;\n          }\n          value = new MarkupParser(builder);\n          s = 4;\n        }\n        else if (c === 92/*'\\\\'*/) {\n          input.step();\n          s = 5;\n        }\n        else new StringIteratee.Error({found: c});\n      }\n      else if (input.isDone()) return StringIteratee.unexpectedEOF;\n    }\n    if (s === 3) {\n      while ((!input.isEmpty() || input.isDone()) && value.isCont()) value = value.feed(input);\n      if (value.isDone()) {\n        builder.appendValue(value.state());\n        value = null;\n        s = 2;\n      }\n      else if (value.isError()) return value;\n    }\n    if (s === 4) {\n      while ((!input.isEmpty() || input.isDone()) && value.isCont()) value = value.feed(input);\n      if (value.isDone()) {\n        value = null;\n        s = 2;\n      }\n      else if (value.isError()) return value;\n    }\n    if (s === 5) {\n      if (!input.isEmpty()) {\n        c = input.head();\n        text = text || new StringBuilder();\n        if (c === 34/*'\"'*/ ||\n            c === 47/*'/'*/ ||\n            c === 64/*'@'*/ ||\n            c === 91/*'['*/ ||\n            c === 92/*'\\\\'*/ ||\n            c === 93/*']'*/ ||\n            c === 123/*'{'*/ ||\n            c === 125/*'}'*/) {\n          input.step();\n          text.append(c);\n          s = 2;\n        }\n        else if (c === 98/*'b'*/) {\n          input.step();\n          text.append(8/*'\\b'*/);\n          s = 2;\n        }\n        else if (c === 102/*'f'*/) {\n          input.step();\n          text.append(12/*'\\f'*/);\n          s = 2;\n        }\n        else if (c === 110/*'n'*/) {\n          input.step();\n          text.append(10/*'\\n'*/);\n          s = 2;\n        }\n        else if (c === 114/*'r'*/) {\n          input.step();\n          text.append(13/*'\\r'*/);\n          s = 2;\n        }\n        else if (c === 116/*'t'*/) {\n          input.step();\n          text.append(9/*'\\t'*/);\n          s = 2;\n        }\n        else return new StringIteratee.Error({expected: 'escape character', found: c});\n      }\n      else if (input.isDone()) return StringIteratee.unexpectedEOF;\n    }\n  }\n  return new MarkupParser(builder, text, value, s);\n};\n\n\nfunction StringParser(text, s) {\n  StringIteratee.call(this);\n  this.text = text || null;\n  this.s = s || 1;\n}\nStringParser.prototype = Object.create(StringIteratee.prototype);\nStringParser.prototype.constructor = StringParser;\nStringParser.prototype.feed = function (input) {\n  var c = 0;\n  var s = this.s;\n  var text = this.text;\n  if (s === 1) {\n    if (!input.isEmpty() && (c = input.head(), c === 34/*'\"'*/)) {\n      input.step();\n      s = 2;\n    }\n    else if (!input.isEmpty()) return new StringIteratee.Error({expected: '\\'\"\\'', found: c});\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  while (!input.isEmpty() || input.isDone()) {\n    if (s === 2) {\n      text = text || new StringBuilder();\n      while (!input.isEmpty() && (c = input.head(), c !== 34/*'\"'*/ && c !== 92/*'\\\\'*/)) {\n        input.step();\n        text.append(c);\n      }\n      if (!input.isEmpty()) {\n        if (c === 34/*'\"'*/) {\n          input.step();\n          return new StringIteratee.Done(text.state());\n        }\n        else if (c === 92/*'\\\\'*/) {\n          input.step();\n          s = 3;\n        }\n      }\n      else if (input.isDone()) return StringIteratee.unexpectedEOF;\n    }\n    if (s === 3) {\n      if (!input.isEmpty()) {\n        c = input.head();\n        if (c === 34/*'\"'*/ ||\n            c === 47/*'/'*/ ||\n            c === 64/*'@'*/ ||\n            c === 91/*'['*/ ||\n            c === 92/*'\\\\'*/ ||\n            c === 93/*']'*/ ||\n            c === 123/*'{'*/ ||\n            c === 125/*'}'*/) {\n          input.step();\n          text.append(c);\n          s = 2;\n        }\n        else if (c === 98/*'b'*/) {\n          input.step();\n          text.append(8/*'\\b'*/);\n          s = 2;\n        }\n        else if (c === 102/*'f'*/) {\n          input.step();\n          text.append(12/*'\\f'*/);\n          s = 2;\n        }\n        else if (c === 110/*'n'*/) {\n          input.step();\n          text.append(10/*'\\n'*/);\n          s = 2;\n        }\n        else if (c === 114/*'r'*/) {\n          input.step();\n          text.append(13/*'\\r'*/);\n          s = 2;\n        }\n        else if (c === 116/*'t'*/) {\n          input.step();\n          text.append(9/*'\\t'*/);\n          s = 2;\n        }\n        else return new StringIteratee.Error({expected: 'escape character', found: c});\n      }\n      else if (input.isDone()) return StringIteratee.unexpectedEOF;\n    }\n  }\n  return new StringParser(text, s);\n};\n\n\nfunction DataParser(data, s) {\n  StringIteratee.call(this);\n  this.data = data || null;\n  this.s = s || 1;\n}\nDataParser.prototype = Object.create(StringIteratee.prototype);\nDataParser.prototype.constructor = DataParser;\nDataParser.prototype.feed = function (input) {\n  var c = 0;\n  var s = this.s;\n  var data = this.data || new DataBuilder();\n  if (s === 1) {\n    if (!input.isEmpty() && (c = input.head(), c === 37/*'%'*/)) {\n      input.step();\n      s = 2;\n    }\n    else if (!input.isEmpty()) return new StringIteratee.Error({expected: '\\'%\\'', found: c});\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  while (!input.isEmpty() || input.isDone()) {\n    if (s === 2) {\n      if (!input.isEmpty() && (c = input.head(), isBase64Char(c))) {\n        input.step();\n        data.appendBase64Char(c);\n        s = 3;\n      }\n      else if (!input.isEmpty() || input.isDone()) return new StringIteratee.Done(data.state());\n    }\n    if (s === 3) {\n      if (!input.isEmpty() && (c = input.head(), isBase64Char(c))) {\n        input.step();\n        data.appendBase64Char(c);\n        s = 4;\n      }\n      else if (!input.isEmpty()) return new StringIteratee.Error({expected: 'base64 digit', found: c});\n      else if (input.isDone()) return StringIteratee.unexpectedEOF;\n    }\n    if (s === 4) {\n      if (!input.isEmpty() && (c = input.head(), isBase64Char(c) || c === 61/*'='*/)) {\n        input.step();\n        data.appendBase64Char(c);\n        if (c !== 61/*'='*/) s = 5;\n        else s = 6;\n      }\n      else if (!input.isEmpty()) return new StringIteratee.Error({expected: 'base64 digit', found: c});\n      else if (input.isDone()) return StringIteratee.unexpectedEOF;\n    }\n    if (s === 5) {\n      if (!input.isEmpty() && (c = input.head(), isBase64Char(c) || c === 61/*'='*/)) {\n        input.step();\n        data.appendBase64Char(c);\n        if (c !== 61/*'='*/) s = 2;\n        else return new StringIteratee.Done(data.state());\n      }\n      else if (!input.isEmpty()) return new StringIteratee.Error({expected: 'base64 digit', found: c});\n      else if (input.isDone()) return StringIteratee.unexpectedEOF;\n    }\n    else if (s === 6) {\n      if (!input.isEmpty() && (c = input.head(), c === 61/*'='*/)) {\n        input.step();\n        data.appendBase64Char(c);\n        return new StringIteratee.Done(data.state());\n      }\n      else if (!input.isEmpty()) return new StringIteratee.Error({expected: '\\'=\\'', found: c});\n      else if (input.isDone()) return StringIteratee.unexpectedEOF;\n    }\n  }\n  return new DataParser(data, s);\n};\n\n\nfunction NumberParser(builder, s) {\n  StringIteratee.call(this);\n  this.builder = builder || null;\n  this.s = s || 1;\n}\nNumberParser.prototype = Object.create(StringIteratee.prototype);\nNumberParser.prototype.constructor = NumberParser;\nNumberParser.prototype.feed = function (input) {\n  var c = 0;\n  var s = this.s;\n  var builder = this.builder || new StringBuilder();\n  if (s === 1) {\n    if (!input.isEmpty()) {\n      c = input.head();\n      if (c === 45/*'-'*/) {\n        input.step();\n        builder.append(c);\n      }\n      s = 2;\n    }\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  if (s === 2) {\n    if (!input.isEmpty()) {\n      c = input.head();\n      if (c === 48/*'0'*/) {\n        input.step();\n        builder.append(c);\n        s = 4;\n      }\n      else if (c >= 49/*'1'*/ && c <= 57/*'9'*/) {\n        input.step();\n        builder.append(c);\n        s = 3;\n      }\n      else return new StringIteratee.Error({expected: 'digit', found: c});\n    }\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  if (s === 3) {\n    while (!input.isEmpty() && (c = input.head(), c >= 48/*'0'*/ && c <= 57/*'9'*/)) {\n      input.step();\n      builder.append(c);\n    }\n    if (!input.isEmpty()) s = 4;\n    else if (input.isDone()) return new StringIteratee.Done(Number(builder.state()));\n  }\n  if (s === 4) {\n    if (!input.isEmpty()) {\n      c = input.head();\n      if (c === 46/*'.'*/) {\n        input.step();\n        builder.append(c);\n        s = 5;\n      }\n      else if (c === 69/*'E'*/ || c === 101/*'e'*/) {\n        input.step();\n        builder.append(c);\n        s = 8;\n      }\n      else return new StringIteratee.Done(Number(builder.state()));\n    }\n    else if (input.isDone()) return new StringIteratee.Done(Number(builder.state()));\n  }\n  if (s === 5) {\n    if (!input.isEmpty()) {\n      c = input.head();\n      if (c >= 48/*'0'*/ && c <= 57/*'9'*/) {\n        input.step();\n        builder.append(c);\n        s = 6;\n      }\n      else return new StringIteratee.Error({expected: 'digit', found: c});\n    }\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  if (s === 6) {\n    while (!input.isEmpty() && (c = input.head(), c >= 48/*'0'*/ && c <= 57/*'9'*/)) {\n      input.step();\n      builder.append(c);\n    }\n    if (!input.isEmpty()) s = 7;\n    else if (input.isDone()) return new StringIteratee.Done(Number(builder.state()));\n  }\n  if (s === 7) {\n    c = input.head();\n    if (c === 69/*'E'*/ || c === 101/*'e'*/) {\n      input.step();\n      builder.append(c);\n      s = 8;\n    }\n    else return new StringIteratee.Done(Number(builder.state()));\n  }\n  if (s === 8) {\n    if (!input.isEmpty()) {\n      c = input.head();\n      if (c === 43/*'+'*/ || c === 45/*'-'*/) {\n        input.step();\n        builder.append(c);\n      }\n      s = 9;\n    }\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  if (s === 9) {\n    if (!input.isEmpty()) {\n      c = input.head();\n      if (c >= 48/*'0'*/ && c <= 57/*'9'*/) {\n        input.step();\n        builder.append(c);\n        s = 10;\n      }\n      else return new StringIteratee.Error({expected: 'digit', found: c});\n    }\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  if (s === 10) {\n    while (!input.isEmpty() && (c = input.head(), c >= 48/*'0'*/ && c <= 57/*'9'*/)) {\n      input.step();\n      builder.append(c);\n    }\n    if (!input.isEmpty() || input.isDone()) return new StringIteratee.Done(Number(builder.state()));\n  }\n  return new NumberParser(builder, s);\n};\n\nfunction IdentParser(builder, s) {\n  StringIteratee.call(this);\n  this.builder = builder || null;\n  this.s = s || 1;\n}\nIdentParser.prototype = Object.create(StringIteratee.prototype);\nIdentParser.prototype.constructor = IdentParser;\nIdentParser.prototype.feed = function (input) {\n  var c = 0;\n  var s = this.s;\n  var builder = this.builder;\n  if (s === 1) {\n    if (!input.isEmpty() && (c = input.head(), isNameStartChar(c))) {\n      builder = builder || new StringBuilder();\n      input.step();\n      builder.append(c);\n      s = 2;\n    }\n    else if (!input.isEmpty()) return new StringIteratee.Error({expected: 'identitifer', found: c});\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  if (s === 2) {\n    while (!input.isEmpty() && (c = input.head(), isNameChar(c))) {\n      input.step();\n      builder.append(c);\n    }\n    if (!input.isEmpty() || input.isDone()) return new StringIteratee.Done(builder.state());\n  }\n  return new IdentParser(builder, s);\n};\n\n\nfunction ReconWriter(builder) {\n  this.builder = builder || new StringBuilder();\n}\nReconWriter.prototype.writeValue = function (value, inMarkup) {\n  if (value instanceof Record) this.writeRecord(value, inMarkup);\n  else if (typeof value === 'string') this.writeText(value, inMarkup);\n  else if (typeof value === 'number') this.writeNumber(value);\n  else if (value instanceof Uint8Array) this.writeData(value);\n};\nReconWriter.prototype.writeAttr = function(attr) {\n  this.builder.append(64/*'@'*/);\n  this.writeIdent(attr.key);\n  if (!attr.value.isExtant) {\n    this.builder.append(40/*'('*/);\n    this.writeBlock(attr.value);\n    this.builder.append(41/*')'*/);\n  }\n};\nReconWriter.prototype.writeItem = function(item) {\n  if (item.isField) {\n    this.writeValue(item.key);\n    this.builder.append(58/*':'*/);\n    if (!item.value.isExtant) this.writeValue(item.value);\n  }\n  else this.writeValue(item);\n};\nReconWriter.prototype.writeBlock = function (value) {\n  if (!(value instanceof Record)) this.writeValue(value);\n  else if (value.isMarkup()) this.writeMarkup(value);\n  else {\n    var items = value.iterator();\n    var item;\n    var hasAttrs = false;\n    while (!items.isEmpty() && (item = items.head(), item.isAttr)) {\n      this.writeAttr(item);\n      items.step();\n      hasAttrs = true;\n    }\n    if (!items.isEmpty()) {\n      if (hasAttrs) this.builder.append(123/*'{'*/);\n      this.writeItem(items.head());\n      items.step();\n      while (!items.isEmpty()) {\n        this.builder.append(44/*','*/);\n        this.writeItem(items.head());\n        items.step();\n      }\n      if (hasAttrs) this.builder.append(125/*'}'*/);\n    }\n    else if (!hasAttrs) {\n      this.builder.append(123/*'{'*/);\n      this.builder.append(125/*'}'*/);\n    }\n  }\n};\nReconWriter.prototype.writeRecord = function (record, inMarkup) {\n  if (record.isMarkup()) this.writeMarkup(record);\n  else {\n    var items = record.iterator();\n    var item;\n    var hasAttrs = false;\n    while (!items.isEmpty() && (item = items.head(), item.isAttr)) {\n      this.writeAttr(item);\n      items.step();\n      hasAttrs = true;\n    }\n    if (!items.isEmpty()) {\n      items.step();\n      if (hasAttrs && items.isEmpty()) {\n        if (inMarkup) {\n          if (item instanceof Record || typeof item === 'string') this.writeValue(item, inMarkup);\n          else {\n            this.builder.append(123/*'{'*/);\n            this.writeValue(item);\n            this.builder.append(125/*'}'*/);\n          }\n        }\n        else if (item.isSlot) {\n          this.builder.append(123/*'{'*/);\n          this.writeValue(item);\n          this.builder.append(125/*'}'*/);\n        }\n        else if (typeof item === 'string') this.writeString(item);\n        else this.writeValue(item);\n      }\n      else {\n        this.builder.append(123/*'{'*/);\n        this.writeItem(item);\n        while (!items.isEmpty()) {\n          item = items.head();\n          this.builder.append(44/*','*/);\n          this.writeItem(item);\n          items.step();\n        }\n        this.builder.append(125/*'}'*/);\n      }\n    }\n    else if (!hasAttrs) {\n      this.builder.append(123/*'{'*/);\n      this.builder.append(125/*'}'*/);\n    }\n  }\n};\nReconWriter.prototype.writeMarkup = function (record) {\n  var items = record.iterator();\n  var item;\n  var hasAttrs = false;\n  while (!items.isEmpty() && (item = items.head(), item.isAttr)) {\n    this.writeAttr(item);\n    items.step();\n    hasAttrs = true;\n  }\n  this.builder.append(91/*'['*/);\n  while (!items.isEmpty()) {\n    item = items.head();\n    if (typeof item === 'string') {\n      var cs = new StringIterator(item);\n      while (!cs.isEmpty()) {\n        var c = cs.head();\n        switch (c) {\n          case 64/*'@'*/:\n          case 91/*'['*/:\n          case 92/*'\\\\'*/:\n          case 93/*']'*/:\n          case 123/*'{'*/:\n          case 125/*'}'*/: this.builder.append(92/*'\\\\'*/); this.builder.append(c); break;\n          default: this.builder.append(c);\n        }\n        cs.step();\n      }\n    }\n    else if (item instanceof Record) this.writeRecord(item, true);\n    else {\n      this.builder.append(123/*'{'*/);\n      this.writeItem(item);\n      this.builder.append(125/*'}'*/);\n    }\n    items.step();\n  }\n  this.builder.append(93/*']'*/);\n};\nReconWriter.prototype.writeText = function (text, inMarkup) {\n  function isIdent() {\n    var cs = new StringIterator(text);\n    if (cs.isEmpty() || !isNameStartChar(cs.head())) return false;\n    cs.step();\n    while (!cs.isEmpty() && isNameChar(cs.head())) cs.step();\n    return cs.isEmpty();\n  }\n  if (inMarkup) this.writeTextMarkup(text);\n  else if (isIdent()) this.writeIdent(text);\n  else this.writeString(text);\n};\nReconWriter.prototype.writeString = function (string) {\n  var cs = new StringIterator(string);\n  this.builder.append(34/*'\"'*/);\n  while (!cs.isEmpty()) {\n    var c = cs.head();\n    switch (c) {\n      case 34/*'\"'*/:\n      case 92/*'\\\\'*/: this.builder.append(92/*'\\\\'*/); this.builder.append(c); break;\n      case 8/*'\\b'*/: this.builder.append(92/*'\\\\'*/); this.builder.append(98/*'b'*/); break;\n      case 12/*'\\f'*/: this.builder.append(92/*'\\\\'*/); this.builder.append(102/*'f'*/); break;\n      case 10/*'\\n'*/: this.builder.append(92/*'\\\\'*/); this.builder.append(110/*'n'*/); break;\n      case 13/*'\\r'*/: this.builder.append(92/*'\\\\'*/); this.builder.append(114/*'r'*/); break;\n      case 9/*'\\t'*/: this.builder.append(92/*'\\\\'*/); this.builder.append(116/*'t'*/); break;\n      default: this.builder.append(c);\n    }\n    cs.step();\n  }\n  this.builder.append(34/*'\"'*/);\n};\nReconWriter.prototype.writeIdent = function (ident) {\n  this.builder.appendString(ident);\n};\nReconWriter.prototype.writeTextMarkup = function (text) {\n  var cs = new StringIterator(text);\n  this.builder.append(91/*'['*/);\n  while (!cs.isEmpty()) {\n    var c = cs.head();\n    switch (c) {\n      case 64/*'@'*/:\n      case 91/*'['*/:\n      case 92/*'\\\\'*/:\n      case 93/*']'*/:\n      case 123/*'{'*/:\n      case 125/*'}'*/: this.builder.append(92/*'\\\\'*/); this.builder.append(c); break;\n      default: this.builder.append(c);\n    }\n    cs.step();\n  }\n  this.builder.append(93/*']'*/);\n};\nReconWriter.prototype.writeNumber = function (number) {\n  this.builder.appendString(number.toString());\n};\nReconWriter.prototype.writeData = function (data) {\n  function encodeBase64Digit(x) {\n    if      (x >=  0 && x < 26) return x + 65/*'A'*/;\n    else if (x >= 26 && x < 52) return x + 71/*('a' - 26)*/;\n    else if (x >= 52 && x < 62) return x - 4/*-('0' - 52)*/;\n    else if (x === 62) return 43/*'+'*/;\n    else if (x === 63) return 47/*'/'*/;\n  }\n  this.builder.append(37/*'%'*/);\n  var i = 0;\n  var n = data.length;\n  var x, y, z;\n  while (i + 2 < n) {\n    x = data[i];\n    y = data[i + 1];\n    z = data[i + 2];\n    this.builder.append(encodeBase64Digit(x >>> 2));\n    this.builder.append(encodeBase64Digit(((x << 4) | (y >>> 4)) & 0x3F));\n    this.builder.append(encodeBase64Digit(((y << 2) | (z >>> 6)) & 0x3F));\n    this.builder.append(encodeBase64Digit(z & 0x3F));\n    i += 3;\n  }\n  if (i + 1 < n) {\n    x = data[i];\n    y = data[i + 1];\n    this.builder.append(encodeBase64Digit(x >>> 2));\n    this.builder.append(encodeBase64Digit(((x << 4) | (y >>> 4)) & 0x3F));\n    this.builder.append(encodeBase64Digit((y << 2) & 0x3F));\n    this.builder.append(61/*'='*/);\n    i += 2;\n  }\n  else if (i < n) {\n    x = data[i];\n    this.builder.append(encodeBase64Digit(x >>> 2));\n    this.builder.append(encodeBase64Digit((x << 4) & 0x3F));\n    this.builder.append(61/*'='*/);\n    this.builder.append(61/*'='*/);\n    i += 1;\n  }\n};\nReconWriter.prototype.state = function () {\n  return this.builder.state();\n};\n\n\nmodule.exports = function (value) {\n  return coerce(value);\n};\nexports = module.exports;\nexports.parse = parse;\nexports.stringify = stringify;\nexports.objectify = objectify;\nexports.Field = Field;\nexports.Attr = Attr;\nexports.Slot = Slot;\nexports.Record = Record;\nexports.Extant = Extant;\nexports.Absent = Absent;\nexports.RecordBuilder = RecordBuilder;\nexports.ValueBuilder = ValueBuilder;\n\n},{}]},{},[1])(1)\n});"],"sourceRoot":"/source/"}