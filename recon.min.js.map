{"version":3,"sources":["recon.min.js"],"names":["f","exports","module","define","amd","g","window","global","self","this","recon","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length",1,"coerce","value","Extant","Record","Uint8Array","isExtant","isAbsent","Array","isArray","coerceArray","toRecon","coerceObject","Absent","array","builder","RecordBuilder","appendValue","state","object","prop","key","attrs","appendField","Attr","Slot","parse","string","input","StringIterator","result","DocumentParser","run","stringify","writer","ReconWriter","writeBlock","objectify","undefined","objectifyArray","objectifyObject","record","items","iterator","isEmpty","head","push","step","@","hasAttrs","item","isField","isAttr","compare","x","y","equals","index","__proto__","prototype","Object","defineProperty","Field","enumerable","RecordIterator","writable","ValueBuilder","StringIteratee","StringBuilder","DataBuilder","isSpace","c","isNewline","isWhitespace","isNameStartChar","isNameChar","isBase64Char","BlockParser","AttrParser","ident","IdentParser","BlockValueParser","field","InlineValueParser","RecordParser","MarkupParser","text","StringParser","DataParser","data","NumberParser","create","Function","constructor","get","size","getOwnPropertyNames","isMarkup","isBlank","cs","afterNonText","hasNonText","sections","each","these","next","that","those","toString","writeRecord","empty","isSlot","Data","fromBase64","appendBase64Char","attr","slot","isDone","c1","charCodeAt","c2","Done","isCont","isError","feed","error","unexpectedEOF","append","String","fromCharCode","appendString","prepare","expand","base","Math","max","aliased","buffer","set","appendByte","offset","decodeBase64Digit","decodeBase64Quantum","p","q","z","w","subarray","found","expected","Number","writeValue","inMarkup","writeText","writeNumber","writeBool","writeData","writeAttr","writeIdent","writeItem","writeMarkup","isIdent","writeTextMarkup","writeString","number","bool","encodeBase64Digit"],"mappings":"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","file":"recon.min.js","sourcesContent":["(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.recon = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\nfunction coerce(value) {\n  if (value === null) return Extant;\n  else if (value instanceof Record ||\n           typeof value === 'string' ||\n           typeof value === 'number' ||\n           typeof value === 'boolean' ||\n           value instanceof Uint8Array ||\n           value.isExtant ||\n           value.isAbsent) return value;\n  else if (Array.isArray(value)) return coerceArray(value);\n  else if (typeof value === 'object') {\n    if (value.toRecon && typeof value.toRecon === 'function') return value.toRecon();\n    else return coerceObject(value);\n  }\n  else return Absent;\n}\nfunction coerceArray(array) {\n  var builder = new RecordBuilder();\n  var n = array.length;\n  var i = 0;\n  while (i < n) {\n    var value = coerce(array[i]);\n    builder.appendValue(value);\n    i += 1;\n  }\n  return builder.state();\n}\nfunction coerceObject(object) {\n  var builder = new RecordBuilder();\n  var prop, key, value;\n  var attrs = object['@'];\n  for (prop in attrs) {\n    key = coerce(prop);\n    if (typeof key === 'string') {\n      value = coerce(attrs[prop]);\n      if (!value.isAbsent) builder.appendField(new Attr(key, value));\n    }\n  }\n  for (prop in object) {\n    if (prop !== '@') {\n      key = coerce(prop);\n      if (!key.isAbsent) {\n        value = coerce(object[prop]);\n        if (!value.isAbsent) builder.appendField(new Slot(key, value));\n      }\n    }\n  }\n  return builder.state();\n}\n\nfunction parse(string) {\n  var input = new StringIterator(string);\n  var result = new DocumentParser().run(input);\n  return result.state();\n}\n\nfunction stringify(value) {\n  var writer = new ReconWriter();\n  writer.writeBlock(value);\n  return writer.state();\n}\n\nfunction objectify(value) {\n  if (value === null || value.isExtant) return null;\n  else if (value.isAbsent) return undefined;\n  else if (value instanceof Record) {\n    if (value.isArray()) return objectifyArray(value);\n    else return objectifyObject(value);\n  }\n  else return value;\n}\nfunction objectifyArray(record) {\n  var array = [];\n  var items = record.iterator();\n  while (!items.isEmpty()) {\n    var value = objectify(items.head());\n    array.push(value);\n    items.step();\n  }\n  return array;\n}\nfunction objectifyObject(record) {\n  var items = record.iterator();\n  var key, value;\n  var attrs = {};\n  var object = {'@': attrs};\n  var hasAttrs = false;\n  var i = 0;\n  while (!items.isEmpty()) {\n    var item = items.head();\n    if (item.isField) {\n      key = objectify(item.key);\n      value = objectify(item.value);\n      if (item.isAttr) {\n        attrs[key] = value;\n        hasAttrs = true;\n      }\n      else object[key] = value;\n    }\n    else {\n      value = objectify(item.value);\n      object[i] = value;\n    }\n    items.step();\n    i += 1;\n  }\n  if (!hasAttrs) delete object['@'];\n  return object;\n}\n\nfunction compare(x, y) {\n  if (x === y) return true;\n  if (x instanceof Record && y instanceof Record) return x.equals(y);\n  if (x.isField && y.isField) return x.equals(y);\n  if (x instanceof Uint8Array && y instanceof Uint8Array && x.length === y.length) {\n    var i = 0;\n    var n = x.length;\n    while (i < n && x[i] === y[i]) i += 1;\n    if (i === n) return true;\n  }\n  return false;\n}\n\nfunction builder() {\n  return new RecordBuilder();\n}\n\n\nfunction Record(items, index) {\n  var record = function(key) {\n    var value = this.index[key];\n    if (typeof value === 'undefined' && typeof key === 'number') value = this.items[key];\n    return value;\n  };\n  record.__proto__ = Record.prototype;\n  Object.defineProperty(record, 'items', {value: items});\n  Object.defineProperty(record, 'index', {value: index});\n  return record;\n}\nRecord.prototype = Object.create(Function.prototype);\nRecord.prototype.constructor = Record;\nObject.defineProperty(Record.prototype, 'size', {\n  enumerable: true,\n  get: function () {\n    return this.items.length;\n  }\n});\nRecord.prototype.isEmpty = function () {\n  return this.size === 0;\n};\nRecord.prototype.isArray = function () {\n  return this.items.length >= 0 && Object.getOwnPropertyNames(this.index).length === 0;\n};\nRecord.prototype.isMarkup = function () {\n  function isBlank(string) {\n    var cs = new StringIterator(string);\n    while (!cs.isEmpty() && isSpace(cs.head())) cs.step();\n    return cs.isEmpty();\n  }\n  var items = this.iterator();\n  var afterNonText = false;\n  var hasNonText = false;\n  var sections = 0;\n  while (!items.isEmpty()) {\n    var item = items.head();\n    if (typeof item !== 'string') {\n      if (afterNonText) return false;\n      afterNonText = true;\n      hasNonText = true;\n    }\n    else if (afterNonText && !isBlank(item)) {\n      afterNonText = false;\n      sections += 1;\n    }\n    else if (sections === 0) sections = 1;\n    items.step();\n  }\n  return hasNonText && sections >= 2;\n};\nRecord.prototype.iterator = function () {\n  return new RecordIterator(this.items);\n};\nRecord.prototype.each = function (f) {\n  var these = this.iterator();\n  while (!these.isEmpty) f(these.next());\n};\nRecord.prototype.equals = function (that) {\n  var these = this.iterator();\n  var those = that.iterator();\n  while (!these.isEmpty() && !those.isEmpty()) {\n    if (!compare(these.next(), those.next())) return false;\n  }\n  return these.isEmpty() && those.isEmpty();\n};\nRecord.prototype.toString = function () {\n  var writer = new ReconWriter();\n  writer.writeRecord(this);\n  return writer.state();\n};\nRecord.empty = function () {\n  return new Record([], {});\n};\n\n\nfunction Field() {}\nObject.defineProperty(Field.prototype, 'isField', {enumerable: true, value: true});\nObject.defineProperty(Field.prototype, 'isAttr', {enumerable: true, value: false});\nObject.defineProperty(Field.prototype, 'isSlot', {enumerable: true, value: false});\n\nfunction Attr(key, value) {\n  Field.call(this);\n  Object.defineProperty(this, 'key', {enumerable: true, value: key});\n  if (typeof value === 'undefined') value = Extant;\n  Object.defineProperty(this, 'value', {enumerable: true, value: value});\n}\nAttr.prototype = Object.create(Field.prototype);\nAttr.prototype.constructor = Attr;\nObject.defineProperty(Attr.prototype, 'isAttr', {enumerable: true, value: true});\nAttr.prototype.equals = function (that) {\n  return that.isAttr && compare(this.key, that.key) && compare(this.value, that.value);\n};\n\nfunction Slot(key, value) {\n  Field.call(this);\n  Object.defineProperty(this, 'key', {enumerable: true, value: key});\n  if (typeof value === 'undefined') value = Extant;\n  Object.defineProperty(this, 'value', {enumerable: true, value: value});\n}\nSlot.prototype = Object.create(Field.prototype);\nSlot.prototype.constructor = Slot;\nObject.defineProperty(Slot.prototype, 'isSlot', {enumerable: true, value: true});\nSlot.prototype.equals = function (that) {\n  return that.isSlot && compare(this.key, that.key) && compare(this.value, that.value);\n};\n\n\nvar Data = {};\nData.fromBase64 = function (string) {\n  var data = new DataBuilder();\n  var cs = new StringIterator(string);\n  while (!cs.isEmpty()) {\n    data.appendBase64Char(cs.head());\n    cs.step();\n  }\n  return data.state();\n};\nData.empty = function () {\n  return new Uint8Array(0);\n};\n\n\nvar Extant = {};\nObject.defineProperty(Extant, 'isExtant', {enumerable: true, value: true});\n\nvar Absent = {};\nObject.defineProperty(Absent, 'isAbsent', {enumerable: true, value: true});\n\n\nfunction RecordIterator(items, index) {\n  Object.defineProperty(this, 'items', {value: items});\n  Object.defineProperty(this, 'index', {value: index || 0, writable: true});\n}\nRecordIterator.prototype.isEmpty = function () {\n  return this.index >= this.items.length;\n};\nRecordIterator.prototype.head = function () {\n  if (this.index >= this.items.length) throw 'head of empty iterator';\n  return this.items[this.index];\n};\nRecordIterator.prototype.step = function () {\n  if (this.index >= this.items.length) throw 'empty iterator step';\n  this.index += 1;\n};\nRecordIterator.prototype.next = function () {\n  if (this.index >= this.items.length) return null;\n  var item = this.items[this.index];\n  this.index += 1;\n  return item;\n};\n\n\nfunction RecordBuilder() {\n  Object.defineProperty(this, 'items', {value: []});\n  Object.defineProperty(this, 'index', {value: {}});\n}\nRecordBuilder.prototype.appendField = function (field) {\n  this.items.push(field);\n  this.index[field.key] = field.value;\n};\nRecordBuilder.prototype.appendValue = function (value) {\n  this.items.push(value);\n};\nRecordBuilder.prototype.attr = function (key, value) {\n  if (typeof value === 'undefined') value = Extant;\n  this.appendField(new Attr(coerce(key), coerce(value)));\n  return this;\n};\nRecordBuilder.prototype.slot = function (key, value) {\n  if (typeof value === 'undefined') value = Extant;\n  this.appendField(new Slot(coerce(key), coerce(value)));\n  return this;\n};\nRecordBuilder.prototype.item = function (value) {\n  this.appendValue(coerce(value));\n  return this;\n};\nRecordBuilder.prototype.state = function () {\n  return new Record(this.items, this.index);\n};\n\n\nfunction ValueBuilder() {\n  Object.defineProperty(this, 'items', {value: null, writable: true});\n  Object.defineProperty(this, 'index', {value: null, writable: true});\n  Object.defineProperty(this, 'value', {value: null, writable: true});\n}\nValueBuilder.prototype.appendField = function (field) {\n  if (this.items === null) {\n    this.items = [];\n    this.index = {};\n    if (this.value !== null) {\n      this.items.push(this.value);\n      this.value = null;\n    }\n  }\n  this.items.push(field);\n  this.index[field.key] = field.value;\n};\nValueBuilder.prototype.appendValue = function (value) {\n  if (this.items !== null) this.items.push(value);\n  else if (this.value === null) this.value = value;\n  else {\n    this.items = [];\n    this.index = {};\n    this.items.push(this.value);\n    this.value = null;\n    this.items.push(value);\n  }\n};\nValueBuilder.prototype.state = function () {\n  if (this.value !== null) return this.value;\n  else if (this.items !== null) return new Record(this.items, this.index);\n  else return Absent;\n};\n\n\nfunction StringIterator(string, index) {\n  Object.defineProperty(this, 'string', {value: string || ''});\n  Object.defineProperty(this, 'index', {value: index || 0, writable: true});\n}\nStringIterator.prototype.isDone = function () {\n  return false;\n};\nStringIterator.prototype.isEmpty = function () {\n  return this.index >= this.string.length;\n};\nStringIterator.prototype.head = function () {\n  var c1 = this.string.charCodeAt(this.index);\n  if (c1 <= 0xD7FF || c1 >= 0xE000) return c1; // U+0000..U+D7FF | U+E000..U+FFFF\n  else if (c1 <= 0xDBFF && this.index + 1 < this.string.length) { // c1 >= 0xD800\n    var c2 = this.string.charCodeAt(this.index + 1);\n    if (c2 >= 0xDC00 && c2 <= 0xDFFF) // U+10000..U+10FFFF\n      return (((c1 & 0x3FF) << 10) | (c2 & 0x3FF)) + 0x10000;\n    else return 0xFFFD;\n  }\n  else return 0xFFFD;\n};\nStringIterator.prototype.step = function () {\n  var c1 = this.string.charCodeAt(this.index);\n  if (c1 <= 0xD7FF || c1 >= 0xE000) // U+0000..U+D7FF | U+E000..U+FFFF\n    this.index += 1;\n  else if (c1 <= 0xDBFF && this.index + 1 < this.string.length) { // c1 >= 0xD800\n    var c2 = this.string.charCodeAt(this.index + 1);\n    if (c2 >= 0xDC00 && c2 <= 0xDFFF) // U+10000..U+10FFFF\n      this.index += 2;\n    else this.index += 1;\n  }\n  else this.index += 1;\n};\n\nStringIterator.Done = {\n  isDone: function () {\n    return true;\n  },\n  isEmpty: function () {\n    return true;\n  },\n  head: function () {\n    throw 'head of empty iterator';\n  },\n  step: function () {\n    throw 'empty iterator step';\n  }\n};\nStringIterator.Done.prototype = Object.create(StringIterator.prototype);\n\n\nfunction StringIteratee() {}\nStringIteratee.prototype.isCont = function () {\n  return true;\n};\nStringIteratee.prototype.isDone = function () {\n  return false;\n};\nStringIteratee.prototype.isError = function () {\n  return false;\n};\nStringIteratee.prototype.feed = function (input) {\n  return this;\n};\nStringIteratee.prototype.run = function (input) {\n  var next = this;\n  while (!input.isEmpty() && next.isCont()) next = next.feed(input);\n  if (input.isEmpty() && !input.isDone() && next.isCont()) next = next.feed(StringIterator.Done);\n  return next;\n};\n\nStringIteratee.Done = function (value) {\n  StringIteratee.call(this);\n  this.value = value;\n};\nStringIteratee.Done.prototype = Object.create(StringIteratee.prototype);\nStringIteratee.Done.prototype.constructor = StringIteratee.Done;\nStringIteratee.Done.prototype.isCont = function () {\n  return false;\n};\nStringIteratee.Done.prototype.isDone = function () {\n  return true;\n};\nStringIteratee.Done.prototype.feed = function (input) {\n  return this;\n};\nStringIteratee.Done.prototype.state = function () {\n  return this.value;\n};\n\nStringIteratee.Error = function (error) {\n  StringIteratee.call(this);\n  this.error = error;\n};\nStringIteratee.Error.prototype = Object.create(StringIteratee.prototype);\nStringIteratee.Error.prototype.constructor = StringIteratee.Error;\nStringIteratee.Error.prototype.isCont = function () {\n  return false;\n};\nStringIteratee.Error.prototype.isError = function () {\n  return true;\n};\nStringIteratee.Error.prototype.feed = function (input) {\n  return this;\n};\nStringIteratee.Error.prototype.state = function () {\n  throw this.error;\n};\n\nStringIteratee.unexpectedEOF = new StringIteratee.Error('unexpected end of input');\n\n\nfunction StringBuilder() {\n  Object.defineProperty(this, 'string', {value: '', writable: true});\n}\nStringBuilder.prototype.append = function (c) {\n  if ((c >= 0x0000 && c <= 0xD7FF) ||\n      (c >= 0xE000 && c <= 0xFFFF)) { // U+0000..U+D7FF | U+E000..U+FFFF\n    this.string += String.fromCharCode(c);\n  }\n  else if (c >= 0x10000 && c <= 0x10FFFF) { // U+10000..U+10FFFF\n    var u = c - 0x10000;\n    this.string += String.fromCharCode(0xD800 | (u >>> 10), 0xDC00 | (u & 0x3FF));\n  }\n  else { // invalid code point\n    this.string += String.fromCharCode(0xFFFD);\n  }\n};\nStringBuilder.prototype.appendString = function (s) {\n  var cs = new StringIterator(s);\n  while (!cs.isEmpty()) {\n    this.append(cs.head());\n    cs.step();\n  }\n};\nStringBuilder.prototype.state = function () {\n  return this.string;\n};\n\n\nfunction DataBuilder() {\n  Object.defineProperty(this, 'buffer', {value: null, writable: true});\n  Object.defineProperty(this, 'offset', {value: 0, writable: true});\n  Object.defineProperty(this, 'aliased', {value: true, writable: true});\n  Object.defineProperty(this, 'p', {value: 0, writable: true});\n  Object.defineProperty(this, 'q', {value: 0, writable: true});\n  Object.defineProperty(this, 'r', {value: 0, writable: true});\n  Object.defineProperty(this, 's', {value: 0, writable: true});\n}\nDataBuilder.prototype.prepare = function (size) {\n  function expand(base, size) {\n    var n = Math.max(base, size) - 1;\n    n |= n >> 1; n |= n >> 2; n |= n >> 4; n |= n >> 8;\n    return n + 1;\n  }\n  if (this.aliased || size > this.buffer.length) {\n    var array = new Uint8Array(expand(256, size));\n    if (this.buffer) array.set(this.buffer);\n    this.buffer = array;\n    this.aliased = false;\n  }\n};\nDataBuilder.prototype.appendByte = function (value) {\n  this.prepare(this.offset + 1);\n  this.buffer[this.offset] = value;\n  this.offset += 1;\n};\nDataBuilder.prototype.decodeBase64Digit = function (c) {\n  if (c >= 65/*'A'*/ && c <= 90/*'Z'*/) return c - 65/*'A'*/;\n  else if (c >= 97/*'a'*/ && c <= 122/*'z'*/) return c - 71/*'a' - 26*/;\n  else if (c >= 48/*'0'*/ && c <= 57/*'9'*/) return c + 4/*52 - '0'*/;\n  else if (c === 43/*'+'*/ || c === 45/*'-'*/) return 62;\n  else if (c === 47/*'/'*/ || c === 95/*'_'*/) return 63;\n};\nDataBuilder.prototype.decodeBase64Quantum = function () {\n  var x = this.decodeBase64Digit(this.p);\n  var y = this.decodeBase64Digit(this.q);\n  if (this.r !== 61/*'='*/) {\n    var z = this.decodeBase64Digit(this.r);\n    if (this.s !== 61/*'='*/) {\n      var w = this.decodeBase64Digit(this.s);\n      this.appendByte((x << 2) | (y >>> 4));\n      this.appendByte((y << 4) | (z >>> 2));\n      this.appendByte((z << 6) | w);\n    }\n    else {\n      this.appendByte((x << 2) | (y >>> 4));\n      this.appendByte((y << 4) | (z >>> 2));\n    }\n  }\n  else {\n    if (this.s !== 61/*'='*/) throw 'incomplete base64 quantum';\n    this.appendByte((x << 2) | (y >>> 4));\n  }\n};\nDataBuilder.prototype.appendBase64Char = function (c) {\n  if (this.p === 0) this.p = c;\n  else if (this.q === 0) this.q = c;\n  else if (this.r === 0) this.r = c;\n  else {\n    this.s = c;\n    this.decodeBase64Quantum();\n    this.s = 0;\n    this.r = 0;\n    this.q = 0;\n    this.p = 0;\n  }\n};\nDataBuilder.prototype.state = function (value) {\n  if (!this.buffer) this.buffer = new Uint8Array(0);\n  else if (this.buffer.length !== this.offset) {\n    var array = new Uint8Array(this.offset);\n    array.set(this.buffer.subarray(0, this.offset));\n    this.buffer = array;\n  }\n  this.aliased = true;\n  return this.buffer;\n};\n\n\nfunction isSpace(c) {\n  return c === 0x20 || c === 0x9;\n}\nfunction isNewline(c) {\n  return c === 0xA || c === 0xD;\n}\nfunction isWhitespace(c) {\n  return isSpace(c) || isNewline(c);\n}\nfunction isNameStartChar(c) {\n  return (\n    c >= 65/*'A'*/ && c <= 90/*'Z'*/ ||\n    c === 95/*'_'*/ ||\n    c >= 97/*'a'*/ && c <= 122/*'z'*/ ||\n    c >= 0xC0 && c <= 0xD6 ||\n    c >= 0xD8 && c <= 0xF6 ||\n    c >= 0xF8 && c <= 0x2FF ||\n    c >= 0x370 && c <= 0x37D ||\n    c >= 0x37F && c <= 0x1FFF ||\n    c >= 0x200C && c <= 0x200D ||\n    c >= 0x2070 && c <= 0x218F ||\n    c >= 0x2C00 && c <= 0x2FEF ||\n    c >= 0x3001 && c <= 0xD7FF ||\n    c >= 0xF900 && c <= 0xFDCF ||\n    c >= 0xFDF0 && c <= 0xFFFD ||\n    c >= 0x10000 && c <= 0xEFFFF);\n}\nfunction isNameChar(c) {\n  return (\n    c === 45/*'-'*/ ||\n    c >= 48/*'0'*/ && c <= 57/*'9'*/ ||\n    c >= 65/*'A'*/ && c <= 90/*'Z'*/ ||\n    c === 95/*'_'*/ ||\n    c >= 97/*'a'*/ && c <= 122/*'z'*/ ||\n    c === 0xB7 ||\n    c >= 0xC0 && c <= 0xD6 ||\n    c >= 0xD8 && c <= 0xF6 ||\n    c >= 0xF8 && c <= 0x37D ||\n    c >= 0x37F && c <= 0x1FFF ||\n    c >= 0x200C && c <= 0x200D ||\n    c >= 0x203F && c <= 0x2040 ||\n    c >= 0x2070 && c <= 0x218F ||\n    c >= 0x2C00 && c <= 0x2FEF ||\n    c >= 0x3001 && c <= 0xD7FF ||\n    c >= 0xF900 && c <= 0xFDCF ||\n    c >= 0xFDF0 && c <= 0xFFFD ||\n    c >= 0x10000 && c <= 0xEFFFF);\n}\nfunction isBase64Char(c) {\n  return (\n    c >= 48/*'0'*/ && c <= 57/*'9'*/ ||\n    c >= 65/*'A'*/ && c <= 90/*'Z'*/ ||\n    c >= 97/*'a'*/ && c <= 122/*'z'*/ ||\n    c === 43/*'+'*/ || c === 45/*'-'*/ ||\n    c === 47/*'/'*/ || c === 95/*'_'*/);\n}\n\n\nfunction DocumentParser(value) {\n  StringIteratee.call(this);\n  this.value = value || new BlockParser();\n}\nDocumentParser.prototype = Object.create(StringIteratee.prototype);\nDocumentParser.prototype.constructor = DocumentParser;\nDocumentParser.prototype.feed = function (input) {\n  var value = this.value;\n  while ((!input.isEmpty() || input.isDone()) && value.isCont()) value = value.feed(input);\n  if (value.isError()) return value;\n  if (value.isDone()) {\n    if (!input.isEmpty()) return new StringIteratee.Error({found: input.head()});\n    else if (input.isDone()) return value;\n  }\n  return new DocumentParser(value);\n};\n\n\nfunction BlockParser(builder, key, value, s) {\n  StringIteratee.call(this);\n  this.builder = builder || null;\n  this.key = key || null;\n  this.value = value || null;\n  this.s = s || 1;\n}\nBlockParser.prototype = Object.create(StringIteratee.prototype);\nBlockParser.prototype.constructor = BlockParser;\nBlockParser.prototype.feed = function (input) {\n  var c = 0;\n  var s = this.s;\n  var value = this.value;\n  var key = this.key;\n  var builder = this.builder || new ValueBuilder();\n  while (!input.isEmpty() || input.isDone()) {\n    if (s === 1) {\n      while (!input.isEmpty() && (c = input.head(), isWhitespace(c))) input.step();\n      if (!input.isEmpty()) s = 2;\n      else if (input.isDone()) return new StringIteratee.Done(builder.state());\n    }\n    if (s === 2) {\n      key = key || new BlockValueParser();\n      while ((!input.isEmpty() || input.isDone()) && key.isCont()) key = key.feed(input);\n      if (key.isDone()) s = 3;\n      else if (key.isError()) return key;\n    }\n    if (s === 3) {\n      while (!input.isEmpty() && (c = input.head(), isSpace(c))) input.step();\n      if (!input.isEmpty()) {\n        if (c === 58/*':'*/) {\n          input.step();\n          s = 4;\n        }\n        else {\n          builder.appendValue(key.state());\n          key = null;\n          s = 6;\n        }\n      }\n      else if (input.isDone()) {\n        builder.appendValue(key.state());\n        return new StringIteratee.Done(builder.state());\n      }\n    }\n    if (s === 4) {\n      while (!input.isEmpty() && isSpace(input.head())) input.step();\n      if (!input.isEmpty()) s = 5;\n      else if (input.isDone()) {\n        builder.appendField(new Slot(key.state()));\n        return new StringIteratee.Done(builder.state());\n      }\n    }\n    if (s === 5) {\n      value = value || new BlockValueParser();\n      while ((!input.isEmpty() || input.isDone()) && value.isCont()) value = value.feed(input);\n      if (value.isDone()) {\n        builder.appendField(new Slot(key.state(), value.state()));\n        key = null;\n        value = null;\n        s = 6;\n      }\n      else if (value.isError()) return value;\n    }\n    if (s === 6) {\n      while (!input.isEmpty() && (c = input.head(), isSpace(c))) input.step();\n      if (!input.isEmpty()) {\n        if (c === 44/*','*/ || c === 59/*';'*/ || isNewline(c)) {\n          input.step();\n          s = 1;\n        }\n        else return new StringIteratee.Done(builder.state());\n      }\n      else if (input.isDone()) return new StringIteratee.Done(builder.state());\n    }\n  }\n  return new BlockParser(builder, key, value, s);\n};\n\n\nfunction AttrParser(ident, value, s) {\n  StringIteratee.call(this);\n  this.ident = ident || new IdentParser();\n  this.value = value || new BlockParser();\n  this.s = s || 1;\n}\nAttrParser.prototype = Object.create(StringIteratee.prototype);\nAttrParser.prototype.constructor = AttrParser;\nAttrParser.prototype.feed = function (input) {\n  var c = 0;\n  var s = this.s;\n  var value = this.value;\n  var ident = this.ident;\n  if (s === 1) {\n    if (!input.isEmpty() && (c = input.head(), c === 64/*'@'*/)) {\n      input.step();\n      s = 2;\n    }\n    else if (!input.isEmpty()) return new StringIteratee.Error({expected: '\\'@\\'', found: c});\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  if (s === 2) {\n    ident = ident.feed(input);\n    if (ident.isDone()) s = 3;\n    else if (ident.isError()) return ident;\n  }\n  if (s === 3) {\n    if (!input.isEmpty() && input.head() === 40/*'('*/) {\n      input.step();\n      s = 4;\n    }\n    else if (!input.isEmpty() || input.isDone()) return new StringIteratee.Done(new Attr(ident.state()));\n  }\n  if (s === 4) {\n    while (!input.isEmpty() && (c = input.head(), isWhitespace(c))) input.step();\n    if (!input.isEmpty()) {\n      if (c === 41/*')'*/) {\n        input.step();\n        return new StringIteratee.Done(new Attr(ident.state()));\n      }\n      else s = 5;\n    }\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  if (s === 5) {\n    while ((!input.isEmpty() || input.isDone()) && value.isCont()) value = value.feed(input);\n    if (value.isDone()) s = 6;\n    else if (value.isError()) return value;\n  }\n  if (s === 6) {\n    while (!input.isEmpty() && (c = input.head(), isWhitespace(c))) input.step();\n    if (!input.isEmpty()) {\n      if (c === 41/*')'*/) {\n        input.step();\n        return new StringIteratee.Done(new Attr(ident.state(), value.state()));\n      }\n      else return new StringIteratee.Error({expected: '\\')\\'', found: c});\n    }\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  return new AttrParser(ident, value, s);\n};\n\n\nfunction BlockValueParser(builder, field, value, s) {\n  StringIteratee.call(this);\n  this.builder = builder || null;\n  this.field = field || null;\n  this.value = value || null;\n  this.s = s || 1;\n}\nBlockValueParser.prototype = Object.create(StringIteratee.prototype);\nBlockValueParser.prototype.constructor = BlockValueParser;\nBlockValueParser.prototype.feed = function (input) {\n  var c = 0;\n  var s = this.s;\n  var value = this.value;\n  var field = this.field;\n  var builder = this.builder;\n  while (!input.isEmpty() || input.isDone()) {\n    if (s === 1) {\n      if (!input.isEmpty()) {\n        c = input.head();\n        if (c === 64/*'@'*/) {\n          field = new AttrParser();\n          s = 2;\n        }\n        else if (c === 123/*'{'*/) {\n          if (builder) {\n            value = new RecordParser(builder);\n            s = 5;\n          }\n          else {\n            value = new RecordParser();\n            s = 4;\n          }\n        }\n        else if (c === 91/*'['*/) {\n          if (builder) {\n            value = new MarkupParser(builder);\n            s = 5;\n          }\n          else {\n            value = new MarkupParser();\n            s = 4;\n          }\n        }\n        else if (c === 34/*'\"'*/) {\n          value = new StringParser();\n          s = 4;\n        }\n        else if (c === 37/*'%'*/) {\n          value = new DataParser();\n          s = 4;\n        }\n        else if (c === 45/*'-'*/ || c >= 48/*'0'*/ && c <= 57/*'9'*/) {\n          value = new NumberParser();\n          s = 4;\n        }\n        else if (isNameStartChar(c)) {\n          value = new IdentParser();\n          s = 4;\n        }\n        else if (!builder) return new StringIteratee.Done(Absent);\n        else return new StringIteratee.Done(builder.state());\n      }\n      else if (input.isDone()) {\n        if (!builder) return new StringIteratee.Done(Absent);\n        else return new StringIteratee.Done(builder.state());\n      }\n    }\n    if (s === 2) {\n      while ((!input.isEmpty() || input.isDone()) && field.isCont()) field = field.feed(input);\n      if (field.isDone()) {\n        builder = builder || new ValueBuilder();\n        builder.appendField(field.state());\n        field = null;\n        s = 3;\n      }\n      else if (field.isError()) return field;\n    }\n    if (s === 3) {\n      while (!input.isEmpty() && isSpace(input.head())) input.step();\n      if (!input.isEmpty()) s = 1;\n      else if (input.isDone()) return new StringIteratee.Done(builder.state());\n    }\n    if (s === 4) {\n      while ((!input.isEmpty() || input.isDone()) && value.isCont()) value = value.feed(input);\n      if (value.isDone()) {\n        builder = builder || new ValueBuilder();\n        builder.appendValue(value.state());\n        return new StringIteratee.Done(builder.state());\n      }\n      else if (value.isError()) return value;\n    }\n    if (s === 5) {\n      while ((!input.isEmpty() || input.isDone()) && value.isCont()) value = value.feed(input);\n      if (value.isDone() || value.isError()) return value;\n    }\n  }\n  return new BlockValueParser(builder, field, value, s);\n};\n\n\nfunction InlineValueParser(builder, field, value, s) {\n  StringIteratee.call(this);\n  this.builder = builder || null;\n  this.field = field || null;\n  this.value = value || null;\n  this.s = s || 1;\n}\nInlineValueParser.prototype = Object.create(StringIteratee.prototype);\nInlineValueParser.prototype.constructor = InlineValueParser;\nInlineValueParser.prototype.feed = function (input) {\n  var c = 0;\n  var s = this.s;\n  var value = this.value;\n  var field = this.field;\n  var builder = this.builder;\n  while (!input.isEmpty() || input.isDone()) {\n    if (s === 1) {\n      if (!input.isEmpty()) {\n        c = input.head();\n        if (c === 64/*'@'*/) {\n          field = new AttrParser();\n          s = 2;\n        }\n        else if (c === 123/*'{'*/) {\n          if (builder) {\n            value = new RecordParser(builder);\n            s = 5;\n          }\n          else {\n            value = new RecordParser();\n            s = 4;\n          }\n        }\n        else if (c === 91/*'['*/) {\n          if (builder) {\n            value = new MarkupParser(builder);\n            s = 5;\n          }\n          else {\n            value = new MarkupParser();\n            s = 4;\n          }\n        }\n        else if (!builder) return new StringIteratee.Done(Absent);\n        else return new StringIteratee.Done(builder.state());\n      }\n      else if (input.isDone()) {\n        if (!builder) return new StringIteratee.Done(Absent);\n        else return new StringIteratee.Done(builder.state());\n      }\n    }\n    if (s === 2) {\n      while ((!input.isEmpty() || input.isDone()) && field.isCont()) field = field.feed(input);\n      if (field.isDone()) {\n        builder = builder || new ValueBuilder();\n        builder.appendField(field.state());\n        field = null;\n        s = 3;\n      }\n      else if (field.isError()) return field;\n    }\n    if (s === 3) {\n      while (!input.isEmpty() && isSpace(input.head())) input.step();\n      if (!input.isEmpty()) s = 1;\n      else if (input.isDone()) return new StringIteratee.Done(builder.state());\n    }\n    if (s === 4) {\n      while ((!input.isEmpty() || input.isDone()) && value.isCont()) value = value.feed(input);\n      if (value.isDone()) {\n        builder = builder || new ValueBuilder();\n        builder.appendValue(value.state());\n        return new StringIteratee.Done(builder.state());\n      }\n      else if (value.isError()) return value;\n    }\n    if (s === 5) {\n      while ((!input.isEmpty() || input.isDone()) && value.isCont()) value = value.feed(input);\n      if (value.isDone()) return new StringIteratee.Done(builder.state());\n      else if (value.isError()) return value;\n    }\n  }\n  return new InlineValueParser(builder, field, value, s);\n};\n\n\nfunction RecordParser(builder, key, value, s) {\n  StringIteratee.call(this);\n  this.builder = builder || null;\n  this.key = key || null;\n  this.value = value || null;\n  this.s = s || 1;\n}\nRecordParser.prototype = Object.create(StringIteratee.prototype);\nRecordParser.prototype.constructor = RecordParser;\nRecordParser.prototype.feed = function (input) {\n  var c = 0;\n  var s = this.s;\n  var value = this.value;\n  var key = this.key;\n  var builder = this.builder || new RecordBuilder();\n  if (s === 1) {\n    if (!input.isEmpty()) {\n      c = input.head();\n      if (c === 123/*'{'*/) {\n        input.step();\n        s = 2;\n      }\n      else return new StringIteratee.Error({expected: '\\'{\\'', found: c});\n    }\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  while (!input.isEmpty() || input.isDone()) {\n    if (s === 2) {\n      while (!input.isEmpty() && (c = input.head(), isWhitespace(c))) input.step();\n      if (!input.isEmpty()) {\n        if (c === 125/*'}'*/) {\n          input.step();\n          return new StringIteratee.Done(builder.state());\n        }\n        else s = 3;\n      }\n      else if (input.isDone()) return StringIteratee.unexpectedEOF;\n    }\n    if (s === 3) {\n      key = key || new BlockValueParser();\n      while ((!input.isEmpty() || input.isDone()) && key.isCont()) key = key.feed(input);\n      if (key.isDone()) s = 4;\n      else if (key.isError()) return key;\n    }\n    if (s === 4) {\n      while (!input.isEmpty() && (c = input.head(), isSpace(c))) input.step();\n      if (!input.isEmpty()) {\n        if (c === 58/*':'*/) {\n          input.step();\n          s = 5;\n        }\n        else {\n          builder.appendValue(key.state());\n          key = null;\n          s = 7;\n        }\n      }\n      else if (input.isDone()) {\n        builder.appendValue(key.state());\n        return new StringIteratee.Done(builder.state());\n      }\n    }\n    if (s === 5) {\n      while (!input.isEmpty() && isSpace(input.head())) input.step();\n      if (!input.isEmpty()) s = 6;\n      else if (input.isDone()) {\n        builder.appendField(new Slot(key.state()));\n        return new StringIteratee.Done(builder.state());\n      }\n    }\n    if (s === 6) {\n      value = value || new BlockValueParser();\n      while ((!input.isEmpty() || input.isDone()) && value.isCont()) value = value.feed(input);\n      if (value.isDone()) {\n        builder.appendField(new Slot(key.state(), value.state()));\n        key = null;\n        value = null;\n        s = 7;\n      }\n      else if (value.isError()) return value;\n    }\n    if (s === 7) {\n      while (!input.isEmpty() && (c = input.head(), isSpace(c))) input.step();\n      if (!input.isEmpty()) {\n        if (c === 44/*','*/ || c === 59/*';'*/ || isNewline(c)) {\n          input.step();\n          s = 2;\n        }\n        else if (c === 125/*'}'*/) {\n          input.step();\n          return new StringIteratee.Done(builder.state());\n        }\n       else return new StringIteratee.Error({expected: '\\'}\\', \\';\\', \\',\\', or newline', found: c});\n      }\n      else if (input.isDone()) return StringIteratee.unexpectedEOF;\n    }\n  }\n  return new RecordParser(builder, key, value, s);\n};\n\n\nfunction MarkupParser(builder, text, value, s) {\n  StringIteratee.call(this);\n  this.builder = builder || null;\n  this.text = text || null;\n  this.value = value || null;\n  this.s = s || 1;\n}\nMarkupParser.prototype = Object.create(StringIteratee.prototype);\nMarkupParser.prototype.constructor = MarkupParser;\nMarkupParser.prototype.feed = function (input) {\n  var c = 0;\n  var s = this.s;\n  var value = this.value;\n  var text = this.text;\n  var builder = this.builder;\n  if (s === 1) {\n    if (!input.isEmpty()) {\n      c = input.head();\n      if (c === 91/*'['*/) {\n        input.step();\n        s = 2;\n      }\n      else return new StringIteratee.Error({expected: '\\'[\\'', found: c});\n    }\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  while (!input.isEmpty() || input.isDone()) {\n    if (s === 2) {\n      while (!input.isEmpty() && (c = input.head(),\n          c !== 64/*'@'*/ &&\n          c !== 91/*'['*/ &&\n          c !== 92/*'\\\\'*/ &&\n          c !== 93/*']'*/ &&\n          c !== 123/*'{'*/ &&\n          c !== 125/*'}'*/)) {\n        input.step();\n        text = text || new StringBuilder();\n        text.append(c);\n      }\n      if (!input.isEmpty()) {\n        if (c === 93/*']'*/) {\n          input.step();\n          if (!builder) {\n            if (!text) text = text || new StringBuilder();\n            return new StringIteratee.Done(text.state());\n          }\n          else {\n            if (text) builder.appendValue(text.state());\n            return new StringIteratee.Done(builder.state());\n          }\n        }\n        else if (c === 64/*'@'*/) {\n          builder = builder || new RecordBuilder();\n          if (text) {\n            builder.appendValue(text.state());\n            text = null;\n          }\n          value = new InlineValueParser();\n          s = 3;\n        }\n        else if (c === 123/*'{'*/) {\n          builder = builder || new RecordBuilder();\n          if (text) {\n            builder.appendValue(text.state());\n            text = null;\n          }\n          value = new RecordParser(builder);\n          s = 4;\n        }\n        else if (c === 91/*'['*/) {\n          builder = builder || new RecordBuilder();\n          if (text) {\n            builder.appendValue(text.state());\n            text = null;\n          }\n          value = new MarkupParser(builder);\n          s = 4;\n        }\n        else if (c === 92/*'\\\\'*/) {\n          input.step();\n          s = 5;\n        }\n        else new StringIteratee.Error({found: c});\n      }\n      else if (input.isDone()) return StringIteratee.unexpectedEOF;\n    }\n    if (s === 3) {\n      while ((!input.isEmpty() || input.isDone()) && value.isCont()) value = value.feed(input);\n      if (value.isDone()) {\n        builder.appendValue(value.state());\n        value = null;\n        s = 2;\n      }\n      else if (value.isError()) return value;\n    }\n    if (s === 4) {\n      while ((!input.isEmpty() || input.isDone()) && value.isCont()) value = value.feed(input);\n      if (value.isDone()) {\n        value = null;\n        s = 2;\n      }\n      else if (value.isError()) return value;\n    }\n    if (s === 5) {\n      if (!input.isEmpty()) {\n        c = input.head();\n        text = text || new StringBuilder();\n        if (c === 34/*'\"'*/ ||\n            c === 47/*'/'*/ ||\n            c === 64/*'@'*/ ||\n            c === 91/*'['*/ ||\n            c === 92/*'\\\\'*/ ||\n            c === 93/*']'*/ ||\n            c === 123/*'{'*/ ||\n            c === 125/*'}'*/) {\n          input.step();\n          text.append(c);\n          s = 2;\n        }\n        else if (c === 98/*'b'*/) {\n          input.step();\n          text.append(8/*'\\b'*/);\n          s = 2;\n        }\n        else if (c === 102/*'f'*/) {\n          input.step();\n          text.append(12/*'\\f'*/);\n          s = 2;\n        }\n        else if (c === 110/*'n'*/) {\n          input.step();\n          text.append(10/*'\\n'*/);\n          s = 2;\n        }\n        else if (c === 114/*'r'*/) {\n          input.step();\n          text.append(13/*'\\r'*/);\n          s = 2;\n        }\n        else if (c === 116/*'t'*/) {\n          input.step();\n          text.append(9/*'\\t'*/);\n          s = 2;\n        }\n        else return new StringIteratee.Error({expected: 'escape character', found: c});\n      }\n      else if (input.isDone()) return StringIteratee.unexpectedEOF;\n    }\n  }\n  return new MarkupParser(builder, text, value, s);\n};\n\n\nfunction StringParser(text, s) {\n  StringIteratee.call(this);\n  this.text = text || null;\n  this.s = s || 1;\n}\nStringParser.prototype = Object.create(StringIteratee.prototype);\nStringParser.prototype.constructor = StringParser;\nStringParser.prototype.feed = function (input) {\n  var c = 0;\n  var s = this.s;\n  var text = this.text;\n  if (s === 1) {\n    if (!input.isEmpty() && (c = input.head(), c === 34/*'\"'*/)) {\n      input.step();\n      s = 2;\n    }\n    else if (!input.isEmpty()) return new StringIteratee.Error({expected: '\\'\"\\'', found: c});\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  while (!input.isEmpty() || input.isDone()) {\n    if (s === 2) {\n      text = text || new StringBuilder();\n      while (!input.isEmpty() && (c = input.head(), c !== 34/*'\"'*/ && c !== 92/*'\\\\'*/)) {\n        input.step();\n        text.append(c);\n      }\n      if (!input.isEmpty()) {\n        if (c === 34/*'\"'*/) {\n          input.step();\n          return new StringIteratee.Done(text.state());\n        }\n        else if (c === 92/*'\\\\'*/) {\n          input.step();\n          s = 3;\n        }\n      }\n      else if (input.isDone()) return StringIteratee.unexpectedEOF;\n    }\n    if (s === 3) {\n      if (!input.isEmpty()) {\n        c = input.head();\n        if (c === 34/*'\"'*/ ||\n            c === 47/*'/'*/ ||\n            c === 64/*'@'*/ ||\n            c === 91/*'['*/ ||\n            c === 92/*'\\\\'*/ ||\n            c === 93/*']'*/ ||\n            c === 123/*'{'*/ ||\n            c === 125/*'}'*/) {\n          input.step();\n          text.append(c);\n          s = 2;\n        }\n        else if (c === 98/*'b'*/) {\n          input.step();\n          text.append(8/*'\\b'*/);\n          s = 2;\n        }\n        else if (c === 102/*'f'*/) {\n          input.step();\n          text.append(12/*'\\f'*/);\n          s = 2;\n        }\n        else if (c === 110/*'n'*/) {\n          input.step();\n          text.append(10/*'\\n'*/);\n          s = 2;\n        }\n        else if (c === 114/*'r'*/) {\n          input.step();\n          text.append(13/*'\\r'*/);\n          s = 2;\n        }\n        else if (c === 116/*'t'*/) {\n          input.step();\n          text.append(9/*'\\t'*/);\n          s = 2;\n        }\n        else return new StringIteratee.Error({expected: 'escape character', found: c});\n      }\n      else if (input.isDone()) return StringIteratee.unexpectedEOF;\n    }\n  }\n  return new StringParser(text, s);\n};\n\n\nfunction DataParser(data, s) {\n  StringIteratee.call(this);\n  this.data = data || null;\n  this.s = s || 1;\n}\nDataParser.prototype = Object.create(StringIteratee.prototype);\nDataParser.prototype.constructor = DataParser;\nDataParser.prototype.feed = function (input) {\n  var c = 0;\n  var s = this.s;\n  var data = this.data || new DataBuilder();\n  if (s === 1) {\n    if (!input.isEmpty() && (c = input.head(), c === 37/*'%'*/)) {\n      input.step();\n      s = 2;\n    }\n    else if (!input.isEmpty()) return new StringIteratee.Error({expected: '\\'%\\'', found: c});\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  while (!input.isEmpty() || input.isDone()) {\n    if (s === 2) {\n      if (!input.isEmpty() && (c = input.head(), isBase64Char(c))) {\n        input.step();\n        data.appendBase64Char(c);\n        s = 3;\n      }\n      else if (!input.isEmpty() || input.isDone()) return new StringIteratee.Done(data.state());\n    }\n    if (s === 3) {\n      if (!input.isEmpty() && (c = input.head(), isBase64Char(c))) {\n        input.step();\n        data.appendBase64Char(c);\n        s = 4;\n      }\n      else if (!input.isEmpty()) return new StringIteratee.Error({expected: 'base64 digit', found: c});\n      else if (input.isDone()) return StringIteratee.unexpectedEOF;\n    }\n    if (s === 4) {\n      if (!input.isEmpty() && (c = input.head(), isBase64Char(c) || c === 61/*'='*/)) {\n        input.step();\n        data.appendBase64Char(c);\n        if (c !== 61/*'='*/) s = 5;\n        else s = 6;\n      }\n      else if (!input.isEmpty()) return new StringIteratee.Error({expected: 'base64 digit', found: c});\n      else if (input.isDone()) return StringIteratee.unexpectedEOF;\n    }\n    if (s === 5) {\n      if (!input.isEmpty() && (c = input.head(), isBase64Char(c) || c === 61/*'='*/)) {\n        input.step();\n        data.appendBase64Char(c);\n        if (c !== 61/*'='*/) s = 2;\n        else return new StringIteratee.Done(data.state());\n      }\n      else if (!input.isEmpty()) return new StringIteratee.Error({expected: 'base64 digit', found: c});\n      else if (input.isDone()) return StringIteratee.unexpectedEOF;\n    }\n    else if (s === 6) {\n      if (!input.isEmpty() && (c = input.head(), c === 61/*'='*/)) {\n        input.step();\n        data.appendBase64Char(c);\n        return new StringIteratee.Done(data.state());\n      }\n      else if (!input.isEmpty()) return new StringIteratee.Error({expected: '\\'=\\'', found: c});\n      else if (input.isDone()) return StringIteratee.unexpectedEOF;\n    }\n  }\n  return new DataParser(data, s);\n};\n\n\nfunction NumberParser(builder, s) {\n  StringIteratee.call(this);\n  this.builder = builder || null;\n  this.s = s || 1;\n}\nNumberParser.prototype = Object.create(StringIteratee.prototype);\nNumberParser.prototype.constructor = NumberParser;\nNumberParser.prototype.feed = function (input) {\n  var c = 0;\n  var s = this.s;\n  var builder = this.builder || new StringBuilder();\n  if (s === 1) {\n    if (!input.isEmpty()) {\n      c = input.head();\n      if (c === 45/*'-'*/) {\n        input.step();\n        builder.append(c);\n      }\n      s = 2;\n    }\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  if (s === 2) {\n    if (!input.isEmpty()) {\n      c = input.head();\n      if (c === 48/*'0'*/) {\n        input.step();\n        builder.append(c);\n        s = 4;\n      }\n      else if (c >= 49/*'1'*/ && c <= 57/*'9'*/) {\n        input.step();\n        builder.append(c);\n        s = 3;\n      }\n      else return new StringIteratee.Error({expected: 'digit', found: c});\n    }\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  if (s === 3) {\n    while (!input.isEmpty() && (c = input.head(), c >= 48/*'0'*/ && c <= 57/*'9'*/)) {\n      input.step();\n      builder.append(c);\n    }\n    if (!input.isEmpty()) s = 4;\n    else if (input.isDone()) return new StringIteratee.Done(Number(builder.state()));\n  }\n  if (s === 4) {\n    if (!input.isEmpty()) {\n      c = input.head();\n      if (c === 46/*'.'*/) {\n        input.step();\n        builder.append(c);\n        s = 5;\n      }\n      else if (c === 69/*'E'*/ || c === 101/*'e'*/) {\n        input.step();\n        builder.append(c);\n        s = 8;\n      }\n      else return new StringIteratee.Done(Number(builder.state()));\n    }\n    else if (input.isDone()) return new StringIteratee.Done(Number(builder.state()));\n  }\n  if (s === 5) {\n    if (!input.isEmpty()) {\n      c = input.head();\n      if (c >= 48/*'0'*/ && c <= 57/*'9'*/) {\n        input.step();\n        builder.append(c);\n        s = 6;\n      }\n      else return new StringIteratee.Error({expected: 'digit', found: c});\n    }\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  if (s === 6) {\n    while (!input.isEmpty() && (c = input.head(), c >= 48/*'0'*/ && c <= 57/*'9'*/)) {\n      input.step();\n      builder.append(c);\n    }\n    if (!input.isEmpty()) s = 7;\n    else if (input.isDone()) return new StringIteratee.Done(Number(builder.state()));\n  }\n  if (s === 7) {\n    c = input.head();\n    if (c === 69/*'E'*/ || c === 101/*'e'*/) {\n      input.step();\n      builder.append(c);\n      s = 8;\n    }\n    else return new StringIteratee.Done(Number(builder.state()));\n  }\n  if (s === 8) {\n    if (!input.isEmpty()) {\n      c = input.head();\n      if (c === 43/*'+'*/ || c === 45/*'-'*/) {\n        input.step();\n        builder.append(c);\n      }\n      s = 9;\n    }\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  if (s === 9) {\n    if (!input.isEmpty()) {\n      c = input.head();\n      if (c >= 48/*'0'*/ && c <= 57/*'9'*/) {\n        input.step();\n        builder.append(c);\n        s = 10;\n      }\n      else return new StringIteratee.Error({expected: 'digit', found: c});\n    }\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  if (s === 10) {\n    while (!input.isEmpty() && (c = input.head(), c >= 48/*'0'*/ && c <= 57/*'9'*/)) {\n      input.step();\n      builder.append(c);\n    }\n    if (!input.isEmpty() || input.isDone()) return new StringIteratee.Done(Number(builder.state()));\n  }\n  return new NumberParser(builder, s);\n};\n\nfunction IdentParser(builder, s) {\n  StringIteratee.call(this);\n  this.builder = builder || null;\n  this.s = s || 1;\n}\nIdentParser.prototype = Object.create(StringIteratee.prototype);\nIdentParser.prototype.constructor = IdentParser;\nIdentParser.prototype.feed = function (input) {\n  var c = 0;\n  var s = this.s;\n  var builder = this.builder;\n  if (s === 1) {\n    if (!input.isEmpty() && (c = input.head(), isNameStartChar(c))) {\n      builder = builder || new StringBuilder();\n      input.step();\n      builder.append(c);\n      s = 2;\n    }\n    else if (!input.isEmpty()) return new StringIteratee.Error({expected: 'identitifer', found: c});\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  if (s === 2) {\n    while (!input.isEmpty() && (c = input.head(), isNameChar(c))) {\n      input.step();\n      builder.append(c);\n    }\n    if (!input.isEmpty() || input.isDone()) {\n      var value = builder.state();\n      if (value === 'true') value = true;\n      else if (value === 'false') value = false;\n      return new StringIteratee.Done(value);\n    }\n  }\n  return new IdentParser(builder, s);\n};\n\n\nfunction ReconWriter(builder) {\n  Object.defineProperty(this, 'builder', {value: builder || new StringBuilder()});\n}\nReconWriter.prototype.writeValue = function (value, inMarkup) {\n  if (value instanceof Record) this.writeRecord(value, inMarkup);\n  else if (typeof value === 'string') this.writeText(value, inMarkup);\n  else if (typeof value === 'number') this.writeNumber(value);\n  else if (typeof value === 'boolean') this.writeBool(value);\n  else if (value instanceof Uint8Array) this.writeData(value);\n};\nReconWriter.prototype.writeAttr = function(attr) {\n  this.builder.append(64/*'@'*/);\n  this.writeIdent(attr.key);\n  if (!attr.value.isExtant) {\n    this.builder.append(40/*'('*/);\n    this.writeBlock(attr.value);\n    this.builder.append(41/*')'*/);\n  }\n};\nReconWriter.prototype.writeItem = function(item) {\n  if (item.isField) {\n    this.writeValue(item.key);\n    this.builder.append(58/*':'*/);\n    if (!item.value.isExtant) this.writeValue(item.value);\n  }\n  else this.writeValue(item);\n};\nReconWriter.prototype.writeBlock = function (value) {\n  if (!(value instanceof Record)) this.writeValue(value);\n  else if (value.isMarkup()) this.writeMarkup(value);\n  else {\n    var items = value.iterator();\n    var item;\n    var hasAttrs = false;\n    while (!items.isEmpty() && (item = items.head(), item.isAttr)) {\n      this.writeAttr(item);\n      items.step();\n      hasAttrs = true;\n    }\n    if (!items.isEmpty()) {\n      if (hasAttrs) this.builder.append(123/*'{'*/);\n      this.writeItem(items.head());\n      items.step();\n      while (!items.isEmpty()) {\n        this.builder.append(44/*','*/);\n        this.writeItem(items.head());\n        items.step();\n      }\n      if (hasAttrs) this.builder.append(125/*'}'*/);\n    }\n    else if (!hasAttrs) {\n      this.builder.append(123/*'{'*/);\n      this.builder.append(125/*'}'*/);\n    }\n  }\n};\nReconWriter.prototype.writeRecord = function (record, inMarkup) {\n  if (record.isMarkup()) this.writeMarkup(record);\n  else {\n    var items = record.iterator();\n    var item;\n    var hasAttrs = false;\n    while (!items.isEmpty() && (item = items.head(), item.isAttr)) {\n      this.writeAttr(item);\n      items.step();\n      hasAttrs = true;\n    }\n    if (!items.isEmpty()) {\n      items.step();\n      if (hasAttrs && items.isEmpty()) {\n        if (inMarkup) {\n          if (item instanceof Record || typeof item === 'string') this.writeValue(item, inMarkup);\n          else {\n            this.builder.append(123/*'{'*/);\n            this.writeValue(item);\n            this.builder.append(125/*'}'*/);\n          }\n        }\n        else if (item.isSlot) {\n          this.builder.append(123/*'{'*/);\n          this.writeValue(item);\n          this.builder.append(125/*'}'*/);\n        }\n        else {\n          this.builder.append(32/*' '*/);\n          this.writeValue(item);\n        }\n      }\n      else {\n        this.builder.append(123/*'{'*/);\n        this.writeItem(item);\n        while (!items.isEmpty()) {\n          item = items.head();\n          this.builder.append(44/*','*/);\n          this.writeItem(item);\n          items.step();\n        }\n        this.builder.append(125/*'}'*/);\n      }\n    }\n    else if (!hasAttrs) {\n      this.builder.append(123/*'{'*/);\n      this.builder.append(125/*'}'*/);\n    }\n  }\n};\nReconWriter.prototype.writeMarkup = function (record) {\n  var items = record.iterator();\n  var item;\n  var hasAttrs = false;\n  while (!items.isEmpty() && (item = items.head(), item.isAttr)) {\n    this.writeAttr(item);\n    items.step();\n    hasAttrs = true;\n  }\n  this.builder.append(91/*'['*/);\n  while (!items.isEmpty()) {\n    item = items.head();\n    if (typeof item === 'string') {\n      var cs = new StringIterator(item);\n      while (!cs.isEmpty()) {\n        var c = cs.head();\n        switch (c) {\n          case 64/*'@'*/:\n          case 91/*'['*/:\n          case 92/*'\\\\'*/:\n          case 93/*']'*/:\n          case 123/*'{'*/:\n          case 125/*'}'*/: this.builder.append(92/*'\\\\'*/); this.builder.append(c); break;\n          default: this.builder.append(c);\n        }\n        cs.step();\n      }\n    }\n    else if (item instanceof Record) this.writeRecord(item, true);\n    else {\n      this.builder.append(123/*'{'*/);\n      this.writeItem(item);\n      this.builder.append(125/*'}'*/);\n    }\n    items.step();\n  }\n  this.builder.append(93/*']'*/);\n};\nReconWriter.prototype.writeText = function (text, inMarkup) {\n  function isIdent() {\n    var cs = new StringIterator(text);\n    if (cs.isEmpty() || !isNameStartChar(cs.head())) return false;\n    cs.step();\n    while (!cs.isEmpty() && isNameChar(cs.head())) cs.step();\n    return cs.isEmpty();\n  }\n  if (inMarkup) this.writeTextMarkup(text);\n  else if (isIdent()) this.writeIdent(text);\n  else this.writeString(text);\n};\nReconWriter.prototype.writeString = function (string) {\n  var cs = new StringIterator(string);\n  this.builder.append(34/*'\"'*/);\n  while (!cs.isEmpty()) {\n    var c = cs.head();\n    switch (c) {\n      case 34/*'\"'*/:\n      case 92/*'\\\\'*/: this.builder.append(92/*'\\\\'*/); this.builder.append(c); break;\n      case 8/*'\\b'*/: this.builder.append(92/*'\\\\'*/); this.builder.append(98/*'b'*/); break;\n      case 12/*'\\f'*/: this.builder.append(92/*'\\\\'*/); this.builder.append(102/*'f'*/); break;\n      case 10/*'\\n'*/: this.builder.append(92/*'\\\\'*/); this.builder.append(110/*'n'*/); break;\n      case 13/*'\\r'*/: this.builder.append(92/*'\\\\'*/); this.builder.append(114/*'r'*/); break;\n      case 9/*'\\t'*/: this.builder.append(92/*'\\\\'*/); this.builder.append(116/*'t'*/); break;\n      default: this.builder.append(c);\n    }\n    cs.step();\n  }\n  this.builder.append(34/*'\"'*/);\n};\nReconWriter.prototype.writeIdent = function (ident) {\n  this.builder.appendString(ident);\n};\nReconWriter.prototype.writeTextMarkup = function (text) {\n  var cs = new StringIterator(text);\n  this.builder.append(91/*'['*/);\n  while (!cs.isEmpty()) {\n    var c = cs.head();\n    switch (c) {\n      case 64/*'@'*/:\n      case 91/*'['*/:\n      case 92/*'\\\\'*/:\n      case 93/*']'*/:\n      case 123/*'{'*/:\n      case 125/*'}'*/: this.builder.append(92/*'\\\\'*/); this.builder.append(c); break;\n      default: this.builder.append(c);\n    }\n    cs.step();\n  }\n  this.builder.append(93/*']'*/);\n};\nReconWriter.prototype.writeNumber = function (number) {\n  this.builder.appendString(number.toString());\n};\nReconWriter.prototype.writeBool = function (bool) {\n  this.builder.appendString(bool.toString());\n};\nReconWriter.prototype.writeData = function (data) {\n  function encodeBase64Digit(x) {\n    if      (x >=  0 && x < 26) return x + 65/*'A'*/;\n    else if (x >= 26 && x < 52) return x + 71/*('a' - 26)*/;\n    else if (x >= 52 && x < 62) return x - 4/*-('0' - 52)*/;\n    else if (x === 62) return 43/*'+'*/;\n    else if (x === 63) return 47/*'/'*/;\n  }\n  this.builder.append(37/*'%'*/);\n  var i = 0;\n  var n = data.length;\n  var x, y, z;\n  while (i + 2 < n) {\n    x = data[i];\n    y = data[i + 1];\n    z = data[i + 2];\n    this.builder.append(encodeBase64Digit(x >>> 2));\n    this.builder.append(encodeBase64Digit(((x << 4) | (y >>> 4)) & 0x3F));\n    this.builder.append(encodeBase64Digit(((y << 2) | (z >>> 6)) & 0x3F));\n    this.builder.append(encodeBase64Digit(z & 0x3F));\n    i += 3;\n  }\n  if (i + 1 < n) {\n    x = data[i];\n    y = data[i + 1];\n    this.builder.append(encodeBase64Digit(x >>> 2));\n    this.builder.append(encodeBase64Digit(((x << 4) | (y >>> 4)) & 0x3F));\n    this.builder.append(encodeBase64Digit((y << 2) & 0x3F));\n    this.builder.append(61/*'='*/);\n    i += 2;\n  }\n  else if (i < n) {\n    x = data[i];\n    this.builder.append(encodeBase64Digit(x >>> 2));\n    this.builder.append(encodeBase64Digit((x << 4) & 0x3F));\n    this.builder.append(61/*'='*/);\n    this.builder.append(61/*'='*/);\n    i += 1;\n  }\n};\nReconWriter.prototype.state = function () {\n  return this.builder.state();\n};\n\n\nmodule.exports = function (value) {\n  return coerce(value);\n};\nexports = module.exports;\nexports.parse = parse;\nexports.stringify = stringify;\nexports.objectify = objectify;\nexports.compare = compare;\nexports.builder = builder;\nexports.Field = Field;\nexports.Attr = Attr;\nexports.Slot = Slot;\nexports.Record = Record;\nexports.Data = Data;\nexports.Extant = Extant;\nexports.Absent = Absent;\n\n},{}]},{},[1])(1)\n});"],"sourceRoot":"/source/"}