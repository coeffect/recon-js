{"version":3,"sources":["recon.min.js"],"names":["f","exports","module","define","amd","g","window","global","self","this","recon","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length",1,"coerce","arguments","item","Extant","Absent","Attr","Slot","builder","RecordBuilder","appendField","state","coerceItem","coerceArray","Record","Uint8Array","Array","isArray","toRecon","coerceObject","array","value","isField","appendValue","object","prop","key","attrs","isAbsent","parse","string","input","StringIterator","result","DocumentParser","run","stringify","writer","ReconWriter","writeBlock","apply","objectify","isExtant","undefined","objectifyArray","objectifyObject","record","items","iterator","isEmpty","head","push","step","isAttr","base64","data","DataBuilder","cs","appendBase64Char","attr","slot","empty","compare","x","y","equals","index","__proto__","prototype","Object","defineProperty","Field","enumerable","RecordIterator","writable","ValueBuilder","StringIteratee","StringBuilder","isSpace","c","isNewline","isWhitespace","isNameStartChar","isNameChar","isBase64Char","BlockParser","AttrParser","ident","IdentParser","BlockValueParser","field","InlineValueParser","RecordParser","MarkupParser","text","StringParser","DataParser","NumberParser","create","Function","constructor","get","getOwnPropertyNames","isMarkup","isBlank","afterNonText","hasNonText","sections","hasAttrs","hasPrefixAttrs","hasPostfixAttrs","contains","tail","slice","body","foot","target","these","next","concat","appendRecord","that","forEach","those","toString","writeRecord","writeAttr","isSlot","writeItem","dup","toRecord","isAllAttrs","isDone","c1","charCodeAt","c2","Done","isCont","isError","feed","error","unexpectedEOF","append","String","fromCharCode","appendString","prepare","size","expand","base","Math","max","aliased","buffer","set","appendByte","offset","decodeBase64Digit","decodeBase64Quantum","p","q","z","w","subarray","found","expected","Number","writeValue","inMarkup","writeText","writeNumber","writeBool","writeData","writeIdent","writeMarkup","isIdent","writeTextMarkup","writeString","number","bool","encodeBase64Digit","extant","absent"],"mappings":"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","file":"recon.min.js","sourcesContent":["(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.recon = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\nfunction coerce() {\n  if (arguments.length === 1) {\n    var item = arguments[0];\n    if (item === null) return Extant;\n    else if (typeof item === 'undefined') return Absent;\n    else if (item instanceof Attr || item instanceof Slot) {\n      var builder = new RecordBuilder();\n      builder.appendField(item);\n      return builder.state();\n    }\n    else return coerceItem(item);\n  }\n  else if (arguments.length > 1) return coerceArray(arguments);\n  else return Absent;\n}\nfunction coerceItem(item) {\n  if (item === null) return Extant;\n  else if (item instanceof Record ||\n           item instanceof Attr ||\n           item instanceof Slot ||\n           typeof item === 'string' ||\n           typeof item === 'number' ||\n           typeof item === 'boolean' ||\n           item instanceof Uint8Array ||\n           item === Extant ||\n           item === Absent) return item;\n  else if (Array.isArray(item)) return coerceArray(item);\n  else if (typeof item === 'object') {\n    if (item.toRecon && typeof item.toRecon === 'function') return item.toRecon();\n    else return coerceObject(item);\n  }\n  else return Absent;\n}\nfunction coerceArray(array) {\n  var builder = new RecordBuilder();\n  var n = array.length;\n  var i = 0;\n  while (i < n) {\n    var value = coerceItem(array[i]);\n    if (value.isField) builder.appendField(value);\n    else builder.appendValue(value);\n    i += 1;\n  }\n  return builder.state();\n}\nfunction coerceObject(object) {\n  var builder = new RecordBuilder();\n  var prop, key, value;\n  var attrs = object['@'];\n  for (prop in attrs) {\n    key = coerce(prop);\n    if (typeof key === 'string') {\n      value = coerce(attrs[prop]);\n      if (!value.isAbsent) builder.appendField(new Attr(key, value));\n    }\n  }\n  for (prop in object) {\n    if (prop !== '@') {\n      key = coerce(prop);\n      if (!key.isAbsent) {\n        value = coerce(object[prop]);\n        if (!value.isAbsent) builder.appendField(new Slot(key, value));\n      }\n    }\n  }\n  return builder.state();\n}\n\nfunction parse(string) {\n  var input = new StringIterator(string);\n  var result = new DocumentParser().run(input);\n  return result.state();\n}\n\nfunction stringify() {\n  var writer = new ReconWriter();\n  writer.writeBlock(coerce.apply(null, arguments));\n  return writer.state();\n}\n\nfunction objectify(value) {\n  if (value === null || typeof value === 'undefined' || value.isExtant) return null;\n  else if (value.isAbsent) return undefined;\n  else if (value instanceof Record) {\n    if (value.isArray()) return objectifyArray(value);\n    else return objectifyObject(value);\n  }\n  else return value;\n}\nfunction objectifyArray(record) {\n  var array = [];\n  var items = record.iterator();\n  while (!items.isEmpty()) {\n    var value = objectify(items.head());\n    array.push(value);\n    items.step();\n  }\n  return array;\n}\nfunction objectifyObject(record) {\n  var items = record.iterator();\n  var key, value;\n  var object = {};\n  var attrs = null;\n  var i = 0;\n  while (!items.isEmpty()) {\n    var item = items.head();\n    if (item.isField) {\n      key = objectify(item.key);\n      value = objectify(item.value);\n      if (item.isAttr) {\n        if (attrs === null) attrs = {};\n        attrs[key] = value;\n      }\n      else object[key] = value;\n    }\n    else {\n      value = objectify(item);\n      object[i] = value;\n    }\n    items.step();\n    i += 1;\n  }\n  if (attrs !== null) object['@'] = attrs;\n  return object;\n}\n\nfunction base64(string) {\n  if (typeof string === 'undefined') return new Uint8Array(0);\n  var data = new DataBuilder();\n  var cs = new StringIterator(string);\n  while (!cs.isEmpty()) {\n    data.appendBase64Char(cs.head());\n    cs.step();\n  }\n  return data.state();\n}\n\nfunction attr(key, value) {\n  if (typeof value === 'undefined') value = Extant;\n  return new Attr(coerce(key), coerce(value));\n}\n\nfunction slot(key, value) {\n  if (typeof value === 'undefined') value = Extant;\n  return new Slot(coerce(key), coerce(value));\n}\n\nfunction empty() {\n  return new Record([], {});\n}\n\nfunction builder() {\n  return new RecordBuilder();\n}\n\nfunction compare(x, y) {\n  if (x === y) return true;\n  if (x instanceof Record && y instanceof Record) return x.equals(y);\n  if (x.isField && y.isField) return x.equals(y);\n  if (x instanceof Uint8Array && y instanceof Uint8Array && x.length === y.length) {\n    var i = 0;\n    var n = x.length;\n    while (i < n && x[i] === y[i]) i += 1;\n    if (i === n) return true;\n  }\n  return false;\n}\n\n\nfunction Record(items, index) {\n  if (typeof index === 'undefined') {\n    index = {};\n    var i = 0;\n    var n = items.length;\n    while (i < n) {\n      var item = items[i];\n      if (item.isField) index[item.key] = item.value;\n      i += 1;\n    }\n  }\n  var record = function(key) {\n    var value = index[key];\n    if (typeof value === 'undefined' && typeof key === 'number') value = items[key];\n    return value;\n  };\n  record.__proto__ = Record.prototype;\n  Object.defineProperty(record, 'items', {value: items});\n  Object.defineProperty(record, 'index', {value: index});\n  return record;\n}\nRecord.prototype = Object.create(Function.prototype);\nRecord.prototype.constructor = Record;\nObject.defineProperty(Record.prototype, 'size', {\n  enumerable: true,\n  get: function () {\n    return this.items.length;\n  }\n});\nRecord.prototype.isEmpty = function () {\n  return this.items.length === 0;\n};\nRecord.prototype.isArray = function () {\n  return this.items.length >= 0 && Object.getOwnPropertyNames(this.index).length === 0;\n};\nRecord.prototype.isMarkup = function () {\n  function isBlank(string) {\n    var cs = new StringIterator(string);\n    while (!cs.isEmpty() && isSpace(cs.head())) cs.step();\n    return cs.isEmpty();\n  }\n  var items = this.iterator();\n  var afterNonText = false;\n  var hasNonText = false;\n  var sections = 0;\n  while (!items.isEmpty()) {\n    var item = items.head();\n    if (typeof item !== 'string') {\n      if (afterNonText) return false;\n      afterNonText = true;\n      hasNonText = true;\n    }\n    else if (afterNonText && !isBlank(item)) {\n      afterNonText = false;\n      sections += 1;\n    }\n    else if (sections === 0) sections = 1;\n    items.step();\n  }\n  return hasNonText && sections >= 2;\n};\nRecord.prototype.hasAttrs = function() {\n  return this.items.length > 0 && (this.items[0].isAttr || this.items[this.items.length - 1].isAttr);\n};\nRecord.prototype.hasPrefixAttrs = function () {\n  return this.items.length > 0 && this.items[0].isAttr;\n};\nRecord.prototype.hasPostfixAttrs = function () {\n  return this.items.length > 0 && this.items[this.items.length - 1].isAttr;\n};\nRecord.prototype.contains = function (key) {\n  return typeof this(key) !== 'undefined';\n};\nRecord.prototype.head = function () {\n  return this.items.length > 0 ? this.items[0] : Absent;\n};\nRecord.prototype.tail = function () {\n  return new Record(this.items.slice(1));\n};\nRecord.prototype.body = function () {\n  return new Record(this.items.slice(0, -1));\n};\nRecord.prototype.foot = function () {\n  return this.items.length > 0 ? this.items[this.items.length - 1] : Absent;\n};\nRecord.prototype.target = function () {\n  var these = this.iterator();\n  while (!these.isEmpty()) {\n    var item = these.next();\n    if (!item.isField) return item;\n  }\n  return Absent;\n};\nRecord.prototype.concat = function () {\n  var builder = new RecordBuilder();\n  builder.appendRecord(this);\n  var that = coerce.apply(null, arguments);\n  if (that instanceof Record) builder.appendRecord(that);\n  else builder.appendValue(that);\n  return builder.state();\n};\nRecord.prototype.iterator = function () {\n  return new RecordIterator(this.items);\n};\nRecord.prototype.forEach = function (f) {\n  var these = this.iterator();\n  while (!these.isEmpty()) f(these.next());\n};\nRecord.prototype.equals = function (that) {\n  var these = this.iterator();\n  var those = that.iterator();\n  while (!these.isEmpty() && !those.isEmpty()) {\n    if (!compare(these.next(), those.next())) return false;\n  }\n  return these.isEmpty() && those.isEmpty();\n};\nRecord.prototype.toString = function () {\n  var writer = new ReconWriter();\n  writer.writeRecord(this);\n  return writer.state();\n};\n\n\nfunction Field() {}\nObject.defineProperty(Field.prototype, 'isField', {enumerable: true, value: true});\nObject.defineProperty(Field.prototype, 'isAttr', {enumerable: true, value: false});\nObject.defineProperty(Field.prototype, 'isSlot', {enumerable: true, value: false});\n\nfunction Attr(key, value) {\n  Field.call(this);\n  Object.defineProperty(this, 'key', {enumerable: true, value: key});\n  if (typeof value === 'undefined') value = Extant;\n  Object.defineProperty(this, 'value', {enumerable: true, value: value});\n}\nAttr.prototype = Object.create(Field.prototype);\nAttr.prototype.constructor = Attr;\nObject.defineProperty(Attr.prototype, 'isAttr', {enumerable: true, value: true});\nAttr.prototype.equals = function (that) {\n  return that.isAttr && compare(this.key, that.key) && compare(this.value, that.value);\n};\nAttr.prototype.toString = function () {\n  var writer = new ReconWriter();\n  writer.writeAttr(this);\n  return writer.state();\n};\n\nfunction Slot(key, value) {\n  Field.call(this);\n  Object.defineProperty(this, 'key', {enumerable: true, value: key});\n  if (typeof value === 'undefined') value = Extant;\n  Object.defineProperty(this, 'value', {enumerable: true, value: value});\n}\nSlot.prototype = Object.create(Field.prototype);\nSlot.prototype.constructor = Slot;\nObject.defineProperty(Slot.prototype, 'isSlot', {enumerable: true, value: true});\nSlot.prototype.equals = function (that) {\n  return that.isSlot && compare(this.key, that.key) && compare(this.value, that.value);\n};\nSlot.prototype.toString = function () {\n  var writer = new ReconWriter();\n  writer.writeItem(this);\n  return writer.state();\n};\n\n\nvar Extant = {};\nObject.defineProperty(Extant, 'isExtant', {enumerable: true, value: true});\n\nvar Absent = {};\nObject.defineProperty(Absent, 'isAbsent', {enumerable: true, value: true});\n\n\nfunction RecordIterator(items, index) {\n  Object.defineProperty(this, 'items', {value: items});\n  Object.defineProperty(this, 'index', {value: index || 0, writable: true});\n}\nRecordIterator.prototype.isEmpty = function () {\n  return this.index >= this.items.length;\n};\nRecordIterator.prototype.head = function () {\n  if (this.index >= this.items.length) throw 'head of empty iterator';\n  return this.items[this.index];\n};\nRecordIterator.prototype.step = function () {\n  if (this.index >= this.items.length) throw 'empty iterator step';\n  this.index += 1;\n};\nRecordIterator.prototype.next = function () {\n  if (this.index >= this.items.length) return null;\n  var item = this.items[this.index];\n  this.index += 1;\n  return item;\n};\nRecordIterator.prototype.dup = function () {\n  return new RecordIterator(this.items, this.index);\n};\nRecordIterator.prototype.toRecord = function () {\n  return new Record(this.items.slice(this.index));\n};\nRecordIterator.prototype.isAllAttrs = function () {\n  var items = this.dup();\n  while (!items.isEmpty()) {\n    if (!items.next().isAttr) return false;\n  }\n  return true;\n};\n\n\nfunction RecordBuilder() {\n  Object.defineProperty(this, 'items', {value: []});\n  Object.defineProperty(this, 'index', {value: {}});\n}\nRecordBuilder.prototype.appendField = function (field) {\n  this.items.push(field);\n  this.index[field.key] = field.value;\n};\nRecordBuilder.prototype.appendValue = function (value) {\n  this.items.push(value);\n};\nRecordBuilder.prototype.appendRecord = function (record) {\n  var items = record.iterator();\n  while (!items.isEmpty()) {\n    var item = items.next();\n    if (item.isField) this.appendField(item);\n    else this.appendValue(item);\n  }\n};\nRecordBuilder.prototype.attr = function (key, value) {\n  this.appendField(attr(key, value));\n  return this;\n};\nRecordBuilder.prototype.slot = function (key, value) {\n  this.appendField(slot(key, value));\n  return this;\n};\nRecordBuilder.prototype.item = function (value) {\n  this.appendValue(coerceItem(value));\n  return this;\n};\nRecordBuilder.prototype.state = function () {\n  return new Record(this.items, this.index);\n};\n\n\nfunction ValueBuilder() {\n  Object.defineProperty(this, 'items', {value: null, writable: true});\n  Object.defineProperty(this, 'index', {value: null, writable: true});\n  Object.defineProperty(this, 'value', {value: null, writable: true});\n}\nValueBuilder.prototype.appendField = function (field) {\n  if (this.items === null) {\n    this.items = [];\n    this.index = {};\n    if (this.value !== null) {\n      this.items.push(this.value);\n      this.value = null;\n    }\n  }\n  this.items.push(field);\n  this.index[field.key] = field.value;\n};\nValueBuilder.prototype.appendValue = function (value) {\n  if (this.items !== null) this.items.push(value);\n  else if (this.value === null) this.value = value;\n  else {\n    this.items = [];\n    this.index = {};\n    this.items.push(this.value);\n    this.value = null;\n    this.items.push(value);\n  }\n};\nValueBuilder.prototype.state = function () {\n  if (this.value !== null) return this.value;\n  else if (this.items !== null) return new Record(this.items, this.index);\n  else return Absent;\n};\n\n\nfunction StringIterator(string, index) {\n  Object.defineProperty(this, 'string', {value: string || ''});\n  Object.defineProperty(this, 'index', {value: index || 0, writable: true});\n}\nStringIterator.prototype.isDone = function () {\n  return false;\n};\nStringIterator.prototype.isEmpty = function () {\n  return this.index >= this.string.length;\n};\nStringIterator.prototype.head = function () {\n  var c1 = this.string.charCodeAt(this.index);\n  if (c1 <= 0xD7FF || c1 >= 0xE000) return c1; // U+0000..U+D7FF | U+E000..U+FFFF\n  else if (c1 <= 0xDBFF && this.index + 1 < this.string.length) { // c1 >= 0xD800\n    var c2 = this.string.charCodeAt(this.index + 1);\n    if (c2 >= 0xDC00 && c2 <= 0xDFFF) // U+10000..U+10FFFF\n      return (((c1 & 0x3FF) << 10) | (c2 & 0x3FF)) + 0x10000;\n    else return 0xFFFD;\n  }\n  else return 0xFFFD;\n};\nStringIterator.prototype.step = function () {\n  var c1 = this.string.charCodeAt(this.index);\n  if (c1 <= 0xD7FF || c1 >= 0xE000) // U+0000..U+D7FF | U+E000..U+FFFF\n    this.index += 1;\n  else if (c1 <= 0xDBFF && this.index + 1 < this.string.length) { // c1 >= 0xD800\n    var c2 = this.string.charCodeAt(this.index + 1);\n    if (c2 >= 0xDC00 && c2 <= 0xDFFF) // U+10000..U+10FFFF\n      this.index += 2;\n    else this.index += 1;\n  }\n  else this.index += 1;\n};\n\nStringIterator.Done = {\n  isDone: function () {\n    return true;\n  },\n  isEmpty: function () {\n    return true;\n  },\n  head: function () {\n    throw 'head of empty iterator';\n  },\n  step: function () {\n    throw 'empty iterator step';\n  }\n};\nStringIterator.Done.prototype = Object.create(StringIterator.prototype);\n\n\nfunction StringIteratee() {}\nStringIteratee.prototype.isCont = function () {\n  return true;\n};\nStringIteratee.prototype.isDone = function () {\n  return false;\n};\nStringIteratee.prototype.isError = function () {\n  return false;\n};\nStringIteratee.prototype.feed = function (input) {\n  return this;\n};\nStringIteratee.prototype.run = function (input) {\n  var next = this;\n  while (!input.isEmpty() && next.isCont()) next = next.feed(input);\n  if (input.isEmpty() && !input.isDone() && next.isCont()) next = next.feed(StringIterator.Done);\n  return next;\n};\n\nStringIteratee.Done = function (value) {\n  StringIteratee.call(this);\n  this.value = value;\n};\nStringIteratee.Done.prototype = Object.create(StringIteratee.prototype);\nStringIteratee.Done.prototype.constructor = StringIteratee.Done;\nStringIteratee.Done.prototype.isCont = function () {\n  return false;\n};\nStringIteratee.Done.prototype.isDone = function () {\n  return true;\n};\nStringIteratee.Done.prototype.feed = function (input) {\n  return this;\n};\nStringIteratee.Done.prototype.state = function () {\n  return this.value;\n};\n\nStringIteratee.Error = function (error) {\n  StringIteratee.call(this);\n  this.error = error;\n};\nStringIteratee.Error.prototype = Object.create(StringIteratee.prototype);\nStringIteratee.Error.prototype.constructor = StringIteratee.Error;\nStringIteratee.Error.prototype.isCont = function () {\n  return false;\n};\nStringIteratee.Error.prototype.isError = function () {\n  return true;\n};\nStringIteratee.Error.prototype.feed = function (input) {\n  return this;\n};\nStringIteratee.Error.prototype.state = function () {\n  throw this.error;\n};\n\nStringIteratee.unexpectedEOF = new StringIteratee.Error('unexpected end of input');\n\n\nfunction StringBuilder() {\n  Object.defineProperty(this, 'string', {value: '', writable: true});\n}\nStringBuilder.prototype.append = function (c) {\n  if ((c >= 0x0000 && c <= 0xD7FF) ||\n      (c >= 0xE000 && c <= 0xFFFF)) { // U+0000..U+D7FF | U+E000..U+FFFF\n    this.string += String.fromCharCode(c);\n  }\n  else if (c >= 0x10000 && c <= 0x10FFFF) { // U+10000..U+10FFFF\n    var u = c - 0x10000;\n    this.string += String.fromCharCode(0xD800 | (u >>> 10), 0xDC00 | (u & 0x3FF));\n  }\n  else { // invalid code point\n    this.string += String.fromCharCode(0xFFFD);\n  }\n};\nStringBuilder.prototype.appendString = function (s) {\n  var cs = new StringIterator(s);\n  while (!cs.isEmpty()) {\n    this.append(cs.head());\n    cs.step();\n  }\n};\nStringBuilder.prototype.state = function () {\n  return this.string;\n};\n\n\nfunction DataBuilder() {\n  Object.defineProperty(this, 'buffer', {value: null, writable: true});\n  Object.defineProperty(this, 'offset', {value: 0, writable: true});\n  Object.defineProperty(this, 'aliased', {value: true, writable: true});\n  Object.defineProperty(this, 'p', {value: 0, writable: true});\n  Object.defineProperty(this, 'q', {value: 0, writable: true});\n  Object.defineProperty(this, 'r', {value: 0, writable: true});\n  Object.defineProperty(this, 's', {value: 0, writable: true});\n}\nDataBuilder.prototype.prepare = function (size) {\n  function expand(base, size) {\n    var n = Math.max(base, size) - 1;\n    n |= n >> 1; n |= n >> 2; n |= n >> 4; n |= n >> 8;\n    return n + 1;\n  }\n  if (this.aliased || size > this.buffer.length) {\n    var array = new Uint8Array(expand(256, size));\n    if (this.buffer) array.set(this.buffer);\n    this.buffer = array;\n    this.aliased = false;\n  }\n};\nDataBuilder.prototype.appendByte = function (value) {\n  this.prepare(this.offset + 1);\n  this.buffer[this.offset] = value;\n  this.offset += 1;\n};\nDataBuilder.prototype.decodeBase64Digit = function (c) {\n  if (c >= 65/*'A'*/ && c <= 90/*'Z'*/) return c - 65/*'A'*/;\n  else if (c >= 97/*'a'*/ && c <= 122/*'z'*/) return c - 71/*'a' - 26*/;\n  else if (c >= 48/*'0'*/ && c <= 57/*'9'*/) return c + 4/*52 - '0'*/;\n  else if (c === 43/*'+'*/ || c === 45/*'-'*/) return 62;\n  else if (c === 47/*'/'*/ || c === 95/*'_'*/) return 63;\n};\nDataBuilder.prototype.decodeBase64Quantum = function () {\n  var x = this.decodeBase64Digit(this.p);\n  var y = this.decodeBase64Digit(this.q);\n  if (this.r !== 61/*'='*/) {\n    var z = this.decodeBase64Digit(this.r);\n    if (this.s !== 61/*'='*/) {\n      var w = this.decodeBase64Digit(this.s);\n      this.appendByte((x << 2) | (y >>> 4));\n      this.appendByte((y << 4) | (z >>> 2));\n      this.appendByte((z << 6) | w);\n    }\n    else {\n      this.appendByte((x << 2) | (y >>> 4));\n      this.appendByte((y << 4) | (z >>> 2));\n    }\n  }\n  else {\n    if (this.s !== 61/*'='*/) throw 'incomplete base64 quantum';\n    this.appendByte((x << 2) | (y >>> 4));\n  }\n};\nDataBuilder.prototype.appendBase64Char = function (c) {\n  if (this.p === 0) this.p = c;\n  else if (this.q === 0) this.q = c;\n  else if (this.r === 0) this.r = c;\n  else {\n    this.s = c;\n    this.decodeBase64Quantum();\n    this.s = 0;\n    this.r = 0;\n    this.q = 0;\n    this.p = 0;\n  }\n};\nDataBuilder.prototype.state = function (value) {\n  if (!this.buffer) this.buffer = new Uint8Array(0);\n  else if (this.buffer.length !== this.offset) {\n    var array = new Uint8Array(this.offset);\n    array.set(this.buffer.subarray(0, this.offset));\n    this.buffer = array;\n  }\n  this.aliased = true;\n  return this.buffer;\n};\n\n\nfunction isSpace(c) {\n  return c === 0x20 || c === 0x9;\n}\nfunction isNewline(c) {\n  return c === 0xA || c === 0xD;\n}\nfunction isWhitespace(c) {\n  return isSpace(c) || isNewline(c);\n}\nfunction isNameStartChar(c) {\n  return (\n    c >= 65/*'A'*/ && c <= 90/*'Z'*/ ||\n    c === 95/*'_'*/ ||\n    c >= 97/*'a'*/ && c <= 122/*'z'*/ ||\n    c >= 0xC0 && c <= 0xD6 ||\n    c >= 0xD8 && c <= 0xF6 ||\n    c >= 0xF8 && c <= 0x2FF ||\n    c >= 0x370 && c <= 0x37D ||\n    c >= 0x37F && c <= 0x1FFF ||\n    c >= 0x200C && c <= 0x200D ||\n    c >= 0x2070 && c <= 0x218F ||\n    c >= 0x2C00 && c <= 0x2FEF ||\n    c >= 0x3001 && c <= 0xD7FF ||\n    c >= 0xF900 && c <= 0xFDCF ||\n    c >= 0xFDF0 && c <= 0xFFFD ||\n    c >= 0x10000 && c <= 0xEFFFF);\n}\nfunction isNameChar(c) {\n  return (\n    c === 45/*'-'*/ ||\n    c >= 48/*'0'*/ && c <= 57/*'9'*/ ||\n    c >= 65/*'A'*/ && c <= 90/*'Z'*/ ||\n    c === 95/*'_'*/ ||\n    c >= 97/*'a'*/ && c <= 122/*'z'*/ ||\n    c === 0xB7 ||\n    c >= 0xC0 && c <= 0xD6 ||\n    c >= 0xD8 && c <= 0xF6 ||\n    c >= 0xF8 && c <= 0x37D ||\n    c >= 0x37F && c <= 0x1FFF ||\n    c >= 0x200C && c <= 0x200D ||\n    c >= 0x203F && c <= 0x2040 ||\n    c >= 0x2070 && c <= 0x218F ||\n    c >= 0x2C00 && c <= 0x2FEF ||\n    c >= 0x3001 && c <= 0xD7FF ||\n    c >= 0xF900 && c <= 0xFDCF ||\n    c >= 0xFDF0 && c <= 0xFFFD ||\n    c >= 0x10000 && c <= 0xEFFFF);\n}\nfunction isBase64Char(c) {\n  return (\n    c >= 48/*'0'*/ && c <= 57/*'9'*/ ||\n    c >= 65/*'A'*/ && c <= 90/*'Z'*/ ||\n    c >= 97/*'a'*/ && c <= 122/*'z'*/ ||\n    c === 43/*'+'*/ || c === 45/*'-'*/ ||\n    c === 47/*'/'*/ || c === 95/*'_'*/);\n}\n\n\nfunction DocumentParser(value) {\n  StringIteratee.call(this);\n  this.value = value || new BlockParser();\n}\nDocumentParser.prototype = Object.create(StringIteratee.prototype);\nDocumentParser.prototype.constructor = DocumentParser;\nDocumentParser.prototype.feed = function (input) {\n  var value = this.value;\n  while ((!input.isEmpty() || input.isDone()) && value.isCont()) value = value.feed(input);\n  if (value.isError()) return value;\n  if (value.isDone()) {\n    if (!input.isEmpty()) return new StringIteratee.Error({found: input.head()});\n    else if (input.isDone()) return value;\n  }\n  return new DocumentParser(value);\n};\n\n\nfunction BlockParser(builder, key, value, s) {\n  StringIteratee.call(this);\n  this.builder = builder || null;\n  this.key = key || null;\n  this.value = value || null;\n  this.s = s || 1;\n}\nBlockParser.prototype = Object.create(StringIteratee.prototype);\nBlockParser.prototype.constructor = BlockParser;\nBlockParser.prototype.feed = function (input) {\n  var c = 0;\n  var s = this.s;\n  var value = this.value;\n  var key = this.key;\n  var builder = this.builder || new ValueBuilder();\n  while (!input.isEmpty() || input.isDone()) {\n    if (s === 1) {\n      while (!input.isEmpty() && (c = input.head(), isWhitespace(c))) input.step();\n      if (!input.isEmpty()) s = 2;\n      else if (input.isDone()) return new StringIteratee.Done(builder.state());\n    }\n    if (s === 2) {\n      key = key || new BlockValueParser();\n      while ((!input.isEmpty() || input.isDone()) && key.isCont()) key = key.feed(input);\n      if (key.isDone()) s = 3;\n      else if (key.isError()) return key;\n    }\n    if (s === 3) {\n      while (!input.isEmpty() && (c = input.head(), isSpace(c))) input.step();\n      if (!input.isEmpty()) {\n        if (c === 58/*':'*/) {\n          input.step();\n          s = 4;\n        }\n        else {\n          builder.appendValue(key.state());\n          key = null;\n          s = 6;\n        }\n      }\n      else if (input.isDone()) {\n        builder.appendValue(key.state());\n        return new StringIteratee.Done(builder.state());\n      }\n    }\n    if (s === 4) {\n      while (!input.isEmpty() && isSpace(input.head())) input.step();\n      if (!input.isEmpty()) s = 5;\n      else if (input.isDone()) {\n        builder.appendField(new Slot(key.state()));\n        return new StringIteratee.Done(builder.state());\n      }\n    }\n    if (s === 5) {\n      value = value || new BlockValueParser();\n      while ((!input.isEmpty() || input.isDone()) && value.isCont()) value = value.feed(input);\n      if (value.isDone()) {\n        builder.appendField(new Slot(key.state(), value.state()));\n        key = null;\n        value = null;\n        s = 6;\n      }\n      else if (value.isError()) return value;\n    }\n    if (s === 6) {\n      while (!input.isEmpty() && (c = input.head(), isSpace(c))) input.step();\n      if (!input.isEmpty()) {\n        if (c === 44/*','*/ || c === 59/*';'*/ || isNewline(c)) {\n          input.step();\n          s = 1;\n        }\n        else return new StringIteratee.Done(builder.state());\n      }\n      else if (input.isDone()) return new StringIteratee.Done(builder.state());\n    }\n  }\n  return new BlockParser(builder, key, value, s);\n};\n\n\nfunction AttrParser(ident, value, s) {\n  StringIteratee.call(this);\n  this.ident = ident || new IdentParser();\n  this.value = value || new BlockParser();\n  this.s = s || 1;\n}\nAttrParser.prototype = Object.create(StringIteratee.prototype);\nAttrParser.prototype.constructor = AttrParser;\nAttrParser.prototype.feed = function (input) {\n  var c = 0;\n  var s = this.s;\n  var value = this.value;\n  var ident = this.ident;\n  if (s === 1) {\n    if (!input.isEmpty() && (c = input.head(), c === 64/*'@'*/)) {\n      input.step();\n      s = 2;\n    }\n    else if (!input.isEmpty()) return new StringIteratee.Error({expected: '\\'@\\'', found: c});\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  if (s === 2) {\n    ident = ident.feed(input);\n    if (ident.isDone()) s = 3;\n    else if (ident.isError()) return ident;\n  }\n  if (s === 3) {\n    if (!input.isEmpty() && input.head() === 40/*'('*/) {\n      input.step();\n      s = 4;\n    }\n    else if (!input.isEmpty() || input.isDone()) return new StringIteratee.Done(new Attr(ident.state()));\n  }\n  if (s === 4) {\n    while (!input.isEmpty() && (c = input.head(), isWhitespace(c))) input.step();\n    if (!input.isEmpty()) {\n      if (c === 41/*')'*/) {\n        input.step();\n        return new StringIteratee.Done(new Attr(ident.state()));\n      }\n      else s = 5;\n    }\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  if (s === 5) {\n    while ((!input.isEmpty() || input.isDone()) && value.isCont()) value = value.feed(input);\n    if (value.isDone()) s = 6;\n    else if (value.isError()) return value;\n  }\n  if (s === 6) {\n    while (!input.isEmpty() && (c = input.head(), isWhitespace(c))) input.step();\n    if (!input.isEmpty()) {\n      if (c === 41/*')'*/) {\n        input.step();\n        return new StringIteratee.Done(new Attr(ident.state(), value.state()));\n      }\n      else return new StringIteratee.Error({expected: '\\')\\'', found: c});\n    }\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  return new AttrParser(ident, value, s);\n};\n\n\nfunction BlockValueParser(builder, field, value, s) {\n  StringIteratee.call(this);\n  this.builder = builder || null;\n  this.field = field || null;\n  this.value = value || null;\n  this.s = s || 1;\n}\nBlockValueParser.prototype = Object.create(StringIteratee.prototype);\nBlockValueParser.prototype.constructor = BlockValueParser;\nBlockValueParser.prototype.feed = function (input) {\n  var c = 0;\n  var s = this.s;\n  var value = this.value;\n  var field = this.field;\n  var builder = this.builder;\n  while (!input.isEmpty() || input.isDone()) {\n    if (s === 1) {\n      if (!input.isEmpty()) {\n        c = input.head();\n        if (c === 64/*'@'*/) {\n          field = new AttrParser();\n          s = 2;\n        }\n        else if (c === 123/*'{'*/) {\n          builder = builder || new RecordBuilder();\n          value = new RecordParser(builder);\n          s = 5;\n        }\n        else if (c === 91/*'['*/) {\n          builder = builder || new RecordBuilder();\n          value = new MarkupParser(builder);\n          s = 5;\n        }\n        else if (c === 34/*'\"'*/) {\n          value = new StringParser();\n          s = 4;\n        }\n        else if (c === 37/*'%'*/) {\n          value = new DataParser();\n          s = 4;\n        }\n        else if (c === 45/*'-'*/ || c >= 48/*'0'*/ && c <= 57/*'9'*/) {\n          value = new NumberParser();\n          s = 4;\n        }\n        else if (isNameStartChar(c)) {\n          value = new IdentParser();\n          s = 4;\n        }\n        else if (!builder) return new StringIteratee.Done(Absent);\n        else return new StringIteratee.Done(builder.state());\n      }\n      else if (input.isDone()) {\n        if (!builder) return new StringIteratee.Done(Absent);\n        else return new StringIteratee.Done(builder.state());\n      }\n    }\n    if (s === 2) {\n      while ((!input.isEmpty() || input.isDone()) && field.isCont()) field = field.feed(input);\n      if (field.isDone()) {\n        builder = builder || new ValueBuilder();\n        builder.appendField(field.state());\n        field = null;\n        s = 3;\n      }\n      else if (field.isError()) return field;\n    }\n    if (s === 3) {\n      while (!input.isEmpty() && isSpace(input.head())) input.step();\n      if (!input.isEmpty()) s = 1;\n      else if (input.isDone()) return new StringIteratee.Done(builder.state());\n    }\n    if (s === 4) {\n      while ((!input.isEmpty() || input.isDone()) && value.isCont()) value = value.feed(input);\n      if (value.isDone()) {\n        builder = builder || new ValueBuilder();\n        builder.appendValue(value.state());\n        value = null;\n        s = 6;\n      }\n      else if (value.isError()) return value;\n    }\n    if (s === 5) {\n      while ((!input.isEmpty() || input.isDone()) && value.isCont()) value = value.feed(input);\n      if (value.isDone()) {\n        value = null;\n        s = 6;\n      }\n      else if (value.isError()) return value;\n    }\n    if (s === 6) {\n      while (!input.isEmpty() && isSpace(input.head())) input.step();\n      if (!input.isEmpty()) {\n        if (input.head() === 64/*'@'*/) {\n          field = new AttrParser();\n          s = 7;\n        }\n        else return new StringIteratee.Done(builder.state());\n      }\n      else if (input.isDone()) return new StringIteratee.Done(builder.state());\n    }\n    if (s === 7) {\n      while ((!input.isEmpty() || input.isDone()) && field.isCont()) field = field.feed(input);\n      if (field.isDone()) {\n        builder = builder || new ValueBuilder();\n        builder.appendField(field.state());\n        field = null;\n        s = 6;\n      }\n      else if (field.isError()) return field;\n    }\n  }\n  return new BlockValueParser(builder, field, value, s);\n};\n\n\nfunction InlineValueParser(builder, field, value, s) {\n  StringIteratee.call(this);\n  this.builder = builder || null;\n  this.field = field || null;\n  this.value = value || null;\n  this.s = s || 1;\n}\nInlineValueParser.prototype = Object.create(StringIteratee.prototype);\nInlineValueParser.prototype.constructor = InlineValueParser;\nInlineValueParser.prototype.feed = function (input) {\n  var c = 0;\n  var s = this.s;\n  var value = this.value;\n  var field = this.field;\n  var builder = this.builder;\n  while (!input.isEmpty() || input.isDone()) {\n    if (s === 1) {\n      if (!input.isEmpty()) {\n        c = input.head();\n        if (c === 64/*'@'*/) {\n          field = new AttrParser();\n          s = 2;\n        }\n        else if (c === 123/*'{'*/) {\n          if (builder) {\n            value = new RecordParser(builder);\n            s = 5;\n          }\n          else {\n            value = new RecordParser();\n            s = 4;\n          }\n        }\n        else if (c === 91/*'['*/) {\n          if (builder) {\n            value = new MarkupParser(builder);\n            s = 5;\n          }\n          else {\n            value = new MarkupParser();\n            s = 4;\n          }\n        }\n        else if (!builder) return new StringIteratee.Done(Absent);\n        else return new StringIteratee.Done(builder.state());\n      }\n      else if (input.isDone()) {\n        if (!builder) return new StringIteratee.Done(Absent);\n        else return new StringIteratee.Done(builder.state());\n      }\n    }\n    if (s === 2) {\n      while ((!input.isEmpty() || input.isDone()) && field.isCont()) field = field.feed(input);\n      if (field.isDone()) {\n        builder = builder || new ValueBuilder();\n        builder.appendField(field.state());\n        field = null;\n        s = 3;\n      }\n      else if (field.isError()) return field;\n    }\n    if (s === 3) {\n      while (!input.isEmpty() && isSpace(input.head())) input.step();\n      if (!input.isEmpty()) s = 1;\n      else if (input.isDone()) return new StringIteratee.Done(builder.state());\n    }\n    if (s === 4) {\n      while ((!input.isEmpty() || input.isDone()) && value.isCont()) value = value.feed(input);\n      if (value.isDone()) {\n        builder = builder || new ValueBuilder();\n        builder.appendValue(value.state());\n        return new StringIteratee.Done(builder.state());\n      }\n      else if (value.isError()) return value;\n    }\n    if (s === 5) {\n      while ((!input.isEmpty() || input.isDone()) && value.isCont()) value = value.feed(input);\n      if (value.isDone()) return new StringIteratee.Done(builder.state());\n      else if (value.isError()) return value;\n    }\n  }\n  return new InlineValueParser(builder, field, value, s);\n};\n\n\nfunction RecordParser(builder, key, value, s) {\n  StringIteratee.call(this);\n  this.builder = builder || null;\n  this.key = key || null;\n  this.value = value || null;\n  this.s = s || 1;\n}\nRecordParser.prototype = Object.create(StringIteratee.prototype);\nRecordParser.prototype.constructor = RecordParser;\nRecordParser.prototype.feed = function (input) {\n  var c = 0;\n  var s = this.s;\n  var value = this.value;\n  var key = this.key;\n  var builder = this.builder || new RecordBuilder();\n  if (s === 1) {\n    if (!input.isEmpty()) {\n      c = input.head();\n      if (c === 123/*'{'*/) {\n        input.step();\n        s = 2;\n      }\n      else return new StringIteratee.Error({expected: '\\'{\\'', found: c});\n    }\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  while (!input.isEmpty() || input.isDone()) {\n    if (s === 2) {\n      while (!input.isEmpty() && (c = input.head(), isWhitespace(c))) input.step();\n      if (!input.isEmpty()) {\n        if (c === 125/*'}'*/) {\n          input.step();\n          return new StringIteratee.Done(builder.state());\n        }\n        else s = 3;\n      }\n      else if (input.isDone()) return StringIteratee.unexpectedEOF;\n    }\n    if (s === 3) {\n      key = key || new BlockValueParser();\n      while ((!input.isEmpty() || input.isDone()) && key.isCont()) key = key.feed(input);\n      if (key.isDone()) s = 4;\n      else if (key.isError()) return key;\n    }\n    if (s === 4) {\n      while (!input.isEmpty() && (c = input.head(), isSpace(c))) input.step();\n      if (!input.isEmpty()) {\n        if (c === 58/*':'*/) {\n          input.step();\n          s = 5;\n        }\n        else {\n          builder.appendValue(key.state());\n          key = null;\n          s = 7;\n        }\n      }\n      else if (input.isDone()) {\n        builder.appendValue(key.state());\n        return new StringIteratee.Done(builder.state());\n      }\n    }\n    if (s === 5) {\n      while (!input.isEmpty() && isSpace(input.head())) input.step();\n      if (!input.isEmpty()) s = 6;\n      else if (input.isDone()) {\n        builder.appendField(new Slot(key.state()));\n        return new StringIteratee.Done(builder.state());\n      }\n    }\n    if (s === 6) {\n      value = value || new BlockValueParser();\n      while ((!input.isEmpty() || input.isDone()) && value.isCont()) value = value.feed(input);\n      if (value.isDone()) {\n        builder.appendField(new Slot(key.state(), value.state()));\n        key = null;\n        value = null;\n        s = 7;\n      }\n      else if (value.isError()) return value;\n    }\n    if (s === 7) {\n      while (!input.isEmpty() && (c = input.head(), isSpace(c))) input.step();\n      if (!input.isEmpty()) {\n        if (c === 44/*','*/ || c === 59/*';'*/ || isNewline(c)) {\n          input.step();\n          s = 2;\n        }\n        else if (c === 125/*'}'*/) {\n          input.step();\n          return new StringIteratee.Done(builder.state());\n        }\n       else return new StringIteratee.Error({expected: '\\'}\\', \\';\\', \\',\\', or newline', found: c});\n      }\n      else if (input.isDone()) return StringIteratee.unexpectedEOF;\n    }\n  }\n  return new RecordParser(builder, key, value, s);\n};\n\n\nfunction MarkupParser(builder, text, value, s) {\n  StringIteratee.call(this);\n  this.builder = builder || null;\n  this.text = text || null;\n  this.value = value || null;\n  this.s = s || 1;\n}\nMarkupParser.prototype = Object.create(StringIteratee.prototype);\nMarkupParser.prototype.constructor = MarkupParser;\nMarkupParser.prototype.feed = function (input) {\n  var c = 0;\n  var s = this.s;\n  var value = this.value;\n  var text = this.text;\n  var builder = this.builder;\n  if (s === 1) {\n    if (!input.isEmpty()) {\n      c = input.head();\n      if (c === 91/*'['*/) {\n        input.step();\n        s = 2;\n      }\n      else return new StringIteratee.Error({expected: '\\'[\\'', found: c});\n    }\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  while (!input.isEmpty() || input.isDone()) {\n    if (s === 2) {\n      while (!input.isEmpty() && (c = input.head(),\n          c !== 64/*'@'*/ &&\n          c !== 91/*'['*/ &&\n          c !== 92/*'\\\\'*/ &&\n          c !== 93/*']'*/ &&\n          c !== 123/*'{'*/ &&\n          c !== 125/*'}'*/)) {\n        input.step();\n        text = text || new StringBuilder();\n        text.append(c);\n      }\n      if (!input.isEmpty()) {\n        if (c === 93/*']'*/) {\n          input.step();\n          builder = builder || new RecordBuilder();\n          if (text) builder.appendValue(text.state());\n          return new StringIteratee.Done(builder.state());\n        }\n        else if (c === 64/*'@'*/) {\n          builder = builder || new RecordBuilder();\n          if (text) {\n            builder.appendValue(text.state());\n            text = null;\n          }\n          value = new InlineValueParser();\n          s = 3;\n        }\n        else if (c === 123/*'{'*/) {\n          builder = builder || new RecordBuilder();\n          if (text) {\n            builder.appendValue(text.state());\n            text = null;\n          }\n          value = new RecordParser(builder);\n          s = 4;\n        }\n        else if (c === 91/*'['*/) {\n          builder = builder || new RecordBuilder();\n          if (text) {\n            builder.appendValue(text.state());\n            text = null;\n          }\n          value = new MarkupParser(builder);\n          s = 4;\n        }\n        else if (c === 92/*'\\\\'*/) {\n          input.step();\n          s = 5;\n        }\n        else new StringIteratee.Error({found: c});\n      }\n      else if (input.isDone()) return StringIteratee.unexpectedEOF;\n    }\n    if (s === 3) {\n      while ((!input.isEmpty() || input.isDone()) && value.isCont()) value = value.feed(input);\n      if (value.isDone()) {\n        builder.appendValue(value.state());\n        value = null;\n        s = 2;\n      }\n      else if (value.isError()) return value;\n    }\n    if (s === 4) {\n      while ((!input.isEmpty() || input.isDone()) && value.isCont()) value = value.feed(input);\n      if (value.isDone()) {\n        value = null;\n        s = 2;\n      }\n      else if (value.isError()) return value;\n    }\n    if (s === 5) {\n      if (!input.isEmpty()) {\n        c = input.head();\n        text = text || new StringBuilder();\n        if (c === 34/*'\"'*/ ||\n            c === 47/*'/'*/ ||\n            c === 64/*'@'*/ ||\n            c === 91/*'['*/ ||\n            c === 92/*'\\\\'*/ ||\n            c === 93/*']'*/ ||\n            c === 123/*'{'*/ ||\n            c === 125/*'}'*/) {\n          input.step();\n          text.append(c);\n          s = 2;\n        }\n        else if (c === 98/*'b'*/) {\n          input.step();\n          text.append(8/*'\\b'*/);\n          s = 2;\n        }\n        else if (c === 102/*'f'*/) {\n          input.step();\n          text.append(12/*'\\f'*/);\n          s = 2;\n        }\n        else if (c === 110/*'n'*/) {\n          input.step();\n          text.append(10/*'\\n'*/);\n          s = 2;\n        }\n        else if (c === 114/*'r'*/) {\n          input.step();\n          text.append(13/*'\\r'*/);\n          s = 2;\n        }\n        else if (c === 116/*'t'*/) {\n          input.step();\n          text.append(9/*'\\t'*/);\n          s = 2;\n        }\n        else return new StringIteratee.Error({expected: 'escape character', found: c});\n      }\n      else if (input.isDone()) return StringIteratee.unexpectedEOF;\n    }\n  }\n  return new MarkupParser(builder, text, value, s);\n};\n\n\nfunction StringParser(text, s) {\n  StringIteratee.call(this);\n  this.text = text || null;\n  this.s = s || 1;\n}\nStringParser.prototype = Object.create(StringIteratee.prototype);\nStringParser.prototype.constructor = StringParser;\nStringParser.prototype.feed = function (input) {\n  var c = 0;\n  var s = this.s;\n  var text = this.text;\n  if (s === 1) {\n    if (!input.isEmpty() && (c = input.head(), c === 34/*'\"'*/)) {\n      input.step();\n      s = 2;\n    }\n    else if (!input.isEmpty()) return new StringIteratee.Error({expected: '\\'\"\\'', found: c});\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  while (!input.isEmpty() || input.isDone()) {\n    if (s === 2) {\n      text = text || new StringBuilder();\n      while (!input.isEmpty() && (c = input.head(), c !== 34/*'\"'*/ && c !== 92/*'\\\\'*/)) {\n        input.step();\n        text.append(c);\n      }\n      if (!input.isEmpty()) {\n        if (c === 34/*'\"'*/) {\n          input.step();\n          return new StringIteratee.Done(text.state());\n        }\n        else if (c === 92/*'\\\\'*/) {\n          input.step();\n          s = 3;\n        }\n      }\n      else if (input.isDone()) return StringIteratee.unexpectedEOF;\n    }\n    if (s === 3) {\n      if (!input.isEmpty()) {\n        c = input.head();\n        if (c === 34/*'\"'*/ ||\n            c === 47/*'/'*/ ||\n            c === 64/*'@'*/ ||\n            c === 91/*'['*/ ||\n            c === 92/*'\\\\'*/ ||\n            c === 93/*']'*/ ||\n            c === 123/*'{'*/ ||\n            c === 125/*'}'*/) {\n          input.step();\n          text.append(c);\n          s = 2;\n        }\n        else if (c === 98/*'b'*/) {\n          input.step();\n          text.append(8/*'\\b'*/);\n          s = 2;\n        }\n        else if (c === 102/*'f'*/) {\n          input.step();\n          text.append(12/*'\\f'*/);\n          s = 2;\n        }\n        else if (c === 110/*'n'*/) {\n          input.step();\n          text.append(10/*'\\n'*/);\n          s = 2;\n        }\n        else if (c === 114/*'r'*/) {\n          input.step();\n          text.append(13/*'\\r'*/);\n          s = 2;\n        }\n        else if (c === 116/*'t'*/) {\n          input.step();\n          text.append(9/*'\\t'*/);\n          s = 2;\n        }\n        else return new StringIteratee.Error({expected: 'escape character', found: c});\n      }\n      else if (input.isDone()) return StringIteratee.unexpectedEOF;\n    }\n  }\n  return new StringParser(text, s);\n};\n\n\nfunction DataParser(data, s) {\n  StringIteratee.call(this);\n  this.data = data || null;\n  this.s = s || 1;\n}\nDataParser.prototype = Object.create(StringIteratee.prototype);\nDataParser.prototype.constructor = DataParser;\nDataParser.prototype.feed = function (input) {\n  var c = 0;\n  var s = this.s;\n  var data = this.data || new DataBuilder();\n  if (s === 1) {\n    if (!input.isEmpty() && (c = input.head(), c === 37/*'%'*/)) {\n      input.step();\n      s = 2;\n    }\n    else if (!input.isEmpty()) return new StringIteratee.Error({expected: '\\'%\\'', found: c});\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  while (!input.isEmpty() || input.isDone()) {\n    if (s === 2) {\n      if (!input.isEmpty() && (c = input.head(), isBase64Char(c))) {\n        input.step();\n        data.appendBase64Char(c);\n        s = 3;\n      }\n      else if (!input.isEmpty() || input.isDone()) return new StringIteratee.Done(data.state());\n    }\n    if (s === 3) {\n      if (!input.isEmpty() && (c = input.head(), isBase64Char(c))) {\n        input.step();\n        data.appendBase64Char(c);\n        s = 4;\n      }\n      else if (!input.isEmpty()) return new StringIteratee.Error({expected: 'base64 digit', found: c});\n      else if (input.isDone()) return StringIteratee.unexpectedEOF;\n    }\n    if (s === 4) {\n      if (!input.isEmpty() && (c = input.head(), isBase64Char(c) || c === 61/*'='*/)) {\n        input.step();\n        data.appendBase64Char(c);\n        if (c !== 61/*'='*/) s = 5;\n        else s = 6;\n      }\n      else if (!input.isEmpty()) return new StringIteratee.Error({expected: 'base64 digit', found: c});\n      else if (input.isDone()) return StringIteratee.unexpectedEOF;\n    }\n    if (s === 5) {\n      if (!input.isEmpty() && (c = input.head(), isBase64Char(c) || c === 61/*'='*/)) {\n        input.step();\n        data.appendBase64Char(c);\n        if (c !== 61/*'='*/) s = 2;\n        else return new StringIteratee.Done(data.state());\n      }\n      else if (!input.isEmpty()) return new StringIteratee.Error({expected: 'base64 digit', found: c});\n      else if (input.isDone()) return StringIteratee.unexpectedEOF;\n    }\n    else if (s === 6) {\n      if (!input.isEmpty() && (c = input.head(), c === 61/*'='*/)) {\n        input.step();\n        data.appendBase64Char(c);\n        return new StringIteratee.Done(data.state());\n      }\n      else if (!input.isEmpty()) return new StringIteratee.Error({expected: '\\'=\\'', found: c});\n      else if (input.isDone()) return StringIteratee.unexpectedEOF;\n    }\n  }\n  return new DataParser(data, s);\n};\n\n\nfunction NumberParser(builder, s) {\n  StringIteratee.call(this);\n  this.builder = builder || null;\n  this.s = s || 1;\n}\nNumberParser.prototype = Object.create(StringIteratee.prototype);\nNumberParser.prototype.constructor = NumberParser;\nNumberParser.prototype.feed = function (input) {\n  var c = 0;\n  var s = this.s;\n  var builder = this.builder || new StringBuilder();\n  if (s === 1) {\n    if (!input.isEmpty()) {\n      c = input.head();\n      if (c === 45/*'-'*/) {\n        input.step();\n        builder.append(c);\n      }\n      s = 2;\n    }\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  if (s === 2) {\n    if (!input.isEmpty()) {\n      c = input.head();\n      if (c === 48/*'0'*/) {\n        input.step();\n        builder.append(c);\n        s = 4;\n      }\n      else if (c >= 49/*'1'*/ && c <= 57/*'9'*/) {\n        input.step();\n        builder.append(c);\n        s = 3;\n      }\n      else return new StringIteratee.Error({expected: 'digit', found: c});\n    }\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  if (s === 3) {\n    while (!input.isEmpty() && (c = input.head(), c >= 48/*'0'*/ && c <= 57/*'9'*/)) {\n      input.step();\n      builder.append(c);\n    }\n    if (!input.isEmpty()) s = 4;\n    else if (input.isDone()) return new StringIteratee.Done(Number(builder.state()));\n  }\n  if (s === 4) {\n    if (!input.isEmpty()) {\n      c = input.head();\n      if (c === 46/*'.'*/) {\n        input.step();\n        builder.append(c);\n        s = 5;\n      }\n      else if (c === 69/*'E'*/ || c === 101/*'e'*/) {\n        input.step();\n        builder.append(c);\n        s = 8;\n      }\n      else return new StringIteratee.Done(Number(builder.state()));\n    }\n    else if (input.isDone()) return new StringIteratee.Done(Number(builder.state()));\n  }\n  if (s === 5) {\n    if (!input.isEmpty()) {\n      c = input.head();\n      if (c >= 48/*'0'*/ && c <= 57/*'9'*/) {\n        input.step();\n        builder.append(c);\n        s = 6;\n      }\n      else return new StringIteratee.Error({expected: 'digit', found: c});\n    }\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  if (s === 6) {\n    while (!input.isEmpty() && (c = input.head(), c >= 48/*'0'*/ && c <= 57/*'9'*/)) {\n      input.step();\n      builder.append(c);\n    }\n    if (!input.isEmpty()) s = 7;\n    else if (input.isDone()) return new StringIteratee.Done(Number(builder.state()));\n  }\n  if (s === 7) {\n    c = input.head();\n    if (c === 69/*'E'*/ || c === 101/*'e'*/) {\n      input.step();\n      builder.append(c);\n      s = 8;\n    }\n    else return new StringIteratee.Done(Number(builder.state()));\n  }\n  if (s === 8) {\n    if (!input.isEmpty()) {\n      c = input.head();\n      if (c === 43/*'+'*/ || c === 45/*'-'*/) {\n        input.step();\n        builder.append(c);\n      }\n      s = 9;\n    }\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  if (s === 9) {\n    if (!input.isEmpty()) {\n      c = input.head();\n      if (c >= 48/*'0'*/ && c <= 57/*'9'*/) {\n        input.step();\n        builder.append(c);\n        s = 10;\n      }\n      else return new StringIteratee.Error({expected: 'digit', found: c});\n    }\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  if (s === 10) {\n    while (!input.isEmpty() && (c = input.head(), c >= 48/*'0'*/ && c <= 57/*'9'*/)) {\n      input.step();\n      builder.append(c);\n    }\n    if (!input.isEmpty() || input.isDone()) return new StringIteratee.Done(Number(builder.state()));\n  }\n  return new NumberParser(builder, s);\n};\n\nfunction IdentParser(builder, s) {\n  StringIteratee.call(this);\n  this.builder = builder || null;\n  this.s = s || 1;\n}\nIdentParser.prototype = Object.create(StringIteratee.prototype);\nIdentParser.prototype.constructor = IdentParser;\nIdentParser.prototype.feed = function (input) {\n  var c = 0;\n  var s = this.s;\n  var builder = this.builder;\n  if (s === 1) {\n    if (!input.isEmpty() && (c = input.head(), isNameStartChar(c))) {\n      builder = builder || new StringBuilder();\n      input.step();\n      builder.append(c);\n      s = 2;\n    }\n    else if (!input.isEmpty()) return new StringIteratee.Error({expected: 'identitifer', found: c});\n    else if (input.isDone()) return StringIteratee.unexpectedEOF;\n  }\n  if (s === 2) {\n    while (!input.isEmpty() && (c = input.head(), isNameChar(c))) {\n      input.step();\n      builder.append(c);\n    }\n    if (!input.isEmpty() || input.isDone()) {\n      var value = builder.state();\n      if (value === 'true') value = true;\n      else if (value === 'false') value = false;\n      return new StringIteratee.Done(value);\n    }\n  }\n  return new IdentParser(builder, s);\n};\n\n\nfunction ReconWriter(builder) {\n  Object.defineProperty(this, 'builder', {value: builder || new StringBuilder()});\n}\nReconWriter.prototype.writeValue = function (value, inMarkup) {\n  if (value instanceof Record) this.writeRecord(value, inMarkup);\n  else if (typeof value === 'string') this.writeText(value, inMarkup);\n  else if (typeof value === 'number') this.writeNumber(value);\n  else if (typeof value === 'boolean') this.writeBool(value);\n  else if (value instanceof Uint8Array) this.writeData(value);\n};\nReconWriter.prototype.writeAttr = function(attr) {\n  this.builder.append(64/*'@'*/);\n  this.writeIdent(attr.key);\n  if (!attr.value.isExtant) {\n    this.builder.append(40/*'('*/);\n    this.writeBlock(attr.value);\n    this.builder.append(41/*')'*/);\n  }\n};\nReconWriter.prototype.writeItem = function(item) {\n  if (item.isField) {\n    this.writeValue(item.key);\n    this.builder.append(58/*':'*/);\n    if (!item.value.isExtant) this.writeValue(item.value);\n  }\n  else this.writeValue(item);\n};\nReconWriter.prototype.writeBlock = function (value) {\n  if (!(value instanceof Record)) this.writeValue(value);\n  else if (value.isMarkup()) this.writeMarkup(value);\n  else if (value.hasAttrs()) this.writeRecord(value);\n  else {\n    var items = value.iterator();\n    if (!items.isEmpty()) {\n      this.writeItem(items.next());\n      while (!items.isEmpty()) {\n        this.builder.append(44/*','*/);\n        this.writeItem(items.next());\n      }\n    }\n  }\n};\nReconWriter.prototype.writeRecord = function (record, inMarkup) {\n  if (record.isMarkup()) this.writeMarkup(record);\n  else {\n    var items = record.iterator();\n    var item;\n    var hasAttrs = false;\n    while (!items.isEmpty() && (item = items.head(), item.isAttr)) {\n      this.writeAttr(item);\n      items.step();\n      hasAttrs = true;\n    }\n    if (!items.isEmpty()) {\n      items.step();\n      if (hasAttrs && items.isEmpty()) {\n        if (inMarkup) {\n          if (item instanceof Record || typeof item === 'string') this.writeValue(item, inMarkup);\n          else {\n            this.builder.append(123/*'{'*/);\n            this.writeItem(item);\n            this.builder.append(125/*'}'*/);\n          }\n        }\n        else if (item instanceof Record || item.isSlot) {\n          this.builder.append(123/*'{'*/);\n          this.writeItem(item);\n          this.builder.append(125/*'}'*/);\n        }\n        else {\n          this.builder.append(32/*' '*/);\n          this.writeValue(item);\n        }\n      }\n      else if (!items.isEmpty() && items.isAllAttrs()) {\n        if (item instanceof Record || item.isSlot) {\n          this.builder.append(123/*'{'*/);\n          this.writeItem(item);\n          this.builder.append(125/*'}'*/);\n        }\n        else {\n          if (hasAttrs) this.builder.append(32/*' '*/);\n          this.writeValue(item);\n        }\n      }\n      else {\n        this.builder.append(123/*'{'*/);\n        this.writeItem(item);\n        while (!items.isEmpty() && ((item = items.head(), !item.isAttr) || !items.isAllAttrs)) {\n          this.builder.append(44/*','*/);\n          this.writeItem(item);\n          items.step();\n        }\n        this.builder.append(125/*'}'*/);\n      }\n      while (!items.isEmpty()) this.writeAttr(items.next());\n    }\n    else if (!hasAttrs) {\n      this.builder.append(123/*'{'*/);\n      this.builder.append(125/*'}'*/);\n    }\n  }\n};\nReconWriter.prototype.writeMarkup = function (record) {\n  var items = record.iterator();\n  var item;\n  var hasAttrs = false;\n  while (!items.isEmpty() && (item = items.head(), item.isAttr)) {\n    this.writeAttr(item);\n    items.step();\n    hasAttrs = true;\n  }\n  this.builder.append(91/*'['*/);\n  while (!items.isEmpty()) {\n    item = items.head();\n    if (typeof item === 'string') {\n      var cs = new StringIterator(item);\n      while (!cs.isEmpty()) {\n        var c = cs.head();\n        switch (c) {\n          case 64/*'@'*/:\n          case 91/*'['*/:\n          case 92/*'\\\\'*/:\n          case 93/*']'*/:\n          case 123/*'{'*/:\n          case 125/*'}'*/: this.builder.append(92/*'\\\\'*/); this.builder.append(c); break;\n          default: this.builder.append(c);\n        }\n        cs.step();\n      }\n    }\n    else if (item instanceof Record) this.writeRecord(item, true);\n    else {\n      this.builder.append(123/*'{'*/);\n      this.writeItem(item);\n      this.builder.append(125/*'}'*/);\n    }\n    items.step();\n  }\n  this.builder.append(93/*']'*/);\n};\nReconWriter.prototype.writeText = function (text, inMarkup) {\n  function isIdent() {\n    var cs = new StringIterator(text);\n    if (cs.isEmpty() || !isNameStartChar(cs.head())) return false;\n    cs.step();\n    while (!cs.isEmpty() && isNameChar(cs.head())) cs.step();\n    return cs.isEmpty();\n  }\n  if (inMarkup) this.writeTextMarkup(text);\n  else if (isIdent()) this.writeIdent(text);\n  else this.writeString(text);\n};\nReconWriter.prototype.writeString = function (string) {\n  var cs = new StringIterator(string);\n  this.builder.append(34/*'\"'*/);\n  while (!cs.isEmpty()) {\n    var c = cs.head();\n    switch (c) {\n      case 34/*'\"'*/:\n      case 92/*'\\\\'*/: this.builder.append(92/*'\\\\'*/); this.builder.append(c); break;\n      case 8/*'\\b'*/: this.builder.append(92/*'\\\\'*/); this.builder.append(98/*'b'*/); break;\n      case 12/*'\\f'*/: this.builder.append(92/*'\\\\'*/); this.builder.append(102/*'f'*/); break;\n      case 10/*'\\n'*/: this.builder.append(92/*'\\\\'*/); this.builder.append(110/*'n'*/); break;\n      case 13/*'\\r'*/: this.builder.append(92/*'\\\\'*/); this.builder.append(114/*'r'*/); break;\n      case 9/*'\\t'*/: this.builder.append(92/*'\\\\'*/); this.builder.append(116/*'t'*/); break;\n      default: this.builder.append(c);\n    }\n    cs.step();\n  }\n  this.builder.append(34/*'\"'*/);\n};\nReconWriter.prototype.writeIdent = function (ident) {\n  this.builder.appendString(ident);\n};\nReconWriter.prototype.writeTextMarkup = function (text) {\n  var cs = new StringIterator(text);\n  this.builder.append(91/*'['*/);\n  while (!cs.isEmpty()) {\n    var c = cs.head();\n    switch (c) {\n      case 64/*'@'*/:\n      case 91/*'['*/:\n      case 92/*'\\\\'*/:\n      case 93/*']'*/:\n      case 123/*'{'*/:\n      case 125/*'}'*/: this.builder.append(92/*'\\\\'*/); this.builder.append(c); break;\n      default: this.builder.append(c);\n    }\n    cs.step();\n  }\n  this.builder.append(93/*']'*/);\n};\nReconWriter.prototype.writeNumber = function (number) {\n  this.builder.appendString(number.toString());\n};\nReconWriter.prototype.writeBool = function (bool) {\n  this.builder.appendString(bool.toString());\n};\nReconWriter.prototype.writeData = function (data) {\n  function encodeBase64Digit(x) {\n    if      (x >=  0 && x < 26) return x + 65/*'A'*/;\n    else if (x >= 26 && x < 52) return x + 71/*('a' - 26)*/;\n    else if (x >= 52 && x < 62) return x - 4/*-('0' - 52)*/;\n    else if (x === 62) return 43/*'+'*/;\n    else if (x === 63) return 47/*'/'*/;\n  }\n  this.builder.append(37/*'%'*/);\n  var i = 0;\n  var n = data.length;\n  var x, y, z;\n  while (i + 2 < n) {\n    x = data[i];\n    y = data[i + 1];\n    z = data[i + 2];\n    this.builder.append(encodeBase64Digit(x >>> 2));\n    this.builder.append(encodeBase64Digit(((x << 4) | (y >>> 4)) & 0x3F));\n    this.builder.append(encodeBase64Digit(((y << 2) | (z >>> 6)) & 0x3F));\n    this.builder.append(encodeBase64Digit(z & 0x3F));\n    i += 3;\n  }\n  if (i + 1 < n) {\n    x = data[i];\n    y = data[i + 1];\n    this.builder.append(encodeBase64Digit(x >>> 2));\n    this.builder.append(encodeBase64Digit(((x << 4) | (y >>> 4)) & 0x3F));\n    this.builder.append(encodeBase64Digit((y << 2) & 0x3F));\n    this.builder.append(61/*'='*/);\n    i += 2;\n  }\n  else if (i < n) {\n    x = data[i];\n    this.builder.append(encodeBase64Digit(x >>> 2));\n    this.builder.append(encodeBase64Digit((x << 4) & 0x3F));\n    this.builder.append(61/*'='*/);\n    this.builder.append(61/*'='*/);\n    i += 1;\n  }\n};\nReconWriter.prototype.state = function () {\n  return this.builder.state();\n};\n\n\nmodule.exports = function () {\n  return coerce.apply(null, arguments);\n};\nexports = module.exports;\nexports.parse = parse;\nexports.stringify = stringify;\nexports.objectify = objectify;\nexports.Record = Record;\nexports.Field = Field;\nexports.Attr = Attr;\nexports.Slot = Slot;\nexports.attr = attr;\nexports.slot = slot;\nexports.base64 = base64;\nexports.extant = Extant;\nexports.absent = Absent;\nexports.empty = empty;\nexports.builder = builder;\nexports.compare = compare;\n\n},{}]},{},[1])(1)\n});"],"sourceRoot":"/source/"}