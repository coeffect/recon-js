!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.recon=e()}}(function(){return function e(t,i,n){function r(p,o){if(!i[p]){if(!t[p]){var u="function"==typeof require&&require;if(!o&&u)return u(p,!0);if(s)return s(p,!0);var f=new Error("Cannot find module '"+p+"'");throw f.code="MODULE_NOT_FOUND",f}var a=i[p]={exports:{}};t[p][0].call(a.exports,function(e){var i=t[p][1][e];return r(i?i:e)},a,a.exports,e,t,i,n)}return i[p].exports}for(var s="function"==typeof require&&require,p=0;p<n.length;p++)r(n[p]);return r}({1:[function(e,t,i){"use strict";function n(e){return null===e?T:e instanceof d||"string"==typeof e||"number"==typeof e||e instanceof Uint8Array?e:"boolean"==typeof e?e.toString():Array.isArray(e)?r(e):"object"==typeof e?e.toRecon&&"function"==typeof e.toRecon?e.toRecon():s(e):z}function r(e){for(var t=new w,i=e.length,r=0;i>r;){var s=n(e[r]);t.appendValue(s),r+=1}return t.state()}function s(e){var t,i,r,s=new w,p=e["@"];for(t in p)i=n(t),"string"==typeof i&&(r=n(p[t]),r.isAbsent||s.appendField(new l(i,r)));for(t in e)"@"!==t&&(i=n(t),i.isAbsent||(r=n(e[t]),r.isAbsent||s.appendField(new c(i,r))));return s.state()}function p(e){var t=new m(e),i=(new A).run(t);return i.state()}function o(e){var t=new _;return t.writeBlock(e),t.state()}function u(e){return null===e||e.isExtant?null:e.isAbsent?void 0:e instanceof d?e.isArray()?f(e):a(e):e}function f(e){for(var t=[],i=e.iterator();!i.isEmpty();){var n=u(i.head());t.push(n),i.step()}return t}function a(e){for(var t,i,n=e.iterator(),r={},s={"@":r},p=!1,o=0;!n.isEmpty();){var f=n.head();f.isField?(t=u(f.key),i=u(f.value),f.isAttr?(r[t]=i,p=!0):s[t]=i):(i=u(f.value),s[o]=i),n.step(),o+=1}return p||delete s["@"],s}function d(e,t){var i=function(i){var n=t[i];return"undefined"==typeof n&&"number"==typeof i&&(n=e[i]),n};return i.__proto__=d.prototype,i.size=e.length,i.isArray=function(){return e.length>=0&&0===Object.getOwnPropertyNames(t).length},i.iterator=function(){return new y(e)},i}function h(){}function l(e,t){h.call(this),this.key=e,this.value="undefined"==typeof t?T:t}function c(e,t){h.call(this),this.key=e,this.value="undefined"==typeof t?T:t}function y(e,t){this.items=e,this.index=t||0}function w(){this.items=[],this.index={}}function E(){this.items=null,this.index=null,this.value=null}function m(e,t){this.string=e||"",this.index=t||0}function b(){}function D(){this.string=""}function v(){this.buffer=null,this.offset=0,this.aliased=!0,this.p=0,this.q=0,this.r=0,this.s=0}function x(e){return 32===e||9===e}function g(e){return 10===e||13===e}function O(e){return x(e)||g(e)}function F(e){return e>=65&&90>=e||95===e||e>=97&&122>=e||e>=192&&214>=e||e>=216&&246>=e||e>=248&&767>=e||e>=880&&893>=e||e>=895&&8191>=e||e>=8204&&8205>=e||e>=8304&&8591>=e||e>=11264&&12271>=e||e>=12289&&55295>=e||e>=63744&&64975>=e||e>=65008&&65533>=e||e>=65536&&983039>=e}function C(e){return 45===e||e>=48&&57>=e||e>=65&&90>=e||95===e||e>=97&&122>=e||183===e||e>=192&&214>=e||e>=216&&246>=e||e>=248&&893>=e||e>=895&&8191>=e||e>=8204&&8205>=e||e>=8255&&8256>=e||e>=8304&&8591>=e||e>=11264&&12271>=e||e>=12289&&55295>=e||e>=63744&&64975>=e||e>=65008&&65533>=e||e>=65536&&983039>=e}function k(e){return e>=48&&57>=e||e>=65&&90>=e||e>=97&&122>=e||43===e||45===e||47===e||95===e}function A(e){b.call(this),this.value=e||new B}function B(e,t,i,n){b.call(this),this.builder=e||null,this.key=t||null,this.value=i||null,this.s=n||1}function V(e,t,i){b.call(this),this.ident=e||new U,this.value=t||new B,this.s=i||1}function j(e,t,i,n){b.call(this),this.builder=e||null,this.field=t||null,this.value=i||null,this.s=n||1}function S(e,t,i,n){b.call(this),this.builder=e||null,this.field=t||null,this.value=i||null,this.s=n||1}function N(e,t,i,n){b.call(this),this.builder=e||null,this.key=t||null,this.value=i||null,this.s=n||1}function q(e,t,i,n){b.call(this),this.builder=e||null,this.text=t||null,this.value=i||null,this.s=n||1}function M(e,t){b.call(this),this.text=e||null,this.s=t||1}function I(e,t){b.call(this),this.data=e||null,this.s=t||1}function R(e,t){b.call(this),this.builder=e||null,this.s=t||1}function U(e,t){b.call(this),this.builder=e||null,this.s=t||1}function _(e){this.builder=e||new D}d.prototype=Object.create(Function.prototype),d.prototype.constructor=d,d.prototype.isEmpty=function(){return 0===this.size},d.prototype.isMarkup=function(){function e(e){for(var t=new m(e);!t.isEmpty()&&x(t.head());)t.step();return t.isEmpty()}for(var t=this.iterator(),i=!1,n=!1,r=0;!t.isEmpty();){var s=t.head();if("string"!=typeof s){if(i)return!1;i=!0,n=!0}else i&&!e(s)?(i=!1,r+=1):0===r&&(r=1);t.step()}return n&&r>=2},d.prototype.toString=function(){var e=new _;return e.writeRecord(this),e.state()},h.prototype.isField=!0,h.prototype.isAttr=!1,h.prototype.isSlot=!1,l.prototype=Object.create(h.prototype),l.prototype.constructor=l,l.prototype.isAttr=!0,c.prototype=Object.create(h.prototype),c.prototype.constructor=c,c.prototype.isSlot=!0;var T={isExtant:!0},z={isAbsent:!0};y.prototype.isEmpty=function(){return this.index>=this.items.length},y.prototype.head=function(){if(this.index>=this.items.length)throw"head of empty iterator";return this.items[this.index]},y.prototype.step=function(){if(this.index>=this.items.length)throw"empty iterator step";this.index+=1},w.prototype.appendField=function(e){this.items.push(e),this.index[e.key]=e.value},w.prototype.appendValue=function(e){this.items.push(e)},w.prototype.state=function(){return new d(this.items,this.index)},E.prototype.appendField=function(e){this.items||(this.items=[],this.index={},this.value&&(this.items.push(this.value),this.value=null)),this.items.push(e),this.index[e.key]=e.value},E.prototype.appendValue=function(e){this.items?this.items.push(e):this.value?(this.items=[],this.index={},this.items.push(this.value),this.value=null,this.items.push(e)):this.value=e},E.prototype.state=function(){return this.value?this.value:this.items?new d(this.items,this.index):z},m.prototype.isDone=function(){return!1},m.prototype.isEmpty=function(){return this.index>=this.string.length},m.prototype.head=function(){var e=this.string.charCodeAt(this.index);if(55295>=e||e>=57344)return e;if(56319>=e&&this.index+1<this.string.length){var t=this.string.charCodeAt(this.index+1);return t>=56320&&57343>=t?((1023&e)<<10|1023&t)+65536:65533}return 65533},m.prototype.step=function(){var e=this.string.charCodeAt(this.index);if(55295>=e||e>=57344)this.index+=1;else if(56319>=e&&this.index+1<this.string.length){var t=this.string.charCodeAt(this.index+1);this.index+=t>=56320&&57343>=t?2:1}else this.index+=1},m.Done={isDone:function(){return!0},isEmpty:function(){return!0},head:function(){throw"head of empty iterator"},step:function(){throw"empty iterator step"}},m.Done.prototype=Object.create(m.prototype),b.prototype.isCont=function(){return!0},b.prototype.isDone=function(){return!1},b.prototype.isError=function(){return!1},b.prototype.feed=function(){return this},b.prototype.run=function(e){for(var t=this;!e.isEmpty()&&t.isCont();)t=t.feed(e);return e.isEmpty()&&!e.isDone()&&t.isCont()&&(t=t.feed(m.Done)),t},b.Done=function(e){b.call(this),this.value=e},b.Done.prototype=Object.create(b.prototype),b.Done.prototype.constructor=b.Done,b.Done.prototype.isCont=function(){return!1},b.Done.prototype.isDone=function(){return!0},b.Done.prototype.feed=function(){return this},b.Done.prototype.state=function(){return this.value},b.Error=function(e){b.call(this),this.error=e},b.Error.prototype=Object.create(b.prototype),b.Error.prototype.constructor=b.Error,b.Error.prototype.isCont=function(){return!1},b.Error.prototype.isError=function(){return!0},b.Error.prototype.feed=function(){return this},b.Error.prototype.state=function(){throw this.error},b.unexpectedEOF=new b.Error("unexpected end of input"),D.prototype.append=function(e){if(e>=0&&55295>=e||e>=57344&&65535>=e)this.string+=String.fromCharCode(e);else if(e>=65536&&1114111>=e){var t=e-65536;this.string+=String.fromCharCode(55296|t>>>10,56320|1023&t)}else this.string+=String.fromCharCode(65533)},D.prototype.appendString=function(e){for(var t=new m(e);!t.isEmpty();)this.append(t.head()),t.step()},D.prototype.state=function(){return this.string},v.prototype.prepare=function(e){function t(e,t){var i=Math.max(e,t)-1;return i|=i>>1,i|=i>>2,i|=i>>4,i|=i>>8,i+1}if(this.aliased||e>this.buffer.length){var i=new Uint8Array(t(256,e));this.buffer&&i.set(this.buffer),this.buffer=i,this.aliased=!1}},v.prototype.appendByte=function(e){this.prepare(this.offset+1),this.buffer[this.offset]=e,this.offset+=1},v.prototype.decodeBase64Digit=function(e){return e>=65&&90>=e?e-65:e>=97&&122>=e?e-71:e>=48&&57>=e?e+4:43===e||45===e?62:47===e||95===e?63:void 0},v.prototype.decodeBase64Quantum=function(){var e=this.decodeBase64Digit(this.p),t=this.decodeBase64Digit(this.q);if(61!==this.r){var i=this.decodeBase64Digit(this.r);if(61!==this.s){var n=this.decodeBase64Digit(this.s);this.appendByte(e<<2|t>>>4),this.appendByte(t<<4|i>>>2),this.appendByte(i<<6|n)}else this.appendByte(e<<2|t>>>4),this.appendByte(t<<4|i>>>2)}else{if(61!==this.s)throw"incomplete base64 quantum";this.appendByte(e<<2|t>>>4)}},v.prototype.appendBase64Char=function(e){0===this.p?this.p=e:0===this.q?this.q=e:0===this.r?this.r=e:(this.s=e,this.decodeBase64Quantum(),this.s=0,this.r=0,this.q=0,this.p=0)},v.prototype.state=function(){if(this.buffer){if(this.buffer.length!==this.offset){var e=new Uint8Array(this.offset);e.set(this.buffer.subarray(0,this.offset)),this.buffer=e}}else this.buffer=new Uint8Array(0);return this.aliased=!0,this.buffer},A.prototype=Object.create(b.prototype),A.prototype.constructor=A,A.prototype.feed=function(e){for(var t=this.value;(!e.isEmpty()||e.isDone())&&t.isCont();)t=t.feed(e);if(t.isError())return t;if(t.isDone()){if(!e.isEmpty())return new b.Error({found:e.head()});if(e.isDone())return t}return new A(t)},B.prototype=Object.create(b.prototype),B.prototype.constructor=B,B.prototype.feed=function(e){for(var t=0,i=this.s,n=this.value,r=this.key,s=this.builder||new E;!e.isEmpty()||e.isDone();){if(1===i){for(;!e.isEmpty()&&(t=e.head(),O(t));)e.step();if(e.isEmpty()){if(e.isDone())return new b.Done(s.state())}else i=2}if(2===i){for(r=r||new j;(!e.isEmpty()||e.isDone())&&r.isCont();)r=r.feed(e);if(r.isDone())i=3;else if(r.isError())return r}if(3===i){for(;!e.isEmpty()&&(t=e.head(),x(t));)e.step();if(e.isEmpty()){if(e.isDone())return s.appendValue(r.state()),new b.Done(s.state())}else 58===t?(e.step(),i=4):(s.appendValue(r.state()),r=null,i=6)}if(4===i){for(;!e.isEmpty()&&x(e.head());)e.step();if(e.isEmpty()){if(e.isDone())return s.appendField(new c(r.state())),new b.Done(s.state())}else i=5}if(5===i){for(n=n||new j;(!e.isEmpty()||e.isDone())&&n.isCont();)n=n.feed(e);if(n.isDone())s.appendField(new c(r.state(),n.state())),r=null,n=null,i=6;else if(n.isError())return n}if(6===i){for(;!e.isEmpty()&&(t=e.head(),x(t));)e.step();if(e.isEmpty()){if(e.isDone())return new b.Done(s.state())}else{if(44!==t&&59!==t&&!g(t))return new b.Done(s.state());e.step(),i=1}}}return new B(s,r,n,i)},V.prototype=Object.create(b.prototype),V.prototype.constructor=V,V.prototype.feed=function(e){var t=0,i=this.s,n=this.value,r=this.ident;if(1===i)if(e.isEmpty()||(t=e.head(),64!==t)){if(!e.isEmpty())return new b.Error({expected:"'@'",found:t});if(e.isDone())return b.unexpectedEOF}else e.step(),i=2;if(2===i)if(r=r.feed(e),r.isDone())i=3;else if(r.isError())return r;if(3===i)if(e.isEmpty()||40!==e.head()){if(!e.isEmpty()||e.isDone())return new b.Done(new l(r.state()))}else e.step(),i=4;if(4===i){for(;!e.isEmpty()&&(t=e.head(),O(t));)e.step();if(e.isEmpty()){if(e.isDone())return b.unexpectedEOF}else{if(41===t)return e.step(),new b.Done(new l(r.state()));i=5}}if(5===i){for(;(!e.isEmpty()||e.isDone())&&n.isCont();)n=n.feed(e);if(n.isDone())i=6;else if(n.isError())return n}if(6===i){for(;!e.isEmpty()&&(t=e.head(),O(t));)e.step();if(!e.isEmpty())return 41===t?(e.step(),new b.Done(new l(r.state(),n.state()))):new b.Error({expected:"')'",found:t});if(e.isDone())return b.unexpectedEOF}return new V(r,n,i)},j.prototype=Object.create(b.prototype),j.prototype.constructor=j,j.prototype.feed=function(e){for(var t=0,i=this.s,n=this.value,r=this.field,s=this.builder;!e.isEmpty()||e.isDone();){if(1===i)if(e.isEmpty()){if(e.isDone())return new b.Done(s?s.state():z)}else if(t=e.head(),64===t)r=new V,i=2;else if(123===t)s?(n=new N(s),i=5):(n=new N,i=4);else if(91===t)s?(n=new q(s),i=5):(n=new q,i=4);else if(34===t)n=new M,i=4;else if(37===t)n=new I,i=4;else if(45===t||t>=48&&57>=t)n=new R,i=4;else{if(!F(t))return new b.Done(s?s.state():z);n=new U,i=4}if(2===i){for(;(!e.isEmpty()||e.isDone())&&r.isCont();)r=r.feed(e);if(r.isDone())s=s||new E,s.appendField(r.state()),r=null,i=3;else if(r.isError())return r}if(3===i){for(;!e.isEmpty()&&x(e.head());)e.step();if(e.isEmpty()){if(e.isDone())return new b.Done(s.state())}else i=1}if(4===i){for(;(!e.isEmpty()||e.isDone())&&n.isCont();)n=n.feed(e);if(n.isDone())return s=s||new E,s.appendValue(n.state()),new b.Done(s.state());if(n.isError())return n}if(5===i){for(;(!e.isEmpty()||e.isDone())&&n.isCont();)n=n.feed(e);if(n.isDone())return new b.Done(s.state());if(n.isError())return n}}return new j(s,r,n,i)},S.prototype=Object.create(b.prototype),S.prototype.constructor=S,S.prototype.feed=function(e){for(var t=0,i=this.s,n=this.value,r=this.field,s=this.builder;!e.isEmpty()||e.isDone();){if(1===i)if(e.isEmpty()){if(e.isDone())return new b.Done(s?s.state():z)}else if(t=e.head(),64===t)r=new V,i=2;else if(123===t)s?(n=new N(s),i=5):(n=new N,i=4);else{if(91!==t)return new b.Done(s?s.state():z);s?(n=new q(s),i=5):(n=new q,i=4)}if(2===i){for(;(!e.isEmpty()||e.isDone())&&r.isCont();)r=r.feed(e);if(r.isDone())s=s||new E,s.appendField(r.state()),r=null,i=3;else if(r.isError())return r}if(3===i){for(;!e.isEmpty()&&x(e.head());)e.step();if(e.isEmpty()){if(e.isDone())return new b.Done(s.state())}else i=1}if(4===i){for(;(!e.isEmpty()||e.isDone())&&n.isCont();)n=n.feed(e);if(n.isDone())return s=s||new E,s.appendValue(n.state()),new b.Done(s.state());if(n.isError())return n}if(5===i){for(;(!e.isEmpty()||e.isDone())&&n.isCont();)n=n.feed(e);if(n.isDone())return new b.Done(s.state());if(n.isError())return n}}return new S(s,r,n,i)},N.prototype=Object.create(b.prototype),N.prototype.constructor=N,N.prototype.feed=function(e){var t=0,i=this.s,n=this.value,r=this.key,s=this.builder||new w;if(1===i)if(e.isEmpty()){if(e.isDone())return b.unexpectedEOF}else{if(t=e.head(),123!==t)return new b.Error({expected:"'{'",found:t});e.step(),i=2}for(;!e.isEmpty()||e.isDone();){if(2===i){for(;!e.isEmpty()&&(t=e.head(),O(t));)e.step();if(e.isEmpty()){if(e.isDone())return b.unexpectedEOF}else{if(125===t)return e.step(),new b.Done(s.state());i=3}}if(3===i){for(r=r||new j;(!e.isEmpty()||e.isDone())&&r.isCont();)r=r.feed(e);if(r.isDone())i=4;else if(r.isError())return r}if(4===i){for(;!e.isEmpty()&&(t=e.head(),x(t));)e.step();if(e.isEmpty()){if(e.isDone())return s.appendValue(r.state()),new b.Done(s.state())}else 58===t?(e.step(),i=5):(s.appendValue(r.state()),r=null,i=7)}if(5===i){for(;!e.isEmpty()&&x(e.head());)e.step();if(e.isEmpty()){if(e.isDone())return s.appendField(new c(r.state())),new b.Done(s.state())}else i=6}if(6===i){for(n=n||new j;(!e.isEmpty()||e.isDone())&&n.isCont();)n=n.feed(e);if(n.isDone())s.appendField(new c(r.state(),n.state())),r=null,n=null,i=7;else if(n.isError())return n}if(7===i){for(;!e.isEmpty()&&(t=e.head(),x(t));)e.step();if(e.isEmpty()){if(e.isDone())return b.unexpectedEOF}else{if(44!==t&&59!==t&&!g(t))return 125===t?(e.step(),new b.Done(s.state())):new b.Error({expected:"'}', ';', ',', or newline",found:t});e.step(),i=2}}}return new N(s,r,n,i)},q.prototype=Object.create(b.prototype),q.prototype.constructor=q,q.prototype.feed=function(e){var t=0,i=this.s,n=this.value,r=this.text,s=this.builder;if(1===i)if(e.isEmpty()){if(e.isDone())return b.unexpectedEOF}else{if(t=e.head(),91!==t)return new b.Error({expected:"'['",found:t});e.step(),i=2}for(;!e.isEmpty()||e.isDone();){if(2===i){for(;!e.isEmpty()&&(t=e.head(),64!==t&&91!==t&&92!==t&&93!==t&&123!==t&&125!==t);)e.step(),r=r||new D,r.append(t);if(e.isEmpty()){if(e.isDone())return b.unexpectedEOF}else{if(93===t)return e.step(),s?(r&&s.appendValue(r.state()),new b.Done(s.state())):(r||(r=r||new D),new b.Done(r.state()));64===t?(s=s||new w,r&&(s.appendValue(r.state()),r=null),n=new S,i=3):123===t?(s=s||new w,r&&(s.appendValue(r.state()),r=null),n=new N(s),i=4):91===t?(s=s||new w,r&&(s.appendValue(r.state()),r=null),n=new q(s),i=4):92===t?(e.step(),i=5):new b.Error({found:t})}}if(3===i){for(;(!e.isEmpty()||e.isDone())&&n.isCont();)n=n.feed(e);if(n.isDone())s.appendValue(n.state()),n=null,i=2;else if(n.isError())return n}if(4===i){for(;(!e.isEmpty()||e.isDone())&&n.isCont();)n=n.feed(e);if(n.isDone())n=null,i=2;else if(n.isError())return n}if(5===i)if(e.isEmpty()){if(e.isDone())return b.unexpectedEOF}else if(t=e.head(),r=r||new D,34===t||47===t||64===t||91===t||92===t||93===t||123===t||125===t)e.step(),r.append(t),i=2;else if(98===t)e.step(),r.append(8),i=2;else if(102===t)e.step(),r.append(12),i=2;else if(110===t)e.step(),r.append(10),i=2;else if(114===t)e.step(),r.append(13),i=2;else{if(116!==t)return new b.Error({expected:"escape character",found:t});e.step(),r.append(9),i=2}}return new q(s,r,n,i)},M.prototype=Object.create(b.prototype),M.prototype.constructor=M,M.prototype.feed=function(e){var t=0,i=this.s,n=this.text;if(1===i)if(e.isEmpty()||(t=e.head(),34!==t)){if(!e.isEmpty())return new b.Error({expected:"'\"'",found:t});if(e.isDone())return b.unexpectedEOF}else e.step(),i=2;for(;!e.isEmpty()||e.isDone();){if(2===i){for(n=n||new D;!e.isEmpty()&&(t=e.head(),34!==t&&92!==t);)e.step(),n.append(t);if(e.isEmpty()){if(e.isDone())return b.unexpectedEOF}else{if(34===t)return e.step(),new b.Done(n.state());92===t&&(e.step(),i=3)}}if(3===i)if(e.isEmpty()){if(e.isDone())return b.unexpectedEOF}else if(t=e.head(),34===t||47===t||64===t||91===t||92===t||93===t||123===t||125===t)e.step(),n.append(t),i=2;else if(98===t)e.step(),n.append(8),i=2;else if(102===t)e.step(),n.append(12),i=2;else if(110===t)e.step(),n.append(10),i=2;else if(114===t)e.step(),n.append(13),i=2;else{if(116!==t)return new b.Error({expected:"escape character",found:t});e.step(),n.append(9),i=2}}return new M(n,i)},I.prototype=Object.create(b.prototype),I.prototype.constructor=I,I.prototype.feed=function(e){var t=0,i=this.s,n=this.data||new v;if(1===i)if(e.isEmpty()||(t=e.head(),37!==t)){if(!e.isEmpty())return new b.Error({expected:"'%'",found:t});if(e.isDone())return b.unexpectedEOF}else e.step(),i=2;for(;!e.isEmpty()||e.isDone();){if(2===i)if(!e.isEmpty()&&(t=e.head(),k(t)))e.step(),n.appendBase64Char(t),i=3;else if(!e.isEmpty()||e.isDone())return new b.Done(n.state());if(3===i)if(!e.isEmpty()&&(t=e.head(),k(t)))e.step(),n.appendBase64Char(t),i=4;else{if(!e.isEmpty())return new b.Error({expected:"base64 digit",found:t});if(e.isDone())return b.unexpectedEOF}if(4===i)if(!e.isEmpty()&&(t=e.head(),k(t)||61===t))e.step(),n.appendBase64Char(t),i=61!==t?5:6;else{if(!e.isEmpty())return new b.Error({expected:"base64 digit",found:t});if(e.isDone())return b.unexpectedEOF}if(5===i)if(!e.isEmpty()&&(t=e.head(),k(t)||61===t)){if(e.step(),n.appendBase64Char(t),61===t)return new b.Done(n.state());i=2}else{if(!e.isEmpty())return new b.Error({expected:"base64 digit",found:t});if(e.isDone())return b.unexpectedEOF}else if(6===i){if(!e.isEmpty()&&(t=e.head(),61===t))return e.step(),n.appendBase64Char(t),new b.Done(n.state());if(!e.isEmpty())return new b.Error({expected:"'='",found:t});if(e.isDone())return b.unexpectedEOF}}return new I(n,i)},R.prototype=Object.create(b.prototype),R.prototype.constructor=R,R.prototype.feed=function(e){var t=0,i=this.s,n=this.builder||new D;if(1===i)if(e.isEmpty()){if(e.isDone())return b.unexpectedEOF}else t=e.head(),45===t&&(e.step(),n.append(t)),i=2;if(2===i)if(e.isEmpty()){if(e.isDone())return b.unexpectedEOF}else if(t=e.head(),48===t)e.step(),n.append(t),i=4;else{if(!(t>=49&&57>=t))return new b.Error({expected:"digit",found:t});e.step(),n.append(t),i=3}if(3===i){for(;!e.isEmpty()&&(t=e.head(),t>=48&&57>=t);)e.step(),n.append(t);if(e.isEmpty()){if(e.isDone())return new b.Done(Number(n.state()))}else i=4}if(4===i)if(e.isEmpty()){if(e.isDone())return new b.Done(Number(n.state()))}else if(t=e.head(),46===t)e.step(),n.append(t),i=5;else{if(69!==t&&101!==t)return new b.Done(Number(n.state()));e.step(),n.append(t),i=8}if(5===i)if(e.isEmpty()){if(e.isDone())return b.unexpectedEOF}else{if(t=e.head(),!(t>=48&&57>=t))return new b.Error({expected:"digit",found:t});e.step(),n.append(t),i=6}if(6===i){for(;!e.isEmpty()&&(t=e.head(),t>=48&&57>=t);)e.step(),n.append(t);if(e.isEmpty()){if(e.isDone())return new b.Done(Number(n.state()))}else i=7}if(7===i){if(t=e.head(),69!==t&&101!==t)return new b.Done(Number(n.state()));e.step(),n.append(t),i=8}if(8===i)if(e.isEmpty()){if(e.isDone())return b.unexpectedEOF}else t=e.head(),(43===t||45===t)&&(e.step(),n.append(t)),i=9;if(9===i)if(e.isEmpty()){if(e.isDone())return b.unexpectedEOF}else{if(t=e.head(),!(t>=48&&57>=t))return new b.Error({expected:"digit",found:t});e.step(),n.append(t),i=10}if(10===i){for(;!e.isEmpty()&&(t=e.head(),t>=48&&57>=t);)e.step(),n.append(t);if(!e.isEmpty()||e.isDone())return new b.Done(Number(n.state()))}return new R(n,i)},U.prototype=Object.create(b.prototype),U.prototype.constructor=U,U.prototype.feed=function(e){var t=0,i=this.s,n=this.builder;if(1===i)if(!e.isEmpty()&&(t=e.head(),F(t)))n=n||new D,e.step(),n.append(t),i=2;else{if(!e.isEmpty())return new b.Error({expected:"identitifer",found:t});if(e.isDone())return b.unexpectedEOF}if(2===i){for(;!e.isEmpty()&&(t=e.head(),C(t));)e.step(),n.append(t);if(!e.isEmpty()||e.isDone())return new b.Done(n.state())}return new U(n,i)},_.prototype.writeValue=function(e,t){e instanceof d?this.writeRecord(e,t):"string"==typeof e?this.writeText(e,t):"number"==typeof e?this.writeNumber(e):e instanceof Uint8Array&&this.writeData(e)},_.prototype.writeAttr=function(e){this.builder.append(64),this.writeIdent(e.key),e.value.isExtant||(this.builder.append(40),this.writeBlock(e.value),this.builder.append(41))},_.prototype.writeItem=function(e){e.isField?(this.writeValue(e.key),this.builder.append(58),e.value.isExtant||this.writeValue(e.value)):this.writeValue(e)},_.prototype.writeBlock=function(e){if(e instanceof d)if(e.isMarkup())this.writeMarkup(e);else{for(var t,i=e.iterator(),n=!1;!i.isEmpty()&&(t=i.head(),t.isAttr);)this.writeAttr(t),i.step(),n=!0;if(i.isEmpty())n||(this.builder.append(123),this.builder.append(125));else{for(n&&this.builder.append(123),this.writeItem(i.head()),i.step();!i.isEmpty();)this.builder.append(44),this.writeItem(i.head()),i.step();n&&this.builder.append(125)}}else this.writeValue(e)},_.prototype.writeRecord=function(e,t){if(e.isMarkup())this.writeMarkup(e);else{for(var i,n=e.iterator(),r=!1;!n.isEmpty()&&(i=n.head(),i.isAttr);)this.writeAttr(i),n.step(),r=!0;if(n.isEmpty())r||(this.builder.append(123),this.builder.append(125));else if(n.step(),r&&n.isEmpty())t?i instanceof d||"string"==typeof i?this.writeValue(i,t):(this.builder.append(123),this.writeValue(i),this.builder.append(125)):i.isSlot?(this.builder.append(123),this.writeValue(i),this.builder.append(125)):"string"==typeof i?this.writeString(i):this.writeValue(i);else{for(this.builder.append(123),this.writeItem(i);!n.isEmpty();)i=n.head(),this.builder.append(44),this.writeItem(i),n.step();this.builder.append(125)}}},_.prototype.writeMarkup=function(e){for(var t,i=e.iterator(),n=!1;!i.isEmpty()&&(t=i.head(),t.isAttr);)this.writeAttr(t),i.step(),n=!0;for(this.builder.append(91);!i.isEmpty();){if(t=i.head(),"string"==typeof t)for(var r=new m(t);!r.isEmpty();){var s=r.head();switch(s){case 64:case 91:case 92:case 93:case 123:case 125:this.builder.append(92),this.builder.append(s);break;default:this.builder.append(s)}r.step()}else t instanceof d?this.writeRecord(t,!0):(this.builder.append(123),this.writeItem(t),this.builder.append(125));i.step()}this.builder.append(93)},_.prototype.writeText=function(e,t){function i(){var t=new m(e);if(t.isEmpty()||!F(t.head()))return!1;for(t.step();!t.isEmpty()&&C(t.head());)t.step();return t.isEmpty()}t?this.writeTextMarkup(e):i()?this.writeIdent(e):this.writeString(e)},_.prototype.writeString=function(e){var t=new m(e);for(this.builder.append(34);!t.isEmpty();){var i=t.head();switch(i){case 34:case 92:this.builder.append(92),this.builder.append(i);break;case 8:this.builder.append(92),this.builder.append(98);break;case 12:this.builder.append(92),this.builder.append(102);break;case 10:this.builder.append(92),this.builder.append(110);break;case 13:this.builder.append(92),this.builder.append(114);break;case 9:this.builder.append(92),this.builder.append(116);break;default:this.builder.append(i)}t.step()}this.builder.append(34)},_.prototype.writeIdent=function(e){this.builder.appendString(e)},_.prototype.writeTextMarkup=function(e){var t=new m(e);for(this.builder.append(91);!t.isEmpty();){var i=t.head();switch(i){case 64:case 91:case 92:case 93:case 123:case 125:this.builder.append(92),this.builder.append(i);break;default:this.builder.append(i)}t.step()}this.builder.append(93)},_.prototype.writeNumber=function(e){this.builder.appendString(e.toString())},_.prototype.writeData=function(e){function t(e){return e>=0&&26>e?e+65:e>=26&&52>e?e+71:e>=52&&62>e?e-4:62===e?43:63===e?47:void 0}this.builder.append(37);for(var i,n,r,s=0,p=e.length;p>s+2;)i=e[s],n=e[s+1],r=e[s+2],this.builder.append(t(i>>>2)),this.builder.append(t(63&(i<<4|n>>>4))),this.builder.append(t(63&(n<<2|r>>>6))),this.builder.append(t(63&r)),s+=3;p>s+1?(i=e[s],n=e[s+1],this.builder.append(t(i>>>2)),this.builder.append(t(63&(i<<4|n>>>4))),this.builder.append(t(n<<2&63)),this.builder.append(61),s+=2):p>s&&(i=e[s],this.builder.append(t(i>>>2)),this.builder.append(t(i<<4&63)),this.builder.append(61),this.builder.append(61),s+=1)},_.prototype.state=function(){return this.builder.state()},t.exports=function(e){return n(e)},i=t.exports,i.parse=p,i.stringify=o,i.objectify=u,i.Field=h,i.Attr=l,i.Slot=c,i.Record=d,i.Extant=T,i.Absent=z,i.RecordBuilder=w,i.ValueBuilder=E},{}]},{},[1])(1)});
//# sourceMappingURL=recon.min.js.map